[{"categories":["Note"],"content":"mozjpeg https://github.com/mozilla/mozjpeg 説明不要かと思いますが、mozillaプロジェクトのjpegエンコードです\nちなみに、オンラインツールでも提供されてます。\nhttps://mozjpeg.codelove.de/ インストール macへのインストールはbrewコマンドでできます。\n$ brew install mozjpeg 使い方 インストールしてもmozjpegというコマンドが使えるようになるわけではなく、\n画像圧縮にはcjpegというコマンドを使います。\npathが通ってないですが、下記にインストールされてます。\n$ /usr/local/Cellar/mozjpeg/3.3.1_1/bin/cjpeg 画像を圧縮する # 圧縮前サイズ $ ls -l sample.jpg | cut -d\u0026#39; \u0026#39; -f7 52611 # 圧縮品質80を指定 $ /usr/local/Cellar/mozjpeg/3.3.1_1/bin/cjpeg -optimize -quality 80 sample.jpg \u0026gt; sample80.jpg # 圧縮後サイズ $ ls -l sample80.jpg | cut -d\u0026#39; \u0026#39; -f8 32311 一括圧縮編(xargs) 事前にresizedフォルダを作成しておく\n$ find . -name \u0026#39;*.jpg\u0026#39; -type f | sed \u0026#39;s!^.*/!!\u0026#39; | xargs -I% /usr/local/Cellar/mozjpeg/3.3.1_1/bin/cjpeg -optimize -quality 80 -outfile \u0026#34;resized/%\u0026#34; \u0026#34;%\u0026#34; ヘルプ $ /usr/local/Cellar/mozjpeg/3.3.1_1/bin/cjpeg -help /usr/local/Cellar/mozjpeg/3.3.1_1/bin/cjpeg: unknown option \u0026#39;help\u0026#39; usage: /usr/local/Cellar/mozjpeg/3.3.1_1/bin/cjpeg [switches] [inputfile] Switches (names may be abbreviated): -quality N[,...] Compression quality (0..100; 5-95 is most useful range, default is 75) -grayscale Create monochrome JPEG file -rgb Create RGB JPEG file -optimize Optimize Huffman table (smaller file, but slow compression, enabled by default) -progressive Create progressive JPEG file (enabled by default) -baseline Create baseline JPEG file (disable progressive coding) -targa Input file is Targa format (usually not needed) -revert Revert to standard defaults (instead of mozjpeg defaults) -fastcrush Disable progressive scan optimization -dc-scan-opt DC scan optimization mode - 0 One scan for all components - 1 One scan per component (default) - 2 Optimize between one scan for all components and one scan for 1st component plus one scan for remaining components -notrellis Disable trellis optimization -trellis-dc Enable trellis optimization of DC coefficients (default) -notrellis-dc Disable trellis optimization of DC coefficients -tune-psnr Tune trellis optimization for PSNR -tune-hvs-psnr Tune trellis optimization for PSNR-HVS (default) -tune-ssim Tune trellis optimization for SSIM -tune-ms-ssim Tune trellis optimization for MS-SSIM Switches for advanced users: -noovershoot Disable black-on-white deringing via overshoot -arithmetic Use arithmetic coding -dct int Use integer DCT method (default) -dct fast Use fast integer DCT (less accurate) -dct float Use floating-point DCT method -quant-baseline Use 8-bit quantization table entries for baseline JPEG compatibility -quant-table N Use predefined quantization table N: - 0 JPEG Annex K - 1 Flat - 2 Custom, tuned for MS-SSIM - 3 ImageMagick table by N. Robidoux - 4 Custom, tuned for PSNR-HVS - 5 Table from paper by Klein, Silverstein and Carney -restart N Set restart interval in rows, or in blocks with B -smooth N Smooth dithered input (N=1..100 is strength) -maxmemory N Maximum memory to use (in kbytes) -outfile name Specify name for output file -memdst Compress to memory instead of file (useful for benchmarking) -verbose or -debug Emit debug output -version Print version information and exit Switches for wizards: -qtables FILE Use quantization tables given in FILE -qslots N[,...] Set component quantization tables -sample HxV[,...] Set component sampling factors -scans FILE Create multi-scan JPEG per script FILE ","permalink":"https://techteco.github.io/2019/04/02/mozjpeg/","tags":["mozjpeg"],"title":"Macでmozjpegを使う"},{"categories":["Note"],"content":"sipsコマンド sipsは**scriptable image processing system.**の略です。\nThis tool is used to query or modify raster image files and ColorSync ICC profiles.\nIts functionality can also be used through the \u0026ldquo;Image Events\u0026rdquo; AppleScript suite.\n簡単な使い方 画像の情報を参照 スマフォで撮影した画像を見てみるとこんな感じの情報が取得できました。\n$ sips -g all sample.jpg /PATH/sample.jpg pixelWidth: 4608 pixelHeight: 2304 typeIdentifier: public.jpeg format: jpeg formatOptions: default dpiWidth: 72.000 dpiHeight: 72.000 samplesPerPixel: 3 bitsPerSample: 8 hasAlpha: no space: RGB profile: sRGB IEC61966-2.1 creation: 2018:08:04 09:39:37 make: XXXXXX model: XXXXXXXXXXXX software: XXXXXXXXXXXX 必要な項目だけ出力したい場合は、パラメータを指定すると可能です。\n$ sips -g pixelHeight -g pixelWidth sample.jpg /PATH/sample.jpg pixelHeight: 2304 pixelWidth: 4608 画像をリサイズする 縦横を640×640に収まるようにしてみる\n$ sips -Z 640 sample.jpg /PATH/sample.jpg \u0026lt;CGColor 0x7ff75a508840\u0026gt; [\u0026lt;CGColorSpace 0x7ff75a701d30\u0026gt; (kCGColorSpaceDeviceRGB)] ( 0 0 0 1 ) /PATH/sample.jpg # リサイズ後 $ sips -g pixelHeight -g pixelWidth sample.jpg /PATH/sample.jpg pixelHeight: 320 pixelWidth: 640 ヘルプ 他にもいろいろできるので、ヘルプを見ながら試すのもいいかも。\nmacのプレビュー.appで編集できそうな項目は、だいたいできそうな感じですね。\n使い方 $ sips --help sips 10.4.4 - scriptable image processing system. This tool is used to query or modify raster image files and ColorSync ICC profiles. Its functionality can also be used through the \u0026#34;Image Events\u0026#34; AppleScript suite. Usages: sips [-h, --help] sips [-H, --helpProperties] sips [image-query-functions] imagefile ... sips [profile-query-functions] profile ... sips [image modification functions] imagefile ... [--out result-file-or-dir] sips [profile modification functions] profile ... [--out result-file-or-dir] Profile query functions: -g, --getProperty key -X, --extractTag tag tagFile -v, --verify Image query functions: -g, --getProperty key -x, --extractProfile profile Profile modification functions: -s, --setProperty key value -d, --deleteProperty key --deleteTag tag --copyTag srcTag dstTag --loadTag tag tagFile --repair Image modification functions: -s, --setProperty key value -d, --deleteProperty key -e, --embedProfile profile -E, --embedProfileIfNone profile -m, --matchTo profile -M, --matchToWithIntent profile intent --deleteColorManagementProperties -r, --rotate degreesCW -f, --flip horizontal|vertical -c, --cropToHeightWidth pixelsH pixelsW -p, --padToHeightWidth pixelsH pixelsW --padColor hexcolor -z, --resampleHeightWidth pixelsH pixelsW --resampleWidth pixelsW --resampleHeight pixelsH -Z, --resampleHeightWidthMax pixelsWH -i, --addIcon -o, --optimizeColorForSharing 設定値 $ sips -H sips 10.4.4 - scriptable image processing system. This tool is used to query or modify raster image files and ColorSync ICC profiles. Its functionality can also be used through the \u0026#34;Image Events\u0026#34; AppleScript suite. The commands --getProperty, --setProperty, and --deleteProperty can use one of the following keys as a parameter. Special property keys: all binary data allxml binary data Image property keys: dpiHeight float dpiWidth float pixelHeight integer (read-only) pixelWidth integer (read-only) typeIdentifier string (read-only) format string jpeg | tiff | png | gif | jp2 | pict | bmp | qtif | psd | sgi | tga formatOptions string default | [low|normal|high|best|\u0026lt;percent\u0026gt;] | [lzw|packbits] space string (read-only) samplesPerPixel integer (read-only) bitsPerSample integer (read-only) creation string (read-only) make string model string software string (read-only) description string copyright string artist string profile binary data hasAlpha boolean (read-only) Profile property keys: description utf8 string size integer (read-only) cmm string version string class string (read-only) space string (read-only) pcs string (read-only) creation string platform string quality string normal | draft | best deviceManufacturer string deviceModel integer deviceAttributes0 integer deviceAttributes1 integer renderingIntent string perceptual | relative | saturation | absolute creator string copyright string md5 string (read-only) ","permalink":"https://techteco.github.io/2019/04/02/sips/","tags":["sips"],"title":"Macのsipsコマンドの使い方メモ"},{"categories":["AWS"],"content":"AWS CodeBuildとは CodeBuildは\b使ったことはありましたが、検証が面倒くさいところがありました。\nビルド自体は動き出すとなかなか変更する機会がなく、今回ようやくローカル環境でのテストを試すことになりました。\nちなみに、CodeBuildとは、\nAWS CodeBuild とは AWS CodeBuild はクラウドで動作する、完全マネージド型のビルドサービスです。AWS CodeBuild はソースコードをコンパイルし、単体テストを実行して、すぐにデプロイできるアーティファクトを生成します。AWS CodeBuild により、独自のビルドサーバーのプロビジョニング、管理、スケーリングが不要になります。Apache Maven、Gradle などの最も一般的なプログラミング言語とビルドツール用のパッケージ済みのビルド環境を提供します。AWS CodeBuild のビルド環境をカスタマイズして、独自のビルドツールを使用することもできます。AWS CodeBuild はピーク時のビルドリクエストに合わせて自動的にスケーリングします。\nCodeBuildの使い方は、公式のリファレンスを見るとわかりやすく説明されています。\nAWS CodeBuild のビルド仕様に関するリファレンス AWS CodeBuild のビルド環境リファレンス 実行環境 $ sw_vers ProductName:\tMac OS X ProductVersion:\t10.13.6 BuildVersion:\t17G2307 $ docker -v Docker version 18.06.1-ce, build e68fc7a 準備 Announcing Local Build Support for AWS CodeBuild Github aws/aws-codebuild-docker-images を参考に進めます。\nイントール $ git clone https://github.com/aws/aws-codebuild-docker-images.git build Docker image 今回は簡単な動作検証なので、ubuntu-baseを使って試します。\nAWS CodeBuild に用意されている Docker イメージ $ git clone https://github.com/aws/aws-codebuild-docker-images.git $ cd aws-codebuild-docker-images/ubuntu/ubuntu-base/14.04 $ docker build -t aws/codebuild/ubuntu-base:14.04 . ビルドは結構時間かかります。。\nSuccessfully tagged aws/codebuild/ubuntu-base:14.04 が出たら完了。\nDocker Run ３つの環境変数を設定します\nIMAGE_NAME: The name of your build environment image.\n先程作ったdocker imageですね。aws/codebuild/ubuntu-base:14.04\tSOURCE: The absolute path to your source code directory.\nソースコードのパスです。今回は~/codebuild/sourceにします。ここにbuildspec.ymlをおいておきます。\nARTIFACTS: The absolute path to your artifact output folder.\nビルドの成果物を出力されるパスです。今回は~/codebuild/artifactsにします。\n今回は簡単な検証なので、buildspec.ymlは以下のようなものにします。\nversion: 0.2 phases: install: commands: - apt-get update -y build: commands: - echo \u0026#34;codebuild local test\u0026#34; \u0026gt; $CODEBUILD_SRC_DIR/output.txt artifacts: base-directory: $CODEBUILD_SRC_DIR files: - output.txt $ docker run -it -v /var/run/docker.sock:/var/run/docker.sock \\ -e \u0026#34;IMAGE_NAME=aws/codebuild/ubuntu-base:14.04\u0026#34; \\ -e \u0026#34;ARTIFACTS=/Users/*******/codebuild/artifacts\u0026#34; \\ -e \u0026#34;SOURCE=/Users/*******/codebuild/source\u0026#34; \\ amazon/aws-codebuild-local 実行結果を見てみると、\n$ cd /Users/*******/codebuild/artifacts/ $ ls artifacts.zip $ unzip artifacts.zip Archive: artifacts.zip inflating: output.txt $ cat output.txt codebuild local test 出力ファイルが取得できました！\n","permalink":"https://techteco.github.io/2018/09/19/aws-codebuild-local/","tags":["CodeBuild"],"title":"AWS CodeBuildをローカル環境で動かす"},{"categories":["AWS"],"content":"AWS SAM CLIとは AWS SAM自体は以前の投稿 でも書いているので割愛。\nAWS SAM CLIは、もともとsam localと呼ばれていたものの進化版？のようですね。\nsam localは何度かつかってましたが、sam cliになったのを機に再度整理する。\nイントール 参考:SAM CLI のインストール dockerとイントールに使われるpip(Pythonのパッケージ管理)が必要になるが、詳細は割愛。\n$ pip install aws-sam-cli $ sam --version SAM CLI, version 0.6.0 参考サイトは0.3.0なので、少しずつ改善されているようですね。\nsam initでサンプルを動かす Simple App (sam init) の作成 ここではgolangを使って試してみる。\n$ sam init --runtime go [\u0026#43;] Initializing project structure... [SUCCESS] - Read sam-app/README.md for further instructions on how to proceed [*] Project initialization is now complete # こんなファイルが自動生成されます。 $ tree sam-app/ sam-app/ ├── Makefile ├── README.md ├── hello-world │ ├── main.go │ └── main_test.go └── template.yaml 1 directory, 5 files ちなみに、template.yamlは、今までと変わってない（？）ので既存のリソースにも使えるはず。\nAWSTemplateFormatVersion: \u0026#39;2010-09-09\u0026#39; Transform: AWS::Serverless-2016-10-31 Description: \u0026gt; sam-app Sample SAM Template for sam-app # More info about Globals: https://github.com/awslabs/serverless-application-model/blob/master/docs/globals.rst Globals: Function: Timeout: 5 Resources: HelloWorldFunction: Type: AWS::Serverless::Function # More info about Function Resource: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#awsserverlessfunction Properties: CodeUri: hello-world/ Handler: hello-world Runtime: go1.x Tracing: Active # https://docs.aws.amazon.com/lambda/latest/dg/lambda-x-ray.html Events: CatchAll: Type: Api # More info about API Event Source: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#api Properties: Path: /hello Method: GET Environment: # More info about Env Vars: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#environment-object Variables: PARAM1: VALUE Outputs: HelloWorldAPI: Description: \u0026#34;API Gateway endpoint URL for Prod environment for First Function\u0026#34; Value: !Sub \u0026#34;https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/\u0026#34; HelloWorldFunction: Description: \u0026#34;First Lambda Function ARN\u0026#34; Value: !GetAtt HelloWorldFunction.Arn HelloWorldFunctionIamRole: Description: \u0026#34;Implicit IAM Role created for Hello World function\u0026#34; Value: !GetAtt HelloWorldFunctionRole.Arn go test テストも用意されてるので実行してみる（本題からそれますが、、）\n$ cd hello-world/ $ go test PASS ok _/Users/********/development/private/sam-cli/sam-app/hello-world\t0.034s go build $ GOOS=linux GOARCH=amd64 go build -o hello-world/hello-world ./hello-world # hello-worldができてますね。 $ tree . ├── Makefile ├── README.md ├── hello-world │ ├── hello-world │ ├── main.go │ └── main_test.go └── template.yaml ローカルでAPIサーバ(api gateway + lambda)を起動 $ sam local start-api 2018-08-31 16:16:58 Mounting HelloWorldFunction at http://127.0.0.1:3000/hello [GET] 2018-08-31 16:16:58 You can now browse to the above endpoints to invoke your functions. You do not need to restart/reload SAM CLI while working on your functions changes will be reflected instantly/automatically. You only need to restart SAM CLI if you update your AWS SAM template 2018-08-31 16:16:58 * Running on http://127.0.0.1:3000/ (Press CTRL\u0026#43;C to quit) http://127.0.0.1:3000/ で起動するので、http://127.0.0.1:3000/hello をブラウザで表示してみると\nHello, XXX.XXX.XXX.XXX XXX.XXX.XXX.XXXはアクセス元のIPアドレスが表示されます。https://checkip.amazonaws.com/ の結果を表示しているだけ。\nコンソールには下記の感じでログが表示されていきます。\n2018-08-31 16:18:17 Invoking hello-world (go1.x) 2018-08-31 16:18:17 Found credentials in shared credentials file: ~/.aws/credentials Fetching lambci/lambda:go1.x Docker container image...... 2018-08-31 16:18:20 Mounting /Users/**********/development/private/sam-cli/sam-app/hello-world as /var/task:ro inside runtime container START RequestId: d12296fa-78d8-1bf6-a821-f7bd494db81c Version: $LATEST END RequestId: d12296fa-78d8-1bf6-a821-f7bd494db81c REPORT RequestId: d12296fa-78d8-1bf6-a821-f7bd494db81c\tDuration: 763.56 ms\tBilled Duration: 800 ms\tMemory Size: 128 MB\tMax Memory Used: 11 MB 2018-08-31 16:18:22 No Content-Type given. Defaulting to \u0026#39;application/json\u0026#39;. 2018-08-31 16:18:22 127.0.0.1 - - [31/Aug/2018 16:18:22] \u0026#34;GET /hello HTTP/1.1\u0026#34; 200 - ローカルで検証できるととても便利。serverless開発には欠かせないですね。\n","permalink":"https://techteco.github.io/2018/08/31/aws-sam-cli/","tags":["Lambda","sam","aws cli","cloudformation"],"title":"AWS SAM CLIを使ってlambdaのローカル開発"},{"categories":["AWS","GO"],"content":"やること S3に保存されたファイルを取得して、データを追記して保存する\nS3上のファイル存在確認(ListObjectsV2) ファイルが存在すれば、ファイル取得(GetObject) 追記してS3に保存(PutObject) Lambdaの作成 さっそく\ngolang main.go package main import ( \u0026#34;bytes\u0026#34; \u0026#34;context\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;os\u0026#34; \u0026#34;github.com/aws/aws-lambda-go/lambda\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/aws\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/aws/awserr\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/aws/endpoints\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/aws/session\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/service/s3\u0026#34; ) func HandleRequest(ctx context.Context) (string, error) { var BUCKET = os.Getenv(\u0026#34;BUCKET\u0026#34;) var KEY = os.Getenv(\u0026#34;KEY\u0026#34;) svc := s3.New(session.New(), \u0026amp;aws.Config{ Region: aws.String(endpoints.ApNortheast1RegionID), }) // ファイルの存在確認 loo, errlo := svc.ListObjectsV2(\u0026amp;s3.ListObjectsV2Input{ Bucket: aws.String(BUCKET), Prefix: aws.String(KEY), }) if errlo != nil { if aerr, ok := errlo.(awserr.Error); ok { switch aerr.Code() { case s3.ErrCodeNoSuchBucket: log.Print(\u0026#34;bucket does not exist at ListObjectsV2\u0026#34;) return \u0026#34;bucket does not exis at tListObjectsV2\u0026#34;, aerr default: log.Printf(\u0026#34;aws error %v at ListObjectsV2\u0026#34;, aerr.Error()) return \u0026#34;aws error at ListObjectsV2\u0026#34;, aerr } } log.Printf(\u0026#34;error %v at ListObjectsV2\u0026#34;, errlo.Error()) return \u0026#34;error at ListObjectsV2\u0026#34;, errlo } wb := new(bytes.Buffer) // write buffer if *loo.KeyCount == 0 { // 新規作成 fmt.Fprint(wb, \u0026#34;header1,header2,header3\\n\u0026#34;) // ヘッダー } else { // Object取得 goo, errgo := svc.GetObject(\u0026amp;s3.GetObjectInput{ Bucket: aws.String(BUCKET), Key: aws.String(KEY), }) defer goo.Body.Close() if errgo != nil { if aerr, ok := errgo.(awserr.Error); ok { switch aerr.Code() { case s3.ErrCodeNoSuchBucket: log.Print(\u0026#34;bucket does not exist at GetObject\u0026#34;) return \u0026#34;bucket does not exist at GetObject\u0026#34;, aerr case s3.ErrCodeNoSuchKey: // 新規作成 log.Print(\u0026#34;object with key does not exist in bucket at GetObject\u0026#34;) return \u0026#34;object with key does not exist in bucket at GetObject\u0026#34;, aerr default: log.Printf(\u0026#34;aws error %v at GetObject\u0026#34;, aerr.Error()) return \u0026#34;aws error at GetObject\u0026#34;, aerr } } log.Printf(\u0026#34;error %v at GetObject\u0026#34;, errgo.Error()) return \u0026#34;error at GetObject\u0026#34;, errgo } brb := new(bytes.Buffer) // buffer Response Body brb.ReadFrom(goo.Body) srb := brb.String() // string Response Body fmt.Fprint(wb, srb) // 読み取りデータ } fmt.Fprint(wb, \u0026#34;col1,col2,col3\\n\u0026#34;) // 追記データ _, errpo := svc.PutObject(\u0026amp;s3.PutObjectInput{ Body: bytes.NewReader(wb.Bytes()), Bucket: aws.String(BUCKET), Key: aws.String(KEY), ACL: aws.String(\u0026#34;private\u0026#34;), ServerSideEncryption: aws.String(\u0026#34;AES256\u0026#34;), }) if errpo != nil { if aerr, ok := errpo.(awserr.Error); ok { log.Printf(\u0026#34;aws error %v at PutObject\u0026#34;, aerr.Error()) return \u0026#34;aws error at PutObject\u0026#34;, aerr } log.Printf(\u0026#34;error %v at PutObject\u0026#34;, errpo.Error()) return \u0026#34;error at PutObject\u0026#34;, errpo } defer log.Print(\u0026#34;normal end\u0026#34;) return \u0026#34;normal end\u0026#34;, nil } func main() { lambda.Start(HandleRequest) } コンパイル \u0026amp; 圧縮 $source ~/.gvm/scripts/gvm; GOOS=linux go build -o main; zip main.zip main; SAM BUCKET,KEYは適当に変更してください。\nsam-template.yaml AWSTemplateFormatVersion : \u0026#39;2010-09-09\u0026#39; Transform: AWS::Serverless-2016-10-31 Description: lambda go S3 sample Resources: S3Crud: Type: AWS::Serverless::Function Properties: Handler: main Runtime: go1.x CodeUri: main.zip Policies: - S3CrudPolicy: BucketName: techte.co.shared Environment: Variables: BUCKET: your_bucket KEY: your_file_name デプロイ $ aws cloudformation package \\ --template-file ./sam-template.yaml \\ --s3-bucket techte.co.shared \\ --s3-prefix aws/lambda/source/s3crud \\ --output-template-file packaged-sam-template.yaml $ aws cloudformation deploy \\ --template-file packaged-sam-template.yaml \\ --stack-name sample-lambda-s3 \\ --capabilities CAPABILITY_IAM 結果 Lambdaを実行される度にファイルに行が追加されていればOK\n","permalink":"https://techteco.github.io/2018/02/09/lambda-go-s3/","tags":["Lambda","S3"],"title":"LambdaのGolangでS3を操作する"},{"categories":["Note"],"content":"Laws Of UX Laws Of UX UXを考えるときに考慮するといいであろう法則がまとめられています。\nサイトのデザインもきれいです。\nFitts’s Law Fitts’s Law The time to acquire a target is a function of the distance to and size of the target.\n翻訳すると\nターゲットを取得する時間はターゲットの距離とターゲットのサイズの関数です。\nターゲットまでの距離が長くなって、ターゲットの距離が小さくなればなるほで、時間がかかりますよ。ってことのようです。\nHick’s Law Hick’s Law The time it takes to make a decision increases with the number and complexity of choices.\n翻訳すると\n決定を下すのに要する時間は、選択肢の数と複雑さとともに増加します。\n選択肢はシンプルにしたほうがいいってことですね。\nJakob’s Law Jakob’s Law Users spend most of their time on other sites. This means that users prefer your site to work the same way as all the other sites they already know.\n翻訳すると\nユーザーはほとんどの時間を他のサイトに費やしています。これは、ユーザーが既に知っている他のサイトと同じようにサイトを好むことを意味します。\n奇をてらったことをするな、ってことですかね？\nLaw of Prägnanz Law of Prägnanz People will perceive and interpret ambiguous or complex images as the simplest form possible, because it is the interpretation that requires the least cognitive effort of us.\n翻訳すると\n人々は、あいまいで複雑なイメージを可能な限り単純な形として認識し、解釈します。なぜなら、それは私たちの最小の認知努力を必要とする解釈であるからです。\n細かいところより、ざっくりと捉えるってことですかね。\nLaw of Proximity Law of Proximity Objects that are near, or proximate to each other, tend to be grouped together.\n翻訳すると\n互いに近い、または近くにあるオブジェクトは、一緒にグループ化される傾向があります。\n近くにあるものとを同一グループとしてみなす。逆にいうと同一グループとして認識させたいときは近くにおくってことかな。\nMiller’s Law Miller’s Law The average person can only keep 7 (plus or minus 2) items in their working memory.\n翻訳すると\n平均的な人は7（プラスまたはマイナス2）のアイテムしか作業メモリに保持できません。\n短期記憶の容量についてですね。一度に多くの情報を与えすぎないこと。\nParkinson’s Law Parkinson’s Law Any task will inflate until all of the available time is spent.\n翻訳すると\n利用可能な時間のすべてが費やされるまで、どんな仕事も膨らみます。\n一般的には、「ある資源に対する需要は、その資源が入手可能な量まで膨張する」ということらしいが、UXだとどういう意味としてとらえればいいのか？\nSerial Position Effect Serial Position Effect Users have a propensity to best remember the first and last items in a series.\n翻訳すると\nユーザーはシリーズ内の最初と最後のアイテムを最もよく記憶する傾向があります。\n第一印象とさり際の印象が残るってことですかね。その間は意外に印象にのこらないってのは確かにそうかも。\nTesler’s Law Tesler’s Law Tesler\u0026rsquo;s Law, also known as The Law of Conservation of Complexity, states that for any system there is a certain amount of complexity which cannot be reduced.\n翻訳すると\n複雑さの保全の法則としても知られているテスラーの法則は、どのシステムでも一定の複雑さが軽減できないと述べています。\nシンプル（単純化）にするには限界があるということかな。\n自動化が進んでいくとこの辺はどうなるんですかねー\nVon Restorff Effect Von Restorff Effect The Von Restorff effect, also known as The Isolation Effect, predicts that when multiple similar objects are present, the one that differs from the rest is most likely to be remembered.\n翻訳すると\nVon Restorffエフェクト（分離効果とも呼ばれます）は、複数の類似したオブジェクトが存在する場合、残りの部分とは異なるオブジェクトが記憶される可能性が最も高いと予測します。\n他と違うものがあると目立ち記憶に残りやすいということですかね。\n部分的に色つけたり、フォントのサイズ変えたりとか。\nZeigarnik Effect Zeigarnik Effect People remember uncompleted or interrupted tasks better than completed tasks.\n翻訳すると\n完了したタスクよりも未完了または中断されたタスクを覚えています。\nそのままだけど、たしかにそうかも。\nまとめ デザイナーさんとかは、よく科学的根拠を求められたりしますが、こういう理屈が裏付けにあると説明しやすいんで、知識として持っておくのはありですね。\n","permalink":"https://techteco.github.io/2018/01/31/laws-of-ux/","tags":["UX"],"title":"LAWS OF UX というサイトの紹介"},{"categories":["AWS","GO"],"content":"KMSについては、AWS KMSの使い方 を参考\n環境構築 暗号化データ 暗号化する。ここでは、shared(alias)というkeyを使う。\n※自分の環境に合わせて。\n$ aws kms encrypt \\ --key-id alias/shared \\ --plaintext \u0026#34;I am seacret word\u0026#34; \\ --output text \\ --query CiphertextBlob ここで出力された値をLambdaの環境変数に渡します。\nLambda構築用のSAMテンプレート 参考はこちらのAWS SAMを使ってみる をご確認ください。\nlambda-go-kms.yaml AWSTemplateFormatVersion : \u0026#39;2010-09-09\u0026#39; Transform: AWS::Serverless-2016-10-31 Description: KMS decrypt. Resources: KMSDecrypt: Type: AWS::Serverless::Function Properties: Handler: main Runtime: go1.x CodeUri: main.zip # KMSのDecrypt用のポリシー定義 Policies: - KMSDecryptPolicy: # 暗号化に使ったKeyID # aliasは対応していない KeyId: \u0026#34;01234567-0123-1234-1234-123456789012\u0026#34; Environment: Variables: # Encrypted: \u0026#34;ここに暗号化したCiphertextBlobの値\u0026#34; Golangのソースコード main.go package main import ( \u0026#34;context\u0026#34; \u0026#34;encoding/base64\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;os\u0026#34; \u0026#34;github.com/aws/aws-lambda-go/lambda\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/aws\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/aws/session\u0026#34; \u0026#34;github.com/aws/aws-sdk-go/service/kms\u0026#34; ) func HandleRequest(ctx context.Context) (string, error) { var encrypted = os.Getenv(\u0026#34;Encrypted\u0026#34;) svc := kms.New(session.New(), aws.NewConfig().WithRegion(\u0026#34;ap-northeast-1\u0026#34;)) data, _ := base64.StdEncoding.DecodeString(encrypted) input := \u0026amp;kms.DecryptInput{ CiphertextBlob: []byte(data), } result, err := svc.Decrypt(input) if err != nil { return \u0026#34;\u0026#34;, err } text, _ := base64.StdEncoding.DecodeString(base64.StdEncoding.EncodeToString(result.Plaintext)) return fmt.Sprintf(\u0026#34;%s\u0026#34;, text), nil } func main() { lambda.Start(HandleRequest) } コンパイル $ source ~/.gvm/scripts/gvm; GOOS=linux go build -o main; zip main.zip main; パック $ aws cloudformation package \\ --template-file ./lambda-go-kms.yaml \\ --s3-bucket techte.co.shared \\ --s3-prefix lambda/golang/kms \\ --output-template-file packaged-template-lambda-go-kms.yaml デプロイ $ aws cloudformation deploy \\ --template-file packaged-template-lambda-go-kms.yaml \\ --stack-name LambdaGoKms \\ --capabilities CAPABILITY_IAM 実行結果 $ aws lambda invoke --invocation-type Event --function-name XXXXXXXXXXXXXXXXXXXXXXXXX --invocation-type RequestResponse outputfile.txt $ cat outputfile.txt \u0026#34;I am seacret word\u0026#34; 無事出力できました！\n","permalink":"https://techteco.github.io/2018/01/30/lambda-go-kms/","tags":["aws cli","cloudformation","kms","sam","lambda"],"title":"Lambda(Golang)からAWS KMSを復号化する方法"},{"categories":["AWS"],"content":"基本的な使い方 設定内容 ざっくりですが、こんな項目を設定します。詳細はCloudformationのテンプレートの内容を見てもらった方が早いです。\nVPC設定 Internet Gateway設定 Subnetの設定 DHCP Optionの設定 Route Tableの設定 ACLの設定 ※設定値は参考までに。\nテンプレート AWSTemplateFormatVersion: \u0026#34;2010-09-09\u0026#34; Description: \u0026#34;Basic Network Setting\u0026#34; Parameters: pramStackNamePrefic: Description: \u0026#34;Common stack name prefix\u0026#34; Type: String Default: \u0026#34;\u0026#34; Resources: VPC: Type: \u0026#34;AWS::EC2::VPC\u0026#34; Properties: CidrBlock: \u0026#34;192.168.0.0/16\u0026#34; InstanceTenancy: default EnableDnsSupport: true EnableDnsHostnames: true Tags: - Key: Name Value: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - vpc igw: Type: \u0026#34;AWS::EC2::InternetGateway\u0026#34; Properties: Tags: - Key: Name Value: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - igw vpcgwattc: Type: \u0026#34;AWS::EC2::VPCGatewayAttachment\u0026#34; Properties: VpcId: !Ref VPC InternetGatewayId: !Ref igw subnetA: Type: \u0026#34;AWS::EC2::Subnet\u0026#34; Properties: CidrBlock: \u0026#34;192.168.0.0/20\u0026#34; AvailabilityZone: \u0026#34;ap-northeast-1a\u0026#34; VpcId: !Ref VPC Tags: - Key: Name Value: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - subnet subnetC: Type: \u0026#34;AWS::EC2::Subnet\u0026#34; Properties: CidrBlock: \u0026#34;192.168.16.0/20\u0026#34; AvailabilityZone: \u0026#34;ap-northeast-1c\u0026#34; VpcId: !Ref VPC Tags: - Key: Name Value: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - subnet DHCPOpt: Type: \u0026#34;AWS::EC2::DHCPOptions\u0026#34; Properties: DomainName: \u0026#34;ap-northeast-1.compute.internal\u0026#34; DomainNameServers: - AmazonProvidedDNS Tags: - Key: Name Value: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - dhcp-ops rtb: Type: \u0026#34;AWS::EC2::RouteTable\u0026#34; Properties: VpcId: !Ref VPC Tags: - Key: Name Value: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - rtb SubnetRouteTableAssociationA: Type: \u0026#34;AWS::EC2::SubnetRouteTableAssociation\u0026#34; Properties: SubnetId: !Ref subnetA RouteTableId: !Ref rtb SubnetRouteTableAssociationC: Type: \u0026#34;AWS::EC2::SubnetRouteTableAssociation\u0026#34; Properties: SubnetId: !Ref subnetC RouteTableId: !Ref rtb # out-bound aclOutAll: Type: \u0026#34;AWS::EC2::NetworkAclEntry\u0026#34; Properties: CidrBlock: \u0026#34;0.0.0.0/0\u0026#34; Egress: true # out-bound Protocol: \u0026#34;-1\u0026#34; RuleAction: allow RuleNumber: 100 NetworkAclId: !GetAtt VPC.DefaultNetworkAcl aclOut2: Type: \u0026#34;AWS::EC2::NetworkAclEntry\u0026#34; Properties: Ipv6CidrBlock: \u0026#34;::/0\u0026#34; Egress: true # out-bound Protocol: \u0026#34;-1\u0026#34; RuleAction: allow RuleNumber: 101 NetworkAclId: !GetAtt VPC.DefaultNetworkAcl # in-bound aclInHttp: Type: \u0026#34;AWS::EC2::NetworkAclEntry\u0026#34; Properties: CidrBlock: \u0026#34;0.0.0.0/0\u0026#34; Egress: false # in-bound Protocol: \u0026#34;6\u0026#34; PortRange: From: 80 To: 80 RuleAction: allow RuleNumber: 200 NetworkAclId: !GetAtt VPC.DefaultNetworkAcl aclInHttp2: Type: \u0026#34;AWS::EC2::NetworkAclEntry\u0026#34; Properties: CidrBlock: \u0026#34;0.0.0.0/0\u0026#34; Egress: false # in-bound Protocol: \u0026#34;6\u0026#34; PortRange: From: 8080 To: 8080 RuleAction: allow RuleNumber: 300 NetworkAclId: !GetAtt VPC.DefaultNetworkAcl aclInHttps: Type: \u0026#34;AWS::EC2::NetworkAclEntry\u0026#34; Properties: CidrBlock: \u0026#34;0.0.0.0/0\u0026#34; Egress: false # in-bound Protocol: \u0026#34;6\u0026#34; PortRange: From: 443 To: 443 RuleAction: allow RuleNumber: 400 NetworkAclId: !GetAtt VPC.DefaultNetworkAcl aclInSSH: Type: \u0026#34;AWS::EC2::NetworkAclEntry\u0026#34; Properties: CidrBlock: \u0026#34;0.0.0.0/0\u0026#34; Egress: false # in-bound Protocol: \u0026#34;6\u0026#34; PortRange: From: 22 To: 22 RuleAction: allow RuleNumber: 500 NetworkAclId: !GetAtt VPC.DefaultNetworkAcl aclInEphemeral: Type: \u0026#34;AWS::EC2::NetworkAclEntry\u0026#34; Properties: CidrBlock: \u0026#34;0.0.0.0/0\u0026#34; Egress: false # in-bound Protocol: \u0026#34;6\u0026#34; PortRange: From: 1024 To: 65535 RuleAction: allow RuleNumber: 600 NetworkAclId: !GetAtt VPC.DefaultNetworkAcl subnetacl1: Type: \u0026#34;AWS::EC2::SubnetNetworkAclAssociation\u0026#34; Properties: NetworkAclId: !GetAtt VPC.DefaultNetworkAcl SubnetId: !Ref subnetA subnetacl2: Type: \u0026#34;AWS::EC2::SubnetNetworkAclAssociation\u0026#34; Properties: NetworkAclId: !GetAtt VPC.DefaultNetworkAcl SubnetId: !Ref subnetC route1: Type: \u0026#34;AWS::EC2::Route\u0026#34; Properties: DestinationCidrBlock: \u0026#34;0.0.0.0/0\u0026#34; RouteTableId: !Ref rtb GatewayId: !Ref igw DependsOn: vpcgwattc dchpassoc1: Type: \u0026#34;AWS::EC2::VPCDHCPOptionsAssociation\u0026#34; Properties: VpcId: !Ref VPC DhcpOptionsId: !Ref DHCPOpt Outputs: VPCId: Value: !Ref VPC Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - VPC-ID VPCCidrBlock: Value: !GetAtt - VPC - CidrBlock Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - VPC-CidrBlockD VPCDefaultNetworkAcl: Value: !GetAtt - VPC - DefaultNetworkAcl Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - VPC-DefaultNetworkAcl VPCDefaultSecurityGroup: Value: !GetAtt - VPC - DefaultSecurityGroup Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - VPC-DefaultSecurityGroup igwId: Value: !Ref igw Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - IGW-ID subnetAId: Value: !Ref subnetA Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - Subnet-apne1a-ID subnetCId: Value: !Ref subnetC Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - Subnet-apne1c-ID subnetAAZ: Value: !GetAtt - subnetA - AvailabilityZone Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - Subnet-apne1a-AvailabilityZone subnetCAZ: Value: !GetAtt - subnetC - AvailabilityZone Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - Subnet-apne1c-AvailabilityZone DHCPOptID: Value: !Ref DHCPOpt Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - DHCPOptions-ID aclId: Value: !GetAtt - VPC - DefaultNetworkAcl Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - ACL-ID rtbId: Value: !Ref rtb Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pramStackNamePrefic - RTB-ID 実行 パラメータ\n$ CF_TAG_KEY=service $ CF_TAG_NAME=sample $ CF_STACK_NAME_PREFIX=sample- $ CF_STACK_NAME=${CF_STACK_NAME_PREFIX}network $ CF_FILE_NAME=cftemplate.yaml $ aws cloudformation \\ create-stack \\ --tags Key=${CF_TAG_KEY},Value=${CF_TAG_NAME} \\ --stack-name ${CF_STACK_NAME} \\ --template-body file://./${CF_FILE_NAME} \\ --parameters \\ ParameterKey=pramStackNamePrefic,ParameterValue=${CF_STACK_NAME_PREFIX} \\ | jq . ちなみに,ACLにはタグがつけられなかったので、強引に、VPC ID取得→ACL ID取得→タグ付けをしてみる。\n$ VpcId=`aws ec2 describe-vpcs \\ \u0026gt; --filters \u0026#34;Name=tag:Name,Values=${CF_STACK_NAME_PREFIX}vpc\u0026#34; \\ \u0026gt; | jq -r \u0026#39;.Vpcs[].VpcId\u0026#39;` $ echo $VpcId vpc-XXXXXXXX $ AclId=`aws ec2 describe-network-acls \\ \u0026gt; --filters \u0026#34;Name=vpc-id,Values=${VpcId}\u0026#34; \\ \u0026gt; | jq -r \u0026#39;.NetworkAcls[].NetworkAclId\u0026#39;` $ echo $AclId acl-XXXXXXXXX $ aws ec2 create-tags --resources ${AclId} \\ --tags Key=Name,Value=${CF_STACK_NAME_PREFIX}acl \\ Key=${CF_TAG_KEY},Value=${CF_TAG_NAME} ACLのデフォルト削除 ACLのインバウンドはデフォルトですべて許可されているので、削除しておくことを推奨\n$ aws ec2 delete-network-acl-entry \\ --network-acl-id ${AclId} \\ --ingress \\ --rule-number 100 ","permalink":"https://techteco.github.io/2018/01/29/cloudformation/","tags":["aws cli","cloudformation","vpc"],"title":"AWS Cloudformationでネットワークの基本設定"},{"categories":["AWS","GO"],"content":"Slackの設定 Incoming WebHooks Incoming WebHooksを使って、Lambdaからメッセージ送信をする。\n詳細は割愛しますが、ドキュメント [Slack API] (https://api.slack.com/incoming-webhooks ) をみると使い方は簡単です。\nSlackの管理画面https://XXXXXXXX.slack.com/apps からIncoming WebHooksの設定を行い、Webhook URLが取得できたら、curlコマンドでテストしてみる。\n$ curl -X POST -H \u0026#39;Content-type: application/json\u0026#39; \\ --data \u0026#39;{\u0026#34;text\u0026#34;:\u0026#34;This is a line of text.\\nAnd this is another one.\u0026#34;}\u0026#39; \\ https://hooks.slack.com/services/000000000/000000000/XXXXXXXXXXXXXXXXXXXXXXXX こんな感じで送信されれば準備OK！\nLambdaの作成 golang Lambdaの環境変数からSlackのWebhook URLを取得する\nmain.go package main import ( \u0026#34;context\u0026#34; \u0026#34;os\u0026#34; slack \u0026#34;./slack\u0026#34; \u0026#34;github.com/aws/aws-lambda-go/lambda\u0026#34; ) func HandleRequest(ctx context.Context) (string, error) { var slackURL = os.Getenv(\u0026#34;slackURL\u0026#34;) // Get Environment Variables sl := slack.NewSlack(slackURL, \u0026#34;This is a line of text.\\nAnd this is another one.\u0026#34;, \u0026#34;user\u0026#34;, \u0026#34;:eyes:\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;#random\u0026#34;) sl.Send() return \u0026#34;\u0026#34;, nil } func main() { lambda.Start(HandleRequest) } ./slack/slack.go package slack import ( \u0026#34;encoding/json\u0026#34; \u0026#34;log\u0026#34; \u0026#34;net/http\u0026#34; \u0026#34;net/url\u0026#34; ) type slack struct { params params url string } type params struct { Text string `json:\u0026#34;text\u0026#34;` Username string `json:\u0026#34;username\u0026#34;` IconEmoji string `json:\u0026#34;icon_emoji\u0026#34;` IconURL string `json:\u0026#34;icon_url\u0026#34;` Channel string `json:\u0026#34;channel\u0026#34;` } func NewSlack(url string, text string, username string, iconEmoji string, iconURL string, channel string) *slack { p := params{ Text: text, Username: username, IconEmoji: iconEmoji, IconURL: iconURL, Channel: channel} return \u0026amp;slack{ params: p, url: url} } func (s *slack) Send() { params, _ := json.Marshal(s.params) resp, err := http.PostForm( s.url, url.Values{\u0026#34;payload\u0026#34;: {string(params)}}, ) if err != nil { log.Print(err) return } defer resp.Body.Close() } 待望のAWS LambdaのGolang対応！ を参考に、コンパイルする。\nコンパイル Linux用のコンパイルなのでGOOS=linuxを指定します。\n$ GOOS=linux go build -o main ファイル圧縮 Lambdaにアップロードするためにzipで圧縮する\n$ zip main.zip main SAM AWS SAMを使ってみる を参考に、SAMのテンプレートを作成。\nLambdaのEvent実行の定義、SlackのWebhook URLの環境変数への登録を追加\nlambda-go-slack.yaml AWSTemplateFormatVersion : \u0026#39;2010-09-09\u0026#39; Transform: AWS::Serverless-2016-10-31 Description: lambda go send to slack. Resources: SendSlack: Type: AWS::Serverless::Function Properties: Handler: main Runtime: go1.x CodeUri: \u0026#34;main.zip\u0026#34; # CloudWatch Event設定（毎分起動） Events: Timer: Type: Schedule Properties: Schedule: cron(* * * * ? *) # 環境変数 Environment: Variables: slackURL: https://hooks.slack.com/services/000000000/000000000/XXXXXXXXXXXXXXXXXXXXXXXX デプロイ $ aws cloudformation package \\ --template-file ./lambda-go-slack.yaml \\ --s3-bucket techteco.sample.bucket \\ --s3-prefix lambda-go-sample \\ --output-template-file packaged-template.yaml $ aws cloudformation deploy \\ --template-file packaged-template.yaml \\ --stack-name sampleLambdaGoSlack \\ --capabilities CAPABILITY_IAM 結果 デプロイが完了すると毎分Slackにが通知が来てることを確認\n","permalink":"https://techteco.github.io/2018/01/28/lambda-go-slack/","tags":["Lambda","slack"],"title":"LambdaのGolangでSlackにメッセージを送る"},{"categories":["AWS","GO"],"content":"AWS SAMとは Github : AWS Serverless Application Model (AWS SAM) The goal of AWS SAM is to define a standard application model for serverless applications. This GitHub project is the starting point for AWS SAM, and contains general information, information about the model, and examples of common applications.\n日本語訳\nAWS SAMの目標は、サーバレスアプリケーション用の標準アプリケーションモデルを定義することです。このGitHubプロジェクトは、AWS SAMの出発点であり、一般的な情報、モデルに関する情報、一般的なアプリケーションの例を含んでいます。\nAWS::Serverless 変換 ここを見る限りだと、\nAWS SAMはCloudformationの拡張で、最終的にはCloudformationのテンプレートに展開されるイメージ。\nやること 基本的には、待望のAWS LambdaのGolang対応！ ここでやったことの、コンソールでの作業をコマンドベースでやろう！ということです。\nサンプル Githubにサンプルがあるので、一番シンプルなhello_world を参考にしてみる。\nテンプレート lambda-go.yaml AWSTemplateFormatVersion : \u0026#39;2010-09-09\u0026#39; Transform: AWS::Serverless-2016-10-31 Description: lambda go sample application. Resources: HelloWorldFunction: Type: AWS::Serverless::Function Properties: Handler: main Runtime: go1.x CodeUri: \u0026#34;./../../lambda-go-sample/main.zip\u0026#34; package \u0026amp; deploy Reference : cloudformation package ここでは、\nS3のバケットはAWS CloudformationをAWS CLIから使ってみる でサンプルで作成済のバケットを使用します。※基本的になんでも良いと思います。\n$ aws cloudformation package \\ --template-file ./lambda-go.yaml \\ --s3-bucket techteco.sample.bucket \\ --s3-prefix lambda-go-sample \\ --output-template-file packaged-template.yaml ここまでで、S3にpackageがアップロードされています。\n出力されたpackaged-template.yamlをつかってdeploy\nちなみに、出力内容はこちら\nAWSTemplateFormatVersion: \u0026#39;2010-09-09\u0026#39; Description: lambda go sample application. Resources: HelloWorldFunction: Properties: CodeUri: s3://techteco.sample.bucket/lambda-go-sample/737fd29b764003ecb0a9c10ee290bfd9 Handler: main Runtime: go1.x Type: AWS::Serverless::Function Transform: AWS::Serverless-2016-10-31 Reference : cloudformation deploy $ aws cloudformation deploy \\ --template-file packaged-template.yaml \\ --stack-name sampleSamLambdaGo \\ --capabilities CAPABILITY_IAM 動作確認 まずは、Cloudformationのstackの中身\n$ aws cloudformation describe-stack-resources \\ --stack-name sampleSamLambdaGo \\ | jq . { \u0026#34;StackResources\u0026#34;: [ { \u0026#34;StackName\u0026#34;: \u0026#34;sampleSamLambdaGo\u0026#34;, \u0026#34;StackId\u0026#34;: \u0026#34;arn:aws:cloudformation:ap-northeast-1:123456789012:stack/sampleSamLambdaGo/28efadc0-088c-11e8-b769-50a68a175a82\u0026#34;, \u0026#34;LogicalResourceId\u0026#34;: \u0026#34;HelloWorldFunction\u0026#34;, \u0026#34;PhysicalResourceId\u0026#34;: \u0026#34;sampleSamLambdaGo-HelloWorldFunction-YAWCC305TVCA\u0026#34;, \u0026#34;ResourceType\u0026#34;: \u0026#34;AWS::Lambda::Function\u0026#34;, \u0026#34;Timestamp\u0026#34;: \u0026#34;2018-02-03T02:46:15.113Z\u0026#34;, \u0026#34;ResourceStatus\u0026#34;: \u0026#34;CREATE_COMPLETE\u0026#34; }, { \u0026#34;StackName\u0026#34;: \u0026#34;sampleSamLambdaGo\u0026#34;, \u0026#34;StackId\u0026#34;: \u0026#34;arn:aws:cloudformation:ap-northeast-1:123456789012:stack/sampleSamLambdaGo/28efadc0-088c-11e8-b769-50a68a175a82\u0026#34;, \u0026#34;LogicalResourceId\u0026#34;: \u0026#34;HelloWorldFunctionRole\u0026#34;, \u0026#34;PhysicalResourceId\u0026#34;: \u0026#34;sampleSamLambdaGo-HelloWorldFunctionRole-1HGTSQ58UEK91\u0026#34;, \u0026#34;ResourceType\u0026#34;: \u0026#34;AWS::IAM::Role\u0026#34;, \u0026#34;Timestamp\u0026#34;: \u0026#34;2018-02-03T02:46:09.876Z\u0026#34;, \u0026#34;ResourceStatus\u0026#34;: \u0026#34;CREATE_COMPLETE\u0026#34; } ] } 正しく実行されればOK!\n$ aws lambda invoke \\ --invocation-type Event \\ --function-name sampleSamLambdaGo-HelloWorldFunction-YAWCC305TVCA \\ --payload \u0026#39;{\u0026#34;name\u0026#34;: \u0026#34;テスト太郎\u0026#34;}\u0026#39; \\ outputfile.txt ","permalink":"https://techteco.github.io/2018/01/27/lambda-go-sample-sam/","tags":["Lambda","sam","aws cli","cloudformation"],"title":"AWS SAMを使ってみる"},{"categories":["AWS"],"content":"AWS KMSとは AWS Key Management Service とは AWS Key Management Service (AWS KMS) は、データの暗号化に使用される暗号化キーの作成と管理を容易にするマネージド型サービスです。AWS KMS は、Amazon Elastic Block Store (Amazon EBS)、Amazon Simple Storage Service (Amazon S3)、Amazon Redshift、Amazon Elastic Transcoder、Amazon WorkMail、Amazon Relational Database Service (Amazon RDS) などの他の AWS サービスと統合されており、ユーザーが管理する暗号化キーでのデータの暗号化を簡単にします。また AWS KMS は AWS CloudTrail とも統合されており、キーの使用ログを表示できるため、監査、規制、およびコンプライアンスの要求に応えるために役立ちます。\nCloudformationでCMKを作成 CSK作成 AWS Key Management Service (AWS KMS) でカスタマーマスターキー (CMK) を作成します。\nAWS::KMS::Key 定義ファイル key.yaml AWSTemplateFormatVersion: \u0026#34;2010-09-09\u0026#34; Description: \u0026#34;Cloudformation Sample : Create Sample KMS Key\u0026#34; Parameters: pTagKey: Type: String pTagValue: Type: String Resources: SampleKey: Type: \u0026#34;AWS::KMS::Key\u0026#34; Properties: Description: \u0026#34;A sample key\u0026#34; KeyPolicy: Version: \u0026#34;2012-10-17\u0026#34; Id: \u0026#34;key-default-1\u0026#34; Statement: - Sid: Enable IAM User Permissions Effect: Allow Principal: AWS: !Join - \u0026#39;\u0026#39; - - \u0026#39;arn:aws:iam::\u0026#39; - !Ref \u0026#39;AWS::AccountId\u0026#39; - \u0026#39;:root\u0026#39; Action: \u0026#39;kms:*\u0026#39; Resource: \u0026#39;*\u0026#39; Tags: - Key: !Ref pTagKey Value: !Ref pTagValue Outputs: SampleKey: Value: !Ref SampleKey Export: Name: SampleKey Cloudformationの実行 $ CF_TAG_KEY=service $ CF_TAG_NAME=sample $ CF_STACK_NAME=sampleKMSKey $ aws cloudformation create-stack \\ --tags Key=${CF_TAG_KEY},Value=${CF_TAG_NAME} \\ --stack-name ${CF_STACK_NAME} \\ --template-body file:///$PWD/key.yaml \\ --parameters \\ ParameterKey=pTagKey,ParameterValue=${CF_TAG_KEY} \\ ParameterKey=pTagValue,ParameterValue=${CF_TAG_NAME} \\ | jq . CSKのAliasを作成 AWS Key Management Service (AWS KMS) でカスタマーマスターキー (CMK) の表示名を作成します。\nAWS::KMS::Alias 定義ファイル alias.yaml AWSTemplateFormatVersion: \u0026#34;2010-09-09\u0026#34; Description: \u0026#34;Cloudformation Sample : Create Sample KMS Key Alias\u0026#34; Resources: SampleKeyAlias: Type: AWS::KMS::Alias Properties: AliasName: alias/SampleKeyAlias TargetKeyId: !ImportValue SampleKeyARN Cloudformationの実行 $ CF_TAG_KEY=service $ CF_TAG_NAME=sample $ CF_STACK_NAME=sampleKMSKeyAlias $ aws cloudformation create-stack \\ --tags Key=${CF_TAG_KEY},Value=${CF_TAG_NAME} \\ --stack-name ${CF_STACK_NAME} \\ --template-body file:///$PWD/alias.yaml \\ | jq . 作成されたCSKの確認 AWS CLIで確認\nAWS CLI KMS $ aws kms list-keys { \u0026#34;Keys\u0026#34;: [ { \u0026#34;KeyId\u0026#34;: \u0026#34;XXXXXXXX-XXXX-XXXX-XXXXXXXXXXXXXXXXX\u0026#34;, \u0026#34;KeyArn\u0026#34;: \u0026#34;arn:aws:kms:ap-northeast-1:123456789012:key/XXXXXXXX-XXXX-XXXX-XXXXXXXXXXXXXXXXX\u0026#34; } ] } alias（SampleKeyAlias）で検索\n$ aws kms list-aliases | jq \u0026#39;.Aliases[] | select( .AliasName | test(\u0026#34;SampleKeyAlias\u0026#34;))\u0026#39; { \u0026#34;AliasName\u0026#34;: \u0026#34;alias/SampleKeyAlias\u0026#34;, \u0026#34;AliasArn\u0026#34;: \u0026#34;arn:aws:kms:ap-northeast-1:123456789012:alias/SampleKeyAlias\u0026#34;, \u0026#34;TargetKeyId\u0026#34;: \u0026#34;XXXXXXXX-XXXX-XXXX-XXXXXXXXXXXXXXXXX\u0026#34; } 暗号化(encrypt) AWS CLI KMS encrypt ここでは、aliasを使って暗号化します。\n$ aws kms encrypt \\ --key-id alias/SampleKeyAlias \\ --plaintext \u0026#34;I am seacret word\u0026#34; 出力\n{ \u0026#34;CiphertextBlob\u0026#34;: \u0026#34;AQICAHgiNRl\u0026#43;XlUIXRhw4\u0026#43;tLNMNgYcJYxkGHTirG5cXZvdUbxwHwVFktPdlZsI7tifaHUVk2AAAAbzBtBgkqhkiG9w0BBwagYDBeAgEAMFkGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMwmujQIyOGHFjqkyJAgEQgCyWHiZUyquUAVWYOOwE0d2X\u0026#43;Ij99UJatuYxTUSaWvrjQcnTnjhUHuMKTPXAbw==\u0026#34;, \u0026#34;KeyId\u0026#34;: \u0026#34;arn:aws:kms:ap-northeast-1:123456789012:key/XXXXXXXX-XXXX-XXXX-XXXXXXXXXXXXXXXXX\u0026#34; } CiphertextBlobが、\u0026ldquo;I am seacret word\u0026quot;を暗号化してbase64でエンコードしたもののようです。\nマニュアルの使い方の例としては、CiphertextBlobをbase64でデコードしたものバイナリをファイルに保存するようです。\n$ aws kms encrypt \\ --key-id alias/SampleKeyAlias \\ --plaintext \u0026#34;I am seacret word\u0026#34; \\ --output text \\ --query CiphertextBlob \\ | base64 --decode \u0026gt; ExampleEncryptedFile 複合化(decrypt) 次にExampleEncryptedFileの中身を復号化して取り出してみましょう。\nAWS CLI KMS decrypt まずは、複合だけしてみる。\n$ aws kms decrypt \\ --ciphertext-blob fileb://ExampleEncryptedFile { \u0026#34;KeyId\u0026#34;: \u0026#34;arn:aws:kms:ap-northeast-1:123456789012:key/XXXXXXXX-XXXX-XXXX-XXXXXXXXXXXXXXXXX\u0026#34;, \u0026#34;Plaintext\u0026#34;: \u0026#34;SSBhbSBzZWFjcmV0IHdvcmQ=\u0026#34; } ファイルの中にKeyIdが含まれているので指定しなくても問題ないようですね。\n取り出します。\n$ aws kms decrypt \\ --ciphertext-blob fileb://ExampleEncryptedFile \\ --output text \\ --query Plaintext \\ | base64 --decode \u0026gt; ExamplePlaintextFile $ cat ExamplePlaintextFile I am seacret word 問題なくとりだせました。\nまとめ ソースコードにAPIのKEY等を埋め込めないことがほとんどなので、KMSつかってセキュアに扱いましょう。\n使い方も慣れれば簡単ですね。次は、Lambdaでの使い方を整理していきます。\n","permalink":"https://techteco.github.io/2018/01/26/kms/","tags":["aws cli","cloudformation","kms"],"title":"AWS KMSの使い方"},{"categories":["AWS"],"content":"公式ドキュメント AWS CLI Command Reference cloudformation 基本的な使い方 事前準備 実行パス設定 $ CF_PATH=file://~/cfsample AWS CLIのprofileを指定（複数設定している場合） 必要に応じて、AWS CLIのprofileを指定\n確認方法は、\ncat ~/.aws/credentials cat ~/.aws/config 必要に応じて設定する\nexport AWS_DEFAULT_PROFILE=XXXXX 共通項目の設定 ここでは、\nserviceというタグにsampleと設定する 共通のprefixとして**cfsample-**をつける $ CF_TAG_KEY=service $ CF_TAG_NAME=sample $ CF_STACK_NAME_PREFIX=cfsample- サンプル サンプルとして、S3にsampleのbucketを作成してみる\nS3.yaml\nAWSTemplateFormatVersion: \u0026#34;2010-09-09\u0026#34; Description: \u0026#34;Cloudformation Sample : Create Sample S3 Bucket\u0026#34; Parameters: pStackNamePrefic: Description: \u0026#34;Common stack name prefix\u0026#34; Type: String Default: \u0026#34;\u0026#34; pBucketName: Description: \u0026#34;Bucket Name\u0026#34; Type: String Resources: Bucket: Type: \u0026#34;AWS::S3::Bucket\u0026#34; DeletionPolicy: Retain Properties: BucketName: !Ref pBucketName AccessControl: Private VersioningConfiguration: Status: Suspended Tags: - Key: Name Value: !Ref pBucketName BucketPolicy: Type: \u0026#34;AWS::S3::BucketPolicy\u0026#34; Properties: Bucket: !Ref Bucket PolicyDocument: Version: \u0026#34;2012-10-17\u0026#34; Id: BucketPolicy Statement: - Sid: 1 Action: \u0026#34;s3:PutObject\u0026#34; Effect: Allow Resource: !Sub - arn:aws:s3:::${sb}/* - { sb: !Ref Bucket } Principal: AWS: !Join - \u0026#34;\u0026#34; - - \u0026#34;arn:aws:iam::\u0026#34; - !Ref AWS::AccountId - \u0026#34;:root\u0026#34; Outputs: BucketName: Value: !Ref Bucket Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pStackNamePrefic - BucketName BucketDomainName: Value: !GetAtt - Bucket - DomainName Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pStackNamePrefic - BucketDomainName BucketWebsiteURL: Value: !GetAtt - Bucket - WebsiteURL Export: Name: !Join - \u0026#34;\u0026#34; - - !Ref pStackNamePrefic - BucketWebsiteURL テンプレートをAWS Cloudformation Designer で確認する。\nこんな感じです。\n作成(create-stack) Reference : create-stack CloudFormationのStackの名前（CF_STACK_NAME） 定義ファイル指定（CF_FILE_NAME） パラメータ指定（定義ファイル内で仕様） pStackNamePrefic pBucketName $ CF_STACK_NAME=SampleBucket $ CF_FILE_NAME=S3.yaml $ aws cloudformation create-stack \\ --tags Key=${CF_TAG_KEY},Value=${CF_TAG_NAME} \\ --stack-name ${CF_STACK_NAME} \\ --template-body ${CF_PATH}/${CF_FILE_NAME} \\ --parameters \\ ParameterKey=pStackNamePrefic,ParameterValue=${CF_STACK_NAME_PREFIX} \\ ParameterKey=pBucketName,ParameterValue=\u0026#34;techteco.sample.bucket\u0026#34; \\ | jq . 結果\n{ \u0026#34;StackId\u0026#34;: \u0026#34;arn:aws:cloudformation:ap-northeast-1:XXXXXXXXXXXXXXX:stack/sampleBucket/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\u0026#34; } 一覧表示(list-stacks) Reference : list-stacks $ aws cloudformation list-stacks \\ --region ap-northeast-1 \\ --stack-status-filter CREATE_COMPLETE \\ | jq -r .StackSummaries[].StackName 結果 sampleBucket 表示(describe-stacks) Reference : describe-stacks $ aws cloudformation describe-stacks \\ --stack-name ${CF_STACK_NAME} \\ | jq . 結果 { \u0026#34;Stacks\u0026#34;: [ { \u0026#34;StackId\u0026#34;: \u0026#34;arn:aws:cloudformation:ap-northeast-1:XXXXXXXXXXXXXX:stack/sampleBucket/XXXXXXXXXXXXXXXXXXXXXXXXXX\u0026#34;, \u0026#34;StackName\u0026#34;: \u0026#34;sampleBucket\u0026#34;, \u0026#34;Description\u0026#34;: \u0026#34;Cloudformation Sample : Create Sample S3 Bucket\u0026#34;, \u0026#34;Parameters\u0026#34;: [ { \u0026#34;ParameterKey\u0026#34;: \u0026#34;pStackNamePrefic\u0026#34;, \u0026#34;ParameterValue\u0026#34;: \u0026#34;cfsample-\u0026#34; }, { \u0026#34;ParameterKey\u0026#34;: \u0026#34;pBucketName\u0026#34;, \u0026#34;ParameterValue\u0026#34;: \u0026#34;techteco.sample.bucket\u0026#34; } ], \u0026#34;CreationTime\u0026#34;: \u0026#34;2018-02-01T14:53:26.062Z\u0026#34;, \u0026#34;RollbackConfiguration\u0026#34;: {}, \u0026#34;StackStatus\u0026#34;: \u0026#34;CREATE_COMPLETE\u0026#34;, \u0026#34;DisableRollback\u0026#34;: false, \u0026#34;NotificationARNs\u0026#34;: [], \u0026#34;Outputs\u0026#34;: [ { \u0026#34;OutputKey\u0026#34;: \u0026#34;BucketName\u0026#34;, \u0026#34;OutputValue\u0026#34;: \u0026#34;techteco.sample.bucket\u0026#34;, \u0026#34;ExportName\u0026#34;: \u0026#34;cfsample-BucketName\u0026#34; }, { \u0026#34;OutputKey\u0026#34;: \u0026#34;BucketDomainName\u0026#34;, \u0026#34;OutputValue\u0026#34;: \u0026#34;techteco.sample.bucket.s3.amazonaws.com\u0026#34;, \u0026#34;ExportName\u0026#34;: \u0026#34;cfsample-BucketDomainName\u0026#34; }, { \u0026#34;OutputKey\u0026#34;: \u0026#34;BucketWebsiteURL\u0026#34;, \u0026#34;OutputValue\u0026#34;: \u0026#34;http://techteco.sample.bucket.s3-website-ap-northeast-1.amazonaws.com\u0026#34;, \u0026#34;ExportName\u0026#34;: \u0026#34;cfsample-BucketWebsiteURL\u0026#34; } ], \u0026#34;Tags\u0026#34;: [ { \u0026#34;Key\u0026#34;: \u0026#34;service\u0026#34;, \u0026#34;Value\u0026#34;: \u0026#34;sample\u0026#34; } ], \u0026#34;EnableTerminationProtection\u0026#34;: false } ] } その他 全部は確認しきれてませんが、AWSのコンソールから出来ることの多くは実現できそうです。\n","permalink":"https://techteco.github.io/2018/01/25/cloudformation/","tags":["aws cli","cloudformation"],"title":"AWS CloudformationをAWS CLIから使ってみる"},{"categories":["AWS","GO"],"content":"公式ドキュメント Announcing Go Support for AWS Lambda Programming Model for Authoring Lambda Functions in Go サンプル Lambda Function Handler (Go) を読んで、サンプルを動かしてみる\n前提 実行環境 $ go version go version go1.9.3 darwin/amd64 サンプルコード 適当なディレクトリを作成して、main.goという名前でサンプルをそのまま貼り付ける。\n$ mkdir lambda-go-sample $ cd lambda-go-sample/ main.go package main import ( \u0026#34;context\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;github.com/aws/aws-lambda-go/lambda\u0026#34; ) type MyEvent struct { Name string `json:\u0026#34;name\u0026#34;` } func HandleRequest(ctx context.Context, name MyEvent) (string, error) { return fmt.Sprintf(\u0026#34;Hello %s!\u0026#34;, name.Name), nil } func main() { lambda.Start(HandleRequest) } パッケージのダウンロード LambdaでGolangを動かすためにgithub.com/aws/aws-lambda-go/lambdaが必要のようですね。\ngo get します。\n$ go get github.com/aws/aws-lambda-go/lambda コンパイル Linux用のコンパイルなのでGOOS=linuxを指定します。\n$ GOOS=linux go build -o main ファイル圧縮 Lambdaにアップロードするためにzipで圧縮する\n$ zip main.zip main Function作成 名前：lambda-go-sample ランタイム:Go 1.x ロール：lambda_basic_excution（動かすだけなので） ファイルアップロード さきほど作ったzipファイルを指定する ハンドラをmainに変える（キャプチャ取ったあとに気づいた。。） 右上の保存ボタンを押してアップロード テストイベント設定 こんな内容のjson形式を指定してあげます。\n{ \u0026#34;name\u0026#34;: \u0026#34;テスト太郎\u0026#34; } 右下の作成ボタンを押す。\nテスト実行 右上のテストボタンを押すと、緑枠の実行結果が表示されます。\n\u0026quot;Hello テスト太郎!\u0026quot;が出てますね。\n最後に 個人的にはGolang好きなので、色々やってみたい。\n","permalink":"https://techteco.github.io/2018/01/24/lambda-go-sample/","tags":["Lambda"],"title":"待望のAWS LambdaのGolang対応！"},{"categories":["GO"],"content":"GVMとは GVM(Github) Go Version Managerの頭文字をとってGVM\n一言で言うと\nGVM provides an interface to manage Go versions.\n日本語に直訳すると\nGVMは、Goバージョンを管理するためのインタフェースを提供します。\nインストール AnsibleでMacの開発環境を構築する でも、gvmのインストールはされていますが、コマンドでも一発でインストール可能です。\nbash \u0026lt; \u0026lt;(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer) $ gvm version -bash: gvm: command not found おっと、パスが通ってませんでした。。。\n$ source ~/.gvm/scripts/gvm $ gvm version Go Version Manager v1.0.22 installed at /Users/XXXXX/.gvm 使い方 gvm list インストール済のGoのバージョン一覧を表示 $ gvm list gvm gos (installed) go1.4 go1.7.6 go1.8.3 =\u0026gt; go1.9.3 system バージョンを表示してみると $ go version go version go1.9.3 darwin/amd64 gvm listall GVMでインストール可能なGoのバージョン一覧を表示 $ gvm listall gvm gos (available) go1 go1.0.1 go1.0.2 go1.0.3 go1.1 go1.1.1 go1.1.2 go1.10beta1 go1.10beta2 go1.10rc1 go1.1rc2 go1.1rc3 go1.2 go1.2.1 go1.2.2 go1.2rc2 go1.2rc3 go1.2rc4 go1.2rc5 go1.3 go1.3.1 go1.3.2 go1.3.3 go1.3beta1 go1.3beta2 go1.3rc1 go1.3rc2 go1.4 go1.4.1 go1.4.2 go1.4.3 go1.4beta1 go1.4rc1 go1.4rc2 go1.5 go1.5.1 go1.5.2 go1.5.3 go1.5.4 go1.5beta1 go1.5beta2 go1.5beta3 go1.5rc1 go1.6 go1.6.1 go1.6.2 go1.6.3 go1.6.4 go1.6beta1 go1.6beta2 go1.6rc1 go1.6rc2 go1.7 go1.7.1 go1.7.2 go1.7.3 go1.7.4 go1.7.5 go1.7.6 go1.7beta1 go1.7beta2 go1.7rc1 go1.7rc2 go1.7rc3 go1.7rc4 go1.7rc5 go1.7rc6 go1.8 go1.8.1 go1.8.2 go1.8.3 go1.8.4 go1.8.5 go1.8.5rc4 go1.8.5rc5 go1.8.6 go1.8beta1 go1.8beta2 go1.8rc1 go1.8rc2 go1.8rc3 go1.9 go1.9.1 go1.9.2 go1.9.3 go1.9beta1 go1.9beta2 go1.9rc1 go1.9rc2 release.r56 release.r57 release.r57.1 release.r57.2 release.r58 release.r58.1 release.r58.2 release.r59 release.r60 release.r60.1 release.r60.2 release.r60.3 gvm install gvmでバージョン指定してGoをイントールする\n試しに、go1.9.2をインストールしてみる\n$ gvm install go1.9.2 Installing go1.9.2... * Compiling... go1.9.2 successfully installed! $ gvm list gvm gos (installed) go1.4 go1.7.6 go1.8.3 go1.9.2 # 追加されている =\u0026gt; go1.9.3 system gvm use gvmで利用するGoのバージョンを変更する\n$ gvm use go1.8.3 Now using version go1.8.3 $ go version go version go1.8.3 darwin/amd64 $ gvm list gvm gos (installed) go1.4 go1.7.6 =\u0026gt; go1.8.3 go1.9.2 go1.9.3 system 最後に 使い方はとても簡単ですね。\nそこまでバージョン切り替えて使うシーンがどこまであるかわかりませんが、Golangで開発するなら導入しておいて損はないと思います。\n","permalink":"https://techteco.github.io/2018/01/23/golang-gvm/","tags":["gvm"],"title":"Golangのバージョン管理GVM(Go Version Manager)の使い方"},{"categories":["Server","Server"],"content":"※2018年12月12日更新\n定期的にmacのお掃除をしたくなるんですが、クリーンインストールして０から環境構築したいものです。\nそれ以外にも、PCの新規購入や買い替え、職場のPCが変わったりと、０から開発環境を構築する場面は多々あります。\nしかしながら、この環境構築、やることが盛り沢山で大変です。\nしかも頻繁にやる作業でもないので結構忘れてしまって、毎回調べながらやってる気がします。\nいざ環境構築が終わって開発していると、あれインストールしてないや、あの設定どうだったっけ？\nみたいなことは、あるあるですよね。\nそこで、今後のことも考えて、macの環境構築をAnsibleを使って自動化（60〜70%くらい）したいと思います。\n前提 Ansibleの基本的な知識があること\n※参考サイトAnsible Documentation(official) 実行環境 $ sw_vers ProductName:\tMac OS X ProductVersion:\t10.14.1 BuildVersion:\t18B75 手順 Macのクリーンインストール（ここでは省略） ※参考サイトmacOS を消去して再インストールする Homebrewのインストール Homebrew公式 $ /usr/bin/ruby -e \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\u0026#34; $ brew -v Homebrew 1.8.5 MacにAnsibleをインストール ここでは、brewコマンドを使ってAnsibleをインストール\n$ brew install ansible $ ansible --version ansible 2.7.4 ファイル構成 tree コマンドで表示するとこんな感じです。 Ansible利用したことある方なら特に違和感ないと思います。\n$ tree . ├── README.md ├── localhost ├── roles │ ├── awscli │ │ ├── tasks │ │ │ └── main.yml │ │ └── vars │ │ └── main.yml │ ├── fonts │ │ └── tasks │ │ └── main.yml │ ├── golang │ │ ├── tasks │ │ │ ├── install.yml │ │ │ └── main.yml │ │ └── vars │ │ └── main.yml │ ├── homebrew │ │ ├── tasks │ │ │ └── main.yml │ │ └── vars │ │ └── main.yml │ ├── homebrew_cask │ │ ├── tasks │ │ │ └── main.yml │ │ └── vars │ │ └── main.yml │ ├── macos │ │ ├── tasks │ │ │ └── main.yml │ │ ├── templates │ │ └── vars │ │ └── main.yml │ ├── mas │ │ ├── tasks │ │ │ └── main.yml │ │ └── vars │ │ └── main.yml │ ├── node │ │ ├── tasks │ │ │ ├── install.yml │ │ │ └── main.yml │ │ └── vars │ │ └── main.yml │ ├── pip │ │ ├── tasks │ │ │ └── main.yml │ │ └── vars │ │ └── main.yml │ ├── ssh │ │ ├── tasks │ │ │ └── main.yml │ │ ├── templates │ │ └── vars │ │ └── main.yml │ ├── vsc │ │ ├── tasks │ │ │ └── main.yml │ │ ├── templates │ │ │ └── settings.json │ │ └── vars │ │ └── main.yml │ ├── xcode │ │ └── tasks │ │ └── main.yml │ └── yarn │ ├── tasks │ │ └── main.yml │ └── vars │ └── main.yml ├── site.retry └── site.yml 各ファイルの説明 site.yml このファイルの内容、特にrolesを見る何を実行してるかわかるかと思います。実行不要なものは、rolesの各行をコメントアウトすれば実行されません。 Ansibleなので実行時のtag指定などで臨機応変に対応可能です。\n--- # file: site.yml # --------------- # localhost # --------------- - hosts: localhost connection: local gather_facts: yes roles: - homebrew - homebrew_cask - mas - macos # - awscli - xcode - fonts - vsc - golang - node - pip - yarn roles/homebrew Ansible公式　homebrew - Package manager for Homebrew Homebrew Taps (third-party repositories) homebrewで必要なパッケージをインストールします。 ※homebrew tapでは必要なリポジトリを追加しています。\n--- # file: ./homebrew/tasks/main.yml - block: - name: homebrew update homebrew: update_homebrew: true upgrade_all: yes - name: homebrew tap homebrew_tap: name: \u0026#34;{{ item }}\u0026#34; state: present with_items: \u0026#34;{{ taps }}\u0026#34; - name: homebrew packages install homebrew: name: \u0026#34;{{ item.name }}\u0026#34; state: \u0026#34;{{ item.state | default(\u0026#39;present\u0026#39;) }}\u0026#34; with_items: \u0026#34;{{ packages }}\u0026#34; tags: - homebrew 設定ファイルに必要なパッケージを追加していくだけです。\n--- # file: ./homebrew/vars/main.yml taps: - homebrew/boneyard - homebrew/cask - homebrew/cask-versions - homebrew/core packages: - { name: ansible, state: present } - { name: awscli, state: present } - { name: git, state: present } - { name: hugo, state: present } - { name: jq, state: present } - { name: mercurial, state: present } - { name: mas, state: present } # mas-cli(mac apple store) - { name: tree, state: present } - { name: sassc, state: present } - { name: nkf, state: present } - { name: fontconfig, state: present } # for fc-cache - { name: node, state: present } - { name: nodebrew, state: present } - { name: yarn, state: present } - { name: brotli, state: present } - { name: mozjpeg, state: present } - { name: maven, state: present } roles/homebrew_cask Ansible公式　homebrew_cask - Install/uninstall homebrew casks. MacのGUIのアプリケーションをインストールします。\n--- # file: ./homebrew_cask/tasks/main.yml - block: - name: homebrew cask packages install \u0026#39;item.name\u0026#39; environment: HOMEBREW_CASK_OPTS: --appdir=/Applications homebrew_cask: name: \u0026#34;{{ item.name }}\u0026#34; state: \u0026#34;{{ item.state | default(\u0026#39;present\u0026#39;) }}\u0026#34; with_items: \u0026#34;{{ packages }}\u0026#34; tags: - homebrew_cask 設定ファイルに必要なパッケージを追加していくだけです。\nパッケージを検索するには、下記コマンドです。\n$ brew search --- # file: ./homebrew_cask/vars/main.yml packages: - { name: avira-antivirus, state: present } - { name: google-chrome, state: present } - { name: firefox, state: present } - { name: google-japanese-ime, state: present } - { name: dropbox, state: present } - { name: slack, state: present } - { name: skype, state: present } - { name: visual-studio-code, state: present } - { name: iterm2, state: present } - { name: sourcetree, state: present } - { name: docker, state: present } - { name: postico, state: present } - { name: java8, state: present } roles/mas Github mas-cli A simple command line interface for the Mac App Store. Designed for scripting and automation.\nMac App Store用の簡単なコマンドラインインターフェイス。スクリプティングと自動化のために設計されています。\n使い方は上のGithubのページに詳しく記載されています。\n--- # file: ./mas/tasks/main.yml - block: - name: mas is installed shell: brew list register: mas_brew_list changed_when: False check_mode: no - block: - name: mas get installed list shell: mas list register: mas_installed_list changed_when: False check_mode: no - name: mas install items shell: \u0026#34;mas install {{ item.id }}\u0026#34; when: \u0026#39;\u0026#34;item.id\u0026#34; not in mas_installed_list.stdout\u0026#39; with_items: \u0026#34;{{ packages }}\u0026#34; when: \u0026#39;\u0026#34;mas\u0026#34; in mas_brew_list.stdout_lines\u0026#39; tags: - mas 設定ファイルに必要なパッケージを追加していくだけです。\nアプリIDの調べ方（例:Xcode） $ mas search Xcode 497799835 Xcode (10.1) 1163893338 App School for Xcode and iOS 10 Development Free (1.0) 1183412116 Swiftify for Xcode (4.5) 1179007212 Code School for Xcode Free -Learn How to Make Apps (1.1.3) 1083165894 Course for Xcode 7 Lite (1.0) 1168397789 Alignment for Xcode (1.1.1) 734258109 Watchdog for Xcode (1.9) 1246672247 BlockComment for Xcode (1.0.0) 665134234 Training for Xcode (1.3) 830464758 IDAssetManager Lite for Xcode (1.13) 1179234554 TabifyIndents for Xcode (1.0.1) 1187815194 Comments for Xcode (0.1.0) 1168548047 EnumHelper for Xcode (1.0.0) 1218781096 LanguageTranslator for Xcode (1.0.1) 1212245111 Protocol for Xcode (0.1.0) 1214720236 Pastery for Xcode (1.2) 451202534 Project Analyzer for Xcode 4 (1.3) 1377998565 Comment Wrapper for Xcode (1.0) 1218784832 NamingTranslator for Xcode (1.0.1) 1153372713 App School for Xcode and iOS 10 Development (1.2) 1076826166 Lessons for Xcode 7 (1.0) 650764572 Project Statistics for Xcode (2.0.2) 1159371870 Code School for Xcode PRO - Learn Coding for iOS (1.1.2) 1360667102 Character Commands for Xcode (1.1) 660835555 App Academy: Xcode Edition (1.3) 1040160984 Swiftly-Clean for Xcode and Swift (2.0) 949142405 AppIcon Maker for Xcode (2.0) 882416115 Templates SourceCode for Xcode (1.0) 884971675 Templates Apps For Xcode (1.0) 1396408074 PrettyJSON for Xcode (1.3) 1053790590 AssetsGenerator for Xcode (1.5.0) 1185330099 Tutorial for Xcode and Swift Programming Language (1.0) 1004753760 iConeer - iconset and asset creator for Xcode (1.2) 552799390 Iconset for Xcode (1.3.3) 1296084683 Cleaner for Xcode (1.0.3) 1424316531 Localizer Xcode Extension (1.0) 1003994181 Assets for Xcode: Resize images and icons for deve (3.1) 1203792119 Code School for Xcode and iOS 10 Development (1.2) 1175032678 Step by Step Tutorials for Xcode 8 and IOS 10 (1.0) 1042257116 Placeholders • Create stand-in assets for Xcode an (1.0) 655575608 Archive Cleaner for Xcode (1.0.2) 1016279141 XCArchiver - Archive Editor for Xcode (1.4) 1129885290 Tutorials for TVOS Swift Programming with XCODE (1.0) --- # file: ./mas/vars/main.yml packages: - { id: 409201541, name: Pages } - { id: 409203825, name: Numbers } - { id: 409183694, name: Keynote } - { id: 497799835, name: Xcode } roles/macos Mac OSの設定関連 DNSはGoogle Public DNSを設定 defaultsコマンドでMac OSの設定を変更する（お好みに合わせて） osx_defaults - osx_defaults allows users to read, write, and delete Mac OS X user defaults from Ansible bash周りのテンプレートをコピー ※owner: XXXXXは任意の値に変更\n--- # file: ./macos/tasks/main.yml - block: - name: DNS setting shell: networksetup -setdnsservers Wi-Fi 8.8.8.8 8.8.4.4 tags: - dns - block: # check defaults # $ defaults read - name: set osx defaults osx_defaults: domain: \u0026#34;{{ item.domain }}\u0026#34; key: \u0026#34;{{ item.key }}\u0026#34; type: \u0026#34;{{ item.type }}\u0026#34; value: \u0026#34;{{ item.value }}\u0026#34; with_items: \u0026#34;{{ settings }}\u0026#34; tags: - osx_defaults - block: # bash setting - name: copy ~/.bash_profile template template: src: .bash_profile.j2 dest: ~/.bash_profile owner: XXXXX group: staff mode: 0600 - name: copy ~/.bashrc template template: src: .bashrc.j2 dest: ~/.bashrc owner: XXXXX group: staff mode: 0600 tags: - bash tags: - macos 設定値は、下記コマンドで見つける $ defaults read --- # file: ./macos/vars/main.yml settings: - { domain: com.apple.finder, key: AppleShowAllFiles, type: string, value: TRUE } - { domain: NSGlobalDomain, key: AppleShowAllExtensions, type: bool, value: TRUE } - { domain: com.apple.dock, key: tilesize, type: float, value: 40 } - { domain: com.apple.dock, key: autohide, type: bool, value: TRUE } - { domain: com.apple.menuextra.battery, key: ShowPercent, type: string, value: YES } テンプレート\n# {{ ansible_managed }} # ~/.bash_profile if [ -f ~/.bashrc ]; then . ~/.bashrc fi # {{ ansible_managed }} # ~/.bashrc alias ls=\u0026#34;ls -G\u0026#34; alias ll=\u0026#34;ls -lG\u0026#34; alias la=\u0026#34;ls -laG\u0026#34; roles/awscli AWS CLIを使う人用の設定\nこの記事(MacにAWS CLIインストール )のAnsible版\n--- # file: ./awscli/tasks/main.yml - block: - name: aws cli config aws_access_key_id command: \u0026#34;aws configure set aws_access_key_id {{ awscli.key }}\u0026#34; - name: aws cli config aws_secret_access_key command: \u0026#34;aws configure set aws_secret_access_key {{ awscli.secret }}\u0026#34; - name: aws cli config default.region command: \u0026#34;aws configure set default.region {{ awscli.region }}\u0026#34; - name: aws cli config default.output command: \u0026#34;aws configure set default.output {{ awscli.output }}\u0026#34; tags: - awscli ※key,secretを設定してください\n--- # file: ./awscli/vars/main.yml awscli: key: \u0026#34;your_key\u0026#34; secret: \u0026#34;your_secret\u0026#34; region: ap-northeast-1 output: json roles/xcode Xcodeのコンポーネントのインストールです。\n--- # file: ./xcode/tasks/main.yml - block: - name: Xcode\u0026#39;s additional required components raw: /Applications/Xcode.app/Contents/MacOS/Xcode -installComponents tags: - xcode roles/fonts 開発用に使ってるフォントのインストールです。\nここでは、Rictyの派生、Ricty DiminishedとSource Han Code JP/源ノ角ゴシック Codeをインストールします。\n東京理科大学理工学部機械工学科助教 岡田研究室 プログラミング用フォント Ricty Diminished Source Han Code JP 源ノ角ゴシック Code --- # file: ./ricty/tasks/main.yml - block: - name: Download ricty get_url: url: http://www.rs.tus.ac.jp/yyusa/ricty_diminished/ricty_diminished-4.1.1.tar.gz dest: ~/Downloads/ricty_diminished-4.1.1.tar.gz - name: Unzip ricty raw: tar zxvf ~/Downloads/ricty_diminished-4.1.1.tar.gz -C ~/Library/Fonts/ - name: Download Source Han Code JP get_url: url: https://github.com/adobe-fonts/source-han-code-jp/archive/2.000R.tar.gz dest: ~/Downloads/2.000R.tar.gz - name: Unzip Source Han Code JP raw: tar zxvf ~/Downloads/2.000R.tar.gz -C ~/Library/Fonts/ - name: mv *.otf to ~/Library/Fonts/ copy: src: \u0026#34;{{ item }}\u0026#34; dest: \u0026#34;~/Library/Fonts\u0026#34; with_fileglob: - ~/Library/Fonts/source-han-code-jp-2.000R/OTF/*.otf - name: fc-cache raw: fc-cache -vf tags: - fonts roles/vsc 開発に使ってるエディタVisual Studio Code のインストールです。\n--- # file: ./vsc/tasks/main.yml - block: - name: visual studio code basic setting template: src: settings.json dest: \u0026#34;~/Library/Application Support/Code/User\u0026#34; mode: 0644 - name: visual studio code install extension raw: \u0026#34;code --install-extension {{ item }}\u0026#34; with_items: \u0026#39;{{ extensions }}\u0026#39; tags: - vsc インストールするエクセテンションのリストです。extensionsはUnique Identifierを指定します。\nvscode-icons のページでUnique Identifierの文字列を検索してみてください。\n--- # file: ./vsc/vars/main.yml extensions: - robertohuertasm.vscode-icons - equinusocio.vsc-material-theme - CoenraadS.bracket-pair-colorizer - mechatroner.rainbow-csv - IBM.output-colorizer # git - eamodio.gitlens - donjayamanne.githistory # develop - HookyQR.beautify - robinbentley.sass-indented - dbaeumer.vscode-eslint - ionutvmi.path-autocomplete # golang - ms-vscode.go # java, spring - vscjava.vscode-java-pack - vscjava.vscode-spring-initializr # ansible - vscoss.vscode-ansible # docker - peterjausovec.vscode-docker # bash - shakram02.bash-beautify - rogalmic.bash-debug # tools - humao.rest-client - chrmarti.regex - arjun.swagger-viewer こちらは、基本設定のjsonファイルで、templateをコピーしています。\n{ \u0026#34;editor.cursorStyle\u0026#34;: \u0026#34;block\u0026#34;, \u0026#34;editor.fontFamily\u0026#34;: \u0026#34;Ricty Diminished\u0026#34;, \u0026#34;editor.fontSize\u0026#34;: 16, \u0026#34;editor.highlightActiveIndentGuide\u0026#34;: true, \u0026#34;editor.insertSpaces\u0026#34;: true, \u0026#34;editor.minimap.enabled\u0026#34;: false, \u0026#34;editor.renderWhitespace\u0026#34;: \u0026#34;boundary\u0026#34;, \u0026#34;editor.tabSize\u0026#34;: 2, \u0026#34;files.insertFinalNewline\u0026#34;: true, \u0026#34;files.trimTrailingWhitespace\u0026#34;: true, \u0026#34;files.trimFinalNewlines\u0026#34;: true, \u0026#34;git.confirmSync\u0026#34;: false, \u0026#34;markdown.preview.fontFamily\u0026#34;: \u0026#34;Ricty Diminished\u0026#34;, \u0026#34;terminal.external.osxExec\u0026#34;: \u0026#34;iTerm.app\u0026#34;, \u0026#34;window.zoomLevel\u0026#34;: -1, \u0026#34;workbench.colorTheme\u0026#34;: \u0026#34;One Dark Pro\u0026#34;, \u0026#34;workbench.iconTheme\u0026#34;: \u0026#34;vscode-icons\u0026#34;, \u0026#34;workbench.startupEditor\u0026#34;: \u0026#34;newUntitledFile\u0026#34; } インストールされているvisual studio codeのエクステンションの一覧を表示する方法です。VSC doc: Command Line Interface (CLI) $ code --list-extensions Arjun.swagger-viewer chrmarti.regex CoenraadS.bracket-pair-colorizer dbaeumer.vscode-eslint donjayamanne.githistory eamodio.gitlens Equinusocio.vsc-material-theme HookyQR.beautify humao.rest-client IBM.output-colorizer ionutvmi.path-autocomplete mechatroner.rainbow-csv MS-CEINTL.vscode-language-pack-ja ms-vscode.Go PeterJausovec.vscode-docker redhat.java robertohuertasm.vscode-icons robinbentley.sass-indented rogalmic.bash-debug shakram02.bash-beautify vscjava.vscode-java-debug vscjava.vscode-java-pack vscjava.vscode-java-test vscjava.vscode-maven vscjava.vscode-spring-initializr vscoss.vscode-ansible zhuangtongfa.Material-theme roles/golang gvmで管理してます。\n--- # file: ./golang/tasks/main.yml - block: - name: install gvm shell: bash \u0026lt; \u0026lt;(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer) args: executable: /bin/bash ignore_errors: yes - name: include install.yml include: \u0026#34;install.yml in_item={{ item }}\u0026#34; with_items: \u0026#34;{{ versions }}\u0026#34; tags: - golang ※path XXXXXは任意の値に変更\n--- # file: ./golang/tasks/install.yml - block: - name: \u0026#34;install go{{ in_item }}\u0026#34; shell: \u0026#34;source /Users/XXXXX/.gvm/scripts/gvm \u0026amp;\u0026amp; gvm install go{{ in_item }} -B\u0026#34; args: executable: /bin/bash - name: \u0026#34;set default go{{ in_item }}\u0026#34; shell: \u0026#34;source /Users/XXXXX/.gvm/scripts/gvm \u0026amp;\u0026amp; gvm use go{{ in_item }} --default\u0026#34; args: executable: /bin/bash tags: - golang インストールするバージョンを指定 --- # file: ./golang/vars/main.yml versions: - \u0026#34;1.4\u0026#34; - \u0026#34;1.7.6\u0026#34; - \u0026#34;1.8.7\u0026#34; - \u0026#34;1.9.7\u0026#34; - \u0026#34;1.10.5\u0026#34; - \u0026#34;1.11.2\u0026#34; localhost ホストを書いてあるだけのファイル localhost Ansibleの実行 $ ansible-playbook -i localhost site.yml 最後に 参考にされる方は、これベースに思考錯誤してください。\n他にもできそうなことはたくさんあると思います。\n技術の移り変わりも激しいのでやり過ぎ注意です。\nそんなに頻度もないでしょうし、完璧を求めすぎると逆に時間かかって本末転倒になるパターンもありそうなので、60〜70%自動化するくらいの気持ちでがんばりましょう。\n","permalink":"https://techteco.github.io/2018/01/22/ansible-mac/","tags":["mac","Server"],"title":"AnsibleでMacの開発環境を構築する"},{"categories":["AWS"],"content":"公式ドキュメント AWS CLI Command Reference dynamodb 前提 DynamoDBローカルを使ってみる が完了している\nDynamoDBをAWS CLIで操作してみる（テーブル操作） が完了している\n参考 コマンドリファレンス aws dynamodb put-item aws dynamodb get-item aws dynamodb update-item aws dynamodb delete-item aws dynamodb batch-write-item aws dynamodb batch-get-item 事前準備 作業用ディレクトリへ移動 $ cd ~/dynamodbwork テーブル作成 定義用jsonファイル $ more ./json/musicTableDefinition.json { \u0026#34;TableName\u0026#34;: \u0026#34;Music\u0026#34;, \u0026#34;AttributeDefinitions\u0026#34;: [ { \u0026#34;AttributeName\u0026#34;: \u0026#34;Artist\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; }, { \u0026#34;AttributeName\u0026#34;: \u0026#34;SongTitle\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; } ], \u0026#34;KeySchema\u0026#34;: [ { \u0026#34;KeyType\u0026#34;: \u0026#34;HASH\u0026#34;, \u0026#34;AttributeName\u0026#34;: \u0026#34;Artist\u0026#34; }, { \u0026#34;KeyType\u0026#34;: \u0026#34;RANGE\u0026#34;, \u0026#34;AttributeName\u0026#34;: \u0026#34;SongTitle\u0026#34; } ], \u0026#34;ProvisionedThroughput\u0026#34;: { \u0026#34;WriteCapacityUnits\u0026#34;: 1, \u0026#34;ReadCapacityUnits\u0026#34;: 1 } } $ aws dynamodb \\ create-table \\ --endpoint-url http://localhost:8000 \\ --cli-input-json file://json/musicTableDefinition.json アイテム操作 put-item 定義用jsonファイル $ more ./json/musicItem.json { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Call Me Today\u0026#34; }, \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Somewhat Famous\u0026#34; } } $ aws dynamodb \\ put-item \\ --table-name Music \\ --item file://json/musicItem.json \\ --return-consumed-capacity TOTAL \\ --endpoint-url http://localhost:8000 get-item Key用jsonファイル $ more ./json/musicItemKey.json { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Call Me Today\u0026#34; } } $ aws dynamodb \\ get-item \\ --table-name Music \\ --key file://json/musicItemKey.json \\ --endpoint-url http://localhost:8000 出力結果のjsonファイル\n{ \u0026#34;Item\u0026#34;: { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Call Me Today\u0026#34; }, \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Somewhat Famous\u0026#34; } } } update-item Key用jsonファイル $ more ./json/musicItemKey.json { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Call Me Today\u0026#34; } } 更新用jsonファイル $ more ./json/musicItemUpdateAttribute.json { \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;Value\u0026#34;: { \u0026#34;S\u0026#34;:\u0026#34;Somewhat Famous4\u0026#34; }, \u0026#34;Action\u0026#34;: \u0026#34;PUT\u0026#34; } } $ aws dynamodb \\ update-item \\ --table-name Music \\ --key file://json/musicItemKey.json \\ --attribute-updates file://json/musicItemUpdateAttribute.json \\ --endpoint-url http://localhost:8000 更新後のjsonファイル { \u0026#34;Item\u0026#34;: { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Call Me Today\u0026#34; }, \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Somewhat Famous4\u0026#34; } } } delete-item Key用jsonファイル $ more ./json/musicItemKey.json { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Call Me Today\u0026#34; } } $ aws dynamodb \\ delete-item \\ --table-name Music \\ --key file://json/musicItemKey.json \\ --endpoint-url http://localhost:8000 batch-write-item 追加用jsonファイル $ more ./json/musicItems.json { \u0026#34;Music\u0026#34;: [{ \u0026#34;PutRequest\u0026#34;: { \u0026#34;Item\u0026#34;: { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Call Me Today\u0026#34; }, \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Somewhat Famous\u0026#34; } } } }, { \u0026#34;PutRequest\u0026#34;: { \u0026#34;Item\u0026#34;: { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Acme Band\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Happy Day\u0026#34; }, \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Songs About Life\u0026#34; } } } }, { \u0026#34;PutRequest\u0026#34;: { \u0026#34;Item\u0026#34;: { \u0026#34;Artist\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;No One You Know\u0026#34; }, \u0026#34;SongTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Scared of My Shadow\u0026#34; }, \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Blue Sky Blues\u0026#34; } } } } ] } $ aws dynamodb \\ batch-write-item \\ --request-items file://json/musicItems.json \\ --endpoint-url http://localhost:8000 batch-get-item $ aws dynamodb \\ batch-get-item \\ --request-items file://json/musicItemKeys.json \\ --endpoint-url http://localhost:8000 取得 { \u0026#34;UnprocessedKeys\u0026#34;: {}, \u0026#34;Responses\u0026#34;: { \u0026#34;Music\u0026#34;: [ { \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Songs About Life\u0026#34; } }, { \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Somewhat Famous\u0026#34; } }, { \u0026#34;AlbumTitle\u0026#34;: { \u0026#34;S\u0026#34;: \u0026#34;Blue Sky Blues\u0026#34; } } ] } } ","permalink":"https://techteco.github.io/2017/04/25/dynamodb-usage-item/","tags":["dynamoDB","aws cli"],"title":"DynamoDBをAWS CLIで操作してみる（アイテム操作）"},{"categories":["AWS"],"content":"公式ドキュメント AWS CLI Command Reference dynamodb 前提 DynamoDBローカルを使ってみる が完了している 参考 コマンドリファレンス aws dynamodb list-tables aws dynamodb create-table aws dynamodb describe-table aws dynamodb update-table aws dynamodb delete-table 事前準備 作業用ディレクトリ作成 $ mkdir -p ~/dynamodbwork/json; cd ./dynamodbwork テーブル操作 テーブルのリストを表示する $ aws dynamodb \\ list-tables \\ --endpoint-url http://localhost:8000 \u0026gt; ./json/list-tables.json $ more ./json/list-tables.json 出力結果のjsonファイル\n{ \u0026#34;TableNames\u0026#34;: [] } テーブル作成 定義用jsonファイル $ more ./json/testTableDefinition.json { \u0026#34;TableName\u0026#34;: \u0026#34;testTable\u0026#34;, \u0026#34;AttributeDefinitions\u0026#34;: [ { \u0026#34;AttributeName\u0026#34;: \u0026#34;hash_key_attribute_name\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; }, { \u0026#34;AttributeName\u0026#34;: \u0026#34;range_key_attribute_name\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; } ], \u0026#34;KeySchema\u0026#34;: [ { \u0026#34;KeyType\u0026#34;: \u0026#34;HASH\u0026#34;, \u0026#34;AttributeName\u0026#34;: \u0026#34;hash_key_attribute_name\u0026#34; }, { \u0026#34;KeyType\u0026#34;: \u0026#34;RANGE\u0026#34;, \u0026#34;AttributeName\u0026#34;: \u0026#34;range_key_attribute_name\u0026#34; } ], \u0026#34;ProvisionedThroughput\u0026#34;: { \u0026#34;WriteCapacityUnits\u0026#34;: 5, \u0026#34;ReadCapacityUnits\u0026#34;: 5 } } $ aws dynamodb \\ create-table \\ --endpoint-url http://localhost:8000 \\ --cli-input-json file://json/testTableDefinition.json テーブルの内容を表示する $ aws dynamodb \\ describe-table \\ --endpoint-url http://localhost:8000 \\ --table-name testTable \u0026gt; ./json/testTable.json $ more ./json/testTable.json テーブル定義の更新 更新用jsonファイル $ more ./json/testTableUpdate.json { \u0026#34;TableName\u0026#34;: \u0026#34;testTable\u0026#34;, \u0026#34;AttributeDefinitions\u0026#34;: [ { \u0026#34;AttributeName\u0026#34;: \u0026#34;hash_key_attribute_name\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; }, { \u0026#34;AttributeName\u0026#34;: \u0026#34;range_key_attribute_name\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; } ], \u0026#34;ProvisionedThroughput\u0026#34;: { \u0026#34;WriteCapacityUnits\u0026#34;: 10, \u0026#34;ReadCapacityUnits\u0026#34;: 10 } } $ aws dynamodb \\ update-table \\ --endpoint-url http://localhost:8000 \\ --cli-input-json file://json/testTableUpdate.json 更新後のテーブルの内容を表示する $ aws dynamodb \\ describe-table \\ --endpoint-url http://localhost:8000 \\ --table-name testTable \u0026gt; ./json/testTableUdated.json $ diff ./json/testTable.json ./json/testTableUdated.json 16c16 \u0026lt; \u0026#34;WriteCapacityUnits\u0026#34;: 5, --- \u0026gt; \u0026#34;WriteCapacityUnits\u0026#34;: 10, 18c18 \u0026lt; \u0026#34;ReadCapacityUnits\u0026#34;: 5, --- \u0026gt; \u0026#34;ReadCapacityUnits\u0026#34;: 10, テーブル削除 $ aws dynamodb \\ delete-table \\ --endpoint-url http://localhost:8000 \\ --table-name testTable ","permalink":"https://techteco.github.io/2017/04/22/dynamodb-usage-table/","tags":["dynamoDB","aws cli"],"title":"DynamoDBをAWS CLIで操作してみる（テーブル操作）"},{"categories":["AWS"],"content":"公式ドキュメント DynamoDB ローカル (ダウンロード可能バージョン) のセットアップ 前提 AWS CLIの設定とJavaが導入済み $ aws --version aws-cli/1.11.76 Python/2.7.10 Darwin/16.5.0 botocore/1.5.39 $ java -version java version \u0026#34;1.8.0_121\u0026#34; Java(TM) SE Runtime Environment (build 1.8.0_121-b13) Java HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode) ダウンロード $ cd your_path $ mkdir dynamodb_local_latest $ curl -sL https://s3-ap-northeast-1.amazonaws.com/dynamodb-local-tokyo/dynamodb_local_latest.tar.gz | tar zx -C your_path/dynamodb_local_latest 実行 $ java -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb Initializing DynamoDB Local with the following configuration: Port:\t8000 InMemory:\tfalse DbPath:\tnull SharedDb:\ttrue shouldDelayTransientStatuses:\tfalse CorsParams:\t* 実行オプション -cors value JavaScript で CORS (Cross-Origin Resource Sharing) のサポートを有効にします。特定のドメインのカンマ区切りの \u0026ldquo;許可\u0026rdquo; リストを指定する必要があります。 -cors のデフォルト設定は、パブリックアクセスを許可するアスタリスク（*）です。\n-dbPath value DynamoDB がそのデータベースファイルを書き込むディレクトリ。このオプションを指定しない場合、ファイルは現在のディレクトリに書き込まれます。 -dbPath と -inMemory の両方を同時に指定することはできません。\n-delayTransientStatuses DynamoDB で特定のオペレーションの遅延を発生させます。DynamoDB は、テーブルやインデックスでの作成/更新/削除オペレーションなど、一部のタスクをほぼ瞬時に実行できます。ただし、実際の DynamoDB サービスでは、それらのタスクにはより多くの時間が必要です。このパラメーターを設定すると、DynamoDB は Amazon DynamoDB ウェブサービスの動作をより正確にシミュレートできます（現在、このパラメータではステータスが CREATING または DELETING のグローバルセカンダリインデックスに対してのみ遅延が発生します）。\n-help 使用方法の概要とオプションを出力します。\n-inMemory DynamoDB は、データベースファイルを使用する代わりにメモリで実行されます。DynamoDB を停止したとき、保存されるデータはありません。 -dbPath と -inMemory の両方を同時に指定することはできません。\n-optimizeDbBeforeStartup コンピュータで DynamoDB を開始する前に、基になるデータベーステーブルを最適化します。このパラメータを使用するときは、-dbPath も指定する必要があります。\n-port value DynamoDB がアプリケーションと通信するために使用するポート番号。このオプションを指定しない場合、デフォルトポートは 8000 になります。\n-sharedDb DynamoDB は、認証情報とリージョンごとに別のファイルを使用する代わりに、単一のデータベースファイルを使用します。 -sharedDb を指定すると、すべての DynamoDB クライアントは、リージョンと認証情報の設定にかかわらず、テーブルの同じセットを操作します。\n動作確認 テーブルリストを表示 $ aws dynamodb list-tables --endpoint-url http://localhost:8000 { \u0026#34;TableNames\u0026#34;: [] } テーブルを作成 $ aws dynamodb create-table \\ --endpoint-url http://localhost:8000 \\ --table-name testTable \\ --attribute-definitions \\ AttributeName=hash_key_attribute_name,AttributeType=S \\ AttributeName=range_key_attribute_name,AttributeType=S \\ --key-schema \\ AttributeName=hash_key_attribute_name,KeyType=HASH \\ AttributeName=range_key_attribute_name,KeyType=RANGE \\ --provisioned-throughput \\ ReadCapacityUnits=5,WriteCapacityUnits=5 { \u0026#34;TableDescription\u0026#34;: { \u0026#34;TableArn\u0026#34;: \u0026#34;arn:aws:dynamodb:ddblocal:000000000000:table/testTable\u0026#34;, \u0026#34;AttributeDefinitions\u0026#34;: [ { \u0026#34;AttributeName\u0026#34;: \u0026#34;hash_key_attribute_name\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; }, { \u0026#34;AttributeName\u0026#34;: \u0026#34;range_key_attribute_name\u0026#34;, \u0026#34;AttributeType\u0026#34;: \u0026#34;S\u0026#34; } ], \u0026#34;ProvisionedThroughput\u0026#34;: { \u0026#34;NumberOfDecreasesToday\u0026#34;: 0, \u0026#34;WriteCapacityUnits\u0026#34;: 5, \u0026#34;LastIncreaseDateTime\u0026#34;: 0.0, \u0026#34;ReadCapacityUnits\u0026#34;: 5, \u0026#34;LastDecreaseDateTime\u0026#34;: 0.0 }, \u0026#34;TableSizeBytes\u0026#34;: 0, \u0026#34;TableName\u0026#34;: \u0026#34;testTable\u0026#34;, \u0026#34;TableStatus\u0026#34;: \u0026#34;ACTIVE\u0026#34;, \u0026#34;KeySchema\u0026#34;: [ { \u0026#34;KeyType\u0026#34;: \u0026#34;HASH\u0026#34;, \u0026#34;AttributeName\u0026#34;: \u0026#34;hash_key_attribute_name\u0026#34; }, { \u0026#34;KeyType\u0026#34;: \u0026#34;RANGE\u0026#34;, \u0026#34;AttributeName\u0026#34;: \u0026#34;range_key_attribute_name\u0026#34; } ], \u0026#34;ItemCount\u0026#34;: 0, \u0026#34;CreationDateTime\u0026#34;: 1492755625.133 } } テーブルリストを表示 $ aws dynamodb list-tables --endpoint-url http://localhost:8000 { \u0026#34;TableNames\u0026#34;: [ \u0026#34;testTable\u0026#34; ] } できた。\n","permalink":"https://techteco.github.io/2017/04/22/dynamodb-local-setup/","tags":["dynamoDB","aws cli"],"title":"DynamoDBローカルを使ってみる"},{"categories":["AWS"],"content":"公式ドキュメント AWS CLI Command Reference AWS CLI コマンドの実行 頻度とかファイル数にもよるけど、とりあえずざっくり全クリア。\nXXXXXXXXXXXXXXはdistribution-id、確認方法はこちらで。 $ aws cloudfront list-distributions $ aws cloudfront create-invalidation --distribution-id XXXXXXXXXXXXXX --paths \u0026#39;/*\u0026#39; AWS CLI support for this service is only available in a preview stage. However, if you\u0026#39;d like to use the \u0026#34;aws cloudfront\u0026#34; commands with the AWS CLI, you can enable this service by adding the following to your CLI config file: [preview] cloudfront=true or by running: aws configure set preview.cloudfront true なんかメッセージでたので指示どおり実行\n$ aws configure set preview.cloudfront true $ aws cloudfront create-invalidation --distribution-id XXXXXXXXXXXXXX --paths \u0026#39;/*\u0026#39; { \u0026#34;Invalidation\u0026#34;: { \u0026#34;Status\u0026#34;: \u0026#34;InProgress\u0026#34;, \u0026#34;InvalidationBatch\u0026#34;: { \u0026#34;Paths\u0026#34;: { \u0026#34;Items\u0026#34;: [ \u0026#34;/*\u0026#34; ], \u0026#34;Quantity\u0026#34;: 1 }, \u0026#34;CallerReference\u0026#34;: \u0026#34;cli-XXXXXXXXXXXX-XXXXX\u0026#34; }, \u0026#34;Id\u0026#34;: \u0026#34;XXXXXXXXXXXXXX\u0026#34;, \u0026#34;CreateTime\u0026#34;: \u0026#34;2017-04-09T01:54:42.985Z\u0026#34; }, \u0026#34;Location\u0026#34;: \u0026#34;https://cloudfront.amazonaws.com/2016-11-25/distribution/E3L5CA48AGLO7U/invalidation/I2BB6FIQJYY9GS\u0026#34; } ","permalink":"https://techteco.github.io/2017/04/09/cloudfront-create-invalidation/","tags":["aws cli","cloudfront"],"title":"AWS CLIでCloudfrontのキャッシュクリア"},{"categories":["Server"],"content":"オレオレSSL証明書 情報はググれば沢山でてくるので割愛。久々につくる機会があったので手順を自分用にメモ。\n秘密鍵の作成 $ openssl genrsa -aes256 -out ./server.key 2048 Generating RSA private key, 2048 bit long modulus ..............................................................\u0026#43;\u0026#43;\u0026#43; .......\u0026#43;\u0026#43;\u0026#43; unable to write \u0026#39;random state\u0026#39; e is 65537 (0x10001) Enter pass phrase for ./server.key: Verifying - Enter pass phrase for ./server.key: CSRの作成 $ openssl req -new -sha256 -key ./server.key -out ./server.csr Enter pass phrase for ./server.key: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter \u0026#39;.\u0026#39;, the field will be left blank. ----- Country Name (2 letter code) [AU]:JP State or Province Name (full name) [Some-State]:TOKYO Locality Name (eg, city) []:MINATO-KU Organization Name (eg, company) [Internet Widgits Pty Ltd]:COMPANY Organizational Unit Name (eg, section) []:DEV Common Name (e.g. server FQDN or YOUR name) []:*.local.com Email Address []: Please enter the following \u0026#39;extra\u0026#39; attributes to be sent with your certificate request A challenge password []: An optional company name []: CRT作成 $ openssl x509 -in ./server.csr -days 3650 -req -signkey ./server.key \u0026gt; ./server.crt パスワード解除 $ cp ./server.key ./server.key.org $ openssl rsa -in ./server.key.org -out ./server.key ","permalink":"https://techteco.github.io/2017/03/08/oreoressl/","tags":["ssl","openssl"],"title":"オレオレSSL証明書"},{"categories":["PHP"],"content":"Lumenとは Limenのオフィシャルページ The stunningly fast micro-framework by Laravel.\n直訳すると、\u0026ldquo;Laravelによるほどろくほど高速なマイクロフレームワーク\u0026quot;ってことですね。\n現時点（2017年2月14日）では、バージョン5.4が最新のようです。Limen Documentation laravel5.2は使ったあるので、そこまで苦労しないで使えるはず。。\nLimenを試してみる ここに書いてあるとおりやってみるLimen Installation 環境 mac OS 10.12.3 $ php -v PHP 7.1.1 (cli) (built: Jan 21 2017 13:36:56) ( NTS ) Copyright (c) 1997-2017 The PHP Group Zend Engine v3.1.0, Copyright (c) 1998-2017 Zend Technologies $ composer -V Composer version 1.3.2 2017-01-27 18:23:41 $ openssl version OpenSSL 0.9.8zh 14 Jan 2016 $ php -m | grep -i pdo PDO pdo_mysql PDO_ODBC pdo_sqlite $ php -m | grep -i mbstring mbstring $ ComposerでLumen installerをインストール $ composer global require \u0026#34;laravel/lumen-installer\u0026#34; Changed current directory to /Users/hoge/.composer Using version ^1.0 for laravel/lumen-installer ./composer.json has been updated Loading composer repositories with package information Updating dependencies (including require-dev) Package operations: 1 install, 0 updates, 0 removals - Installing laravel/lumen-installer (v1.0.2) Downloading: 100% Writing lock file Generating autoload files $ サンプルプロジェクト作成 $ lumen new lumen_sample Crafting application... Application ready! Build something amazing. $ cd lumen_sample/ $ tree -L 1 . ├── app ├── artisan ├── bootstrap ├── composer.json ├── composer.lock ├── database ├── phpunit.xml ├── public ├── readme.md ├── resources ├── routes ├── storage ├── tests └── vendor 9 directories, 5 files 動作確認 $ php -S localhost:8000 -t public PHP 7.1.1 Development Server started at Tue Feb 14 12:46:01 2017 Listening on http://localhost:8000 Document root is /document_root/lumen_sample/public Press Ctrl-C to quit. [Tue Feb 14 12:46:16 2017] ::1:53482 [200]: / ブラウザで下記にアクセスする\nhttp://localhost:8000/\nこんな感じで表示されたらOK\n","permalink":"https://techteco.github.io/2017/02/15/lumen-install/","tags":["lumen","laravel"],"title":"lumenを試してみる"},{"categories":["Server","Server"],"content":"前提 ここまで終わってること\nansible実行用のhostをvagrantのansible_localで設定 hostからansibleでcentOS 7.2の基本設定 やること ansibleでsshdの設定 ansible実行で設定反映 sshdの起動確認 1.ansibleでsshdの設定 ファイル構成 $ tree . ├── Vagrantfile ├── ansible.cfg └── provision ├── development ├── group_vars │ └── web.yml ├── host ├── roles │ ├── CentOS7.2 │ │ ├── handlers │ │ │ └── main.yml \u0026lt;\u0026lt;\u0026lt;\u0026lt; 変更 │ │ ├── tasks │ │ │ ├── chrony.yml │ │ │ ├── env.yml │ │ │ ├── locale.yml │ │ │ ├── main.yml \u0026lt;\u0026lt;\u0026lt;\u0026lt; 変更 │ │ │ ├── selinux.yml │ │ │ ├── sshd.yml \u0026lt;\u0026lt;\u0026lt;\u0026lt; 追加 │ │ │ └── yumallupdate.yml │ │ ├── templates │ │ │ ├── alias.sh.j2 │ │ │ └── chrony.conf.j2 │ │ └── vars │ │ └── main.yml │ └── ansible │ ├── tasks │ │ ├── main.yml │ │ └── ssh.yml │ └── templates │ └── ssh │ └── config.j2 └── site.yml 12 directories, 20 files 各ファイル provision/roles/CentOS7.2/tasks/main.yml @@ -6,3 \u0026#43;6,4 @@ - include: chrony.yml - include: env.yml - include: selinux.yml \u0026#43;- include: sshd.yml provision/roles/CentOS7.2/tasks/ssh.yml --- # file: ./CentOS7.2/tasks/sshd.yml - block: - name: check existing sshd_config backup file stat: path: /etc/ssh/sshd_config.bk register: sshd_config_bkup - debug: var=sshd_config_bkup - name: copy sshd_config to bk command: cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bk when: sshd_config_bkup.stat.exists == False - name: modify sshd_config lineinfile: dest: /etc/ssh/sshd_config state: present backrefs: yes regexp: \u0026#39;{{ item.regexp }}\u0026#39; line: \u0026#39;{{ item.line }}\u0026#39; with_items: - regexp: \u0026#39;^#?\\s*Port\u0026#39; line: \u0026#39;Port {{ ansible_port }}\u0026#39; - regexp: \u0026#39;^#?\\s*PermitRootLogin\u0026#39; line: \u0026#39;PermitRootLogin no\u0026#39; - regexp: \u0026#39;^PasswordAuthentication yes\u0026#39; line: \u0026#39;PasswordAuthentication no\u0026#39; - regexp: \u0026#39;^#?\\s*PubkeyAuthentication\u0026#39; line: \u0026#39;PubkeyAuthentication yes\u0026#39; notify: - restart sshd tags: - construct - ssh - name: check sshd_config changed command: diff /etc/ssh/sshd_config /etc/ssh/sshd_config.bk register: sshd_config_diff ignore_errors: yes - debug: var=sshd_config_diff.stdout_lines become: yes tags: - construct - sshd provision/roles/CentOS7.2/handlers/main.yml @@ -8,3 \u0026#43;8,10 @@ name: chronyd state: restarted enabled: yes \u0026#43; \u0026#43; - name: restart sshd \u0026#43; become: yes \u0026#43; service: \u0026#43; name: sshd \u0026#43; state: restarted \u0026#43; enabled: yes ansible実行で設定反映 $ ansible-playbook -i /vagrant/development /vagrant/site.yml PLAY [web] ********************************************************************* TASK [setup] ******************************************************************* ok: [192.168.52.52] TASK [CentOS7.2 : yum update all] ********************************************** ok: [192.168.52.52] TASK [CentOS7.2 : check CentOS version] **************************************** changed: [192.168.52.52] TASK [CentOS7.2 : set LANG] **************************************************** changed: [192.168.52.52] TASK [CentOS7.2 : set keymap] ************************************************** changed: [192.168.52.52] TASK [CentOS7.2 : set timezone] ************************************************ changed: [192.168.52.52] TASK [CentOS7.2 : install chrony] ********************************************** ok: [192.168.52.52] TASK [CentOS7.2 : start chrony] ************************************************ ok: [192.168.52.52] TASK [CentOS7.2 : copy chrony.conf template] *********************************** ok: [192.168.52.52] TASK [CentOS7.2 : copy /etc/profile.d/alias.sh template] *********************** ok: [192.168.52.52] TASK [CentOS7.2 : install selinux util] **************************************** ok: [192.168.52.52] =\u0026gt; (item=[u\u0026#39;libselinux-python\u0026#39;, u\u0026#39;libselinux-utils\u0026#39;, u\u0026#39;selinux-policy\u0026#39;, u\u0026#39;selinux-policy-targeted\u0026#39;]) TASK [CentOS7.2 : disable selinux] ********************************************* ok: [192.168.52.52] TASK [CentOS7.2 : check existing sshd_config backup file] ********************** ok: [192.168.52.52] TASK [CentOS7.2 : debug] ******************************************************* ok: [192.168.52.52] =\u0026gt; { \u0026#34;sshd_config_bkup\u0026#34;: { \u0026#34;changed\u0026#34;: false, \u0026#34;stat\u0026#34;: { \u0026#34;exists\u0026#34;: false } } } TASK [CentOS7.2 : copy sshd_config to bk] ************************************** changed: [192.168.52.52] TASK [CentOS7.2 : modify sshd_config] ****************************************** changed: [192.168.52.52] =\u0026gt; (item={u\u0026#39;regexp\u0026#39;: u\u0026#39;^#?\\\\s*Port\u0026#39;, u\u0026#39;line\u0026#39;: u\u0026#39;Port 22\u0026#39;}) changed: [192.168.52.52] =\u0026gt; (item={u\u0026#39;regexp\u0026#39;: u\u0026#39;^#?\\\\s*PermitRootLogin\u0026#39;, u\u0026#39;line\u0026#39;: u\u0026#39;PermitRootLogin no\u0026#39;}) changed: [192.168.52.52] =\u0026gt; (item={u\u0026#39;regexp\u0026#39;: u\u0026#39;^PasswordAuthentication yes\u0026#39;, u\u0026#39;line\u0026#39;: u\u0026#39;PasswordAuthentication no\u0026#39;}) changed: [192.168.52.52] =\u0026gt; (item={u\u0026#39;regexp\u0026#39;: u\u0026#39;^#?\\\\s*PubkeyAuthentication\u0026#39;, u\u0026#39;line\u0026#39;: u\u0026#39;PubkeyAuthentication yes\u0026#39;}) TASK [CentOS7.2 : check sshd_config changed] *********************************** fatal: [192.168.52.52]: FAILED! =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: [\u0026#34;diff\u0026#34;, \u0026#34;/etc/ssh/sshd_config\u0026#34;, \u0026#34;/etc/ssh/sshd_config.bk\u0026#34;], \u0026#34;delta\u0026#34;: \u0026#34;0:00:00.002562\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-12-08 16:24:22.570969\u0026#34;, \u0026#34;failed\u0026#34;: true, \u0026#34;rc\u0026#34;: 1, \u0026#34;start\u0026#34;: \u0026#34;2016-12-08 16:24:22.568407\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;17c17\\n\u0026lt; Port 22\\n---\\n\u0026gt; #Port 22\\n49c49\\n\u0026lt; PermitRootLogin no\\n---\\n\u0026gt; #PermitRootLogin yes\\n55c55\\n\u0026lt; PubkeyAuthentication yes\\n---\\n\u0026gt; #PubkeyAuthentication yes\\n79c79\\n\u0026lt; PasswordAuthentication no\\n---\\n\u0026gt; PasswordAuthentication yes\u0026#34;, \u0026#34;stdout_lines\u0026#34;: [\u0026#34;17c17\u0026#34;, \u0026#34;\u0026lt; Port 22\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; #Port 22\u0026#34;, \u0026#34;49c49\u0026#34;, \u0026#34;\u0026lt; PermitRootLogin no\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; #PermitRootLogin yes\u0026#34;, \u0026#34;55c55\u0026#34;, \u0026#34;\u0026lt; PubkeyAuthentication yes\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; #PubkeyAuthentication yes\u0026#34;, \u0026#34;79c79\u0026#34;, \u0026#34;\u0026lt; PasswordAuthentication no\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; PasswordAuthentication yes\u0026#34;], \u0026#34;warnings\u0026#34;: []} ...ignoring TASK [CentOS7.2 : debug] ******************************************************* ok: [192.168.52.52] =\u0026gt; { \u0026#34;sshd_config_diff.stdout_lines\u0026#34;: [ \u0026#34;17c17\u0026#34;, \u0026#34;\u0026lt; Port 22\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; #Port 22\u0026#34;, \u0026#34;49c49\u0026#34;, \u0026#34;\u0026lt; PermitRootLogin no\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; #PermitRootLogin yes\u0026#34;, \u0026#34;55c55\u0026#34;, \u0026#34;\u0026lt; PubkeyAuthentication yes\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; #PubkeyAuthentication yes\u0026#34;, \u0026#34;79c79\u0026#34;, \u0026#34;\u0026lt; PasswordAuthentication no\u0026#34;, \u0026#34;---\u0026#34;, \u0026#34;\u0026gt; PasswordAuthentication yes\u0026#34; ] } RUNNING HANDLER [CentOS7.2 : restart sshd] ************************************* changed: [192.168.52.52] PLAY RECAP ********************************************************************* 192.168.52.52 : ok=19 changed=7 unreachable=0 failed=0 sshdの起動確認 [vagrant@web ssh]$ systemctl status sshd.service ● sshd.service - OpenSSH server daemon Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; vendor preset: enabled) Active: active (running) since 木 2016-12-08 16:24:22 JST; 48min ago Docs: man:sshd(8) man:sshd_config(5) Main PID: 15539 (sshd) CGroup: /system.slice/sshd.service └─15539 /usr/sbin/sshd -D [vagrant@web ssh]$ ","permalink":"https://techteco.github.io/2016/12/08/ansible-sshd/","tags":["sshd"],"title":"ansibleでsshdの設定"},{"categories":["Server"],"content":" ansible実行用のhostをvagrantのansible_localで設定 hostからansibleでcentOS 7.2の基本設定 ← ここ 前提 OS X El Capitan(10.11.6)\nVagrant インストール済み\n$ vagrant version Installed Version: 1.8.7 Latest Version: 1.8.7 VirtualBox インストール済み ※前回からバージョンアップ\n$ VBoxManage -version 5.1.10r112026 2.hostからansibleでcentOS 7.2の基本設定 ansibleのBest Practices を参考に、以下のファイル構成で準備する。\nファイル構成 $ tree . ├── Vagrantfile ├── ansible.cfg └── provision ├── development ├── group_vars │ └── web.yml ├── host ├── roles │ ├── CentOS7.2 │ │ ├── handlers │ │ │ └── main.yml │ │ ├── tasks │ │ │ ├── chrony.yml │ │ │ ├── env.yml │ │ │ ├── locale.yml │ │ │ ├── main.yml │ │ │ ├── selinux.yml │ │ │ └── yumallupdate.yml │ │ ├── templates │ │ │ ├── alias.sh.j2 │ │ │ └── chrony.conf.j2 │ │ └── vars │ │ └── main.yml │ └── ansible │ ├── tasks │ │ ├── main.yml │ │ └── ssh.yml │ └── templates │ └── ssh │ └── config.j2 ├── site.retry └── site.yml 12 directories, 20 files 各ファイル Vagrantfile # -*- mode: ruby -*- # vi: set ft=ruby : # All Vagrant configuration is done below. The \u0026#34;2\u0026#34; in Vagrant.configure # configures the configuration version (we support older styles for # backwards compatibility). Please don\u0026#39;t change it unless you know what # you\u0026#39;re doing. Vagrant.configure(\u0026#34;2\u0026#34;) do |config| config.vm.define \u0026#34;web\u0026#34; do |node| node.vm.box = \u0026#34;bento/centos-7.2\u0026#34; node.vm.hostname = \u0026#34;web\u0026#34; node.vm.network :private_network, ip: \u0026#34;192.168.52.52\u0026#34; end config.vm.define \u0026#34;host\u0026#34; do |node| node.vm.box = \u0026#34;bento/centos-7.2\u0026#34; node.vm.hostname = \u0026#34;host\u0026#34; node.vm.network :private_network, ip: \u0026#34;192.168.52.51\u0026#34; node.vm.synced_folder \u0026#34;./provision\u0026#34;, \u0026#34;/vagrant\u0026#34;, owner: \u0026#34;vagrant\u0026#34;, group: \u0026#34;vagrant\u0026#34;, mount_options: [\u0026#34;dmode=775\u0026#34;] # Run Ansible from the Vagrant VM node.vm.provision :ansible_local do |ansible| ansible.playbook = \u0026#34;site.yml\u0026#34; ansible.verbose = true ansible.install = true ansible.install_mode = :default ansible.limit = \u0026#34;host\u0026#34; # or only \u0026#34;nodes\u0026#34; group, etc. ansible.inventory_path = \u0026#34;host\u0026#34; end end end ansible.cfg 変更なし\n[defaults] host_key_checking = no [ssh_connection] ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes inventory provision/inventory → provision/host # host inventory host ansible_connection=local provision/development # development Inventory [web] 192.168.52.52 playbook provision/site.yml # file: site.yml # --------------- # host # --------------- - hosts: host gather_facts: yes roles: - CentOS7.2 - ansible # --------------- - hosts: web gather_facts: yes roles: - CentOS7.2 vars provision/group_vars/web.yml --- # file: group_vars/web.yml ansible_port: 22 iptables: accept_tcp_rules: - { port: 22 } - { port: 80 } - { port: 88 } - { port: 443 } - { port: 3306 } roles provision/roles/ansible/tasks main.yml --- # file: ./ansible/tasks/ssh.yml - block: - name: ssh config template: src: ssh/config.j2 dest: /home/vagrant/.ssh/config owner: vagrant group: vagrant mode: 0600 - name: check existing id_rsa stat: path: /home/vagrant/.ssh/id_rsa register: id_rsa - debug: var=id_rsa - name: Generate SSH keys shell: ssh-keygen -b 2048 -t rsa -f /home/vagrant/.ssh/id_rsa -q -N \u0026#34;\u0026#34; args: creates: /home/vagrant/.ssh/id_rsa when: id_rsa.stat.exists == False - name: copy ssh keys shell: sshpass -p \u0026#39;vagrant\u0026#39; ssh-copy-id -i /home/vagrant/.ssh/id_rsa.pub vagrant@{{ item }} with_items: - 192.168.52.52 # front - name: check ssh shell: \u0026#34;ansible -i /vagrant/development {{ item }} -m ping\u0026#34; with_items: - 192.168.52.52 # front become: yes become_user: vagrant tags: ansible provision/roles/ansible/templates ssh/config.j2 # {{ ansible_managed }} # ~/.ssh/config StrictHostKeyChecking no provision/roles/CentOS7.2/tasks main.yml --- # file: ./CentOS7.2/tasks/main.yml - include: yumallupdate.yml - include: locale.yml - include: chrony.yml - include: env.yml - include: selinux.yml yumallupdate.yml --- # file: ./CentOS7.2/tasks/yumallupdate.yml - block: - name: yum update all yum: name=* state=latest update_cache=yes - name: check CentOS version command: cat /etc/redhat-release become: yes tags: - construct - yumallupdate locale.yml --- # file: ./CentOS7.2/tasks/locale.yml - block: - name: set LANG command: localectl set-locale LANG=\u0026#34;{{ locale }}\u0026#34; - name: set keymap command: localectl set-keymap \u0026#34;{{ keymap }}\u0026#34; - name: set timezone command: timedatectl set-timezone \u0026#34;{{ timezone }}\u0026#34; become: yes tags: - construct - locale chrony.yml --- # file: ./CentOS7.2/tasks/chrony.yml - block: - name: install chrony yum: name: chrony state: present - name: start chrony service: name: chronyd state: started enabled: yes - name: copy chrony.conf template template: src: chrony.conf.j2 dest: /etc/chrony.conf owner: root group: root mode: 0644 notify: - restart chronyd become: yes tags: - construct - chrony env.yml --- # file: ./CentOS7.2/tasks/env.yml - block: - name: copy /etc/profile.d/alias.sh template template: src: alias.sh.j2 dest: /etc/profile.d/alias.sh owner: root group: root mode: 0644 become: yes tags: - construct - env selinux.yml --- # file: ./CentOS7.2/tasks/selinux.yml - block: - name: install selinux util yum: name: \u0026#34;{{ item }}\u0026#34; state: present with_items: - libselinux-python - libselinux-utils - selinux-policy - selinux-policy-targeted - name: disable selinux selinux: state: disabled become: yes tags: - construct - selinux provision/roles/CentOS7.2/handlers main.yml --- # file: ./CentOS7.2/handlers/main.yml - block: - name: restart chronyd become: yes service: name: chronyd state: restarted enabled: yes provision/roles/CentOS7.2/templates alias.sh.j2 --- # {{ ansible_managed }} # /etc/profile.d/alias.sh alias ls=\u0026#34;ls -G\u0026#34; alias ll=\u0026#34;ls -lG\u0026#34; alias la=\u0026#34;ls -laG\u0026#34; chrony.conf.j2 --- # {{ ansible_managed }} # Use public servers from the pool.ntp.org project. # Please consider joining the pool (http://www.pool.ntp.org/join.html). server ntp.nict.jp iburst server ntp1.jst.mfeed.ad.jp iburst server ntp2.jst.mfeed.ad.jp iburst server ntp3.jst.mfeed.ad.jp iburst # Ignore stratum in source selection. stratumweight 0 # Record the rate at which the system clock gains/losses time. driftfile /var/lib/chrony/drift # Enable kernel RTC synchronization. rtcsync # In first three updates step the system clock instead of slew # if the adjustment is larger than 10 seconds. makestep 10 3 # Allow NTP client access from local network. #allow 192.168/16 # Listen for commands only on localhost. bindcmdaddress 127.0.0.1 bindcmdaddress ::1 # Serve time even if not synchronized to any NTP server. #local stratum 10 keyfile /etc/chrony.keys # Specify the key used as password for chronyc. commandkey 1 # Generate command key if missing. generatecommandkey # Disable logging of client accesses. noclientlog # Send a message to syslog if a clock adjustment is larger than 0.5 seconds. logchange 0.5 logdir /var/log/chrony #log measurements statistics tracking provision/roles/CentOS7.2/vars main.yml --- # file: ./CentOS7.2/vars/main.yml locale: ja_JP.UTF-8 keymap: jp106 timezone: Asia/Tokyo vagrantの実行 $ vagrant up --provision Bringing machine \u0026#39;web\u0026#39; up with \u0026#39;virtualbox\u0026#39; provider... Bringing machine \u0026#39;host\u0026#39; up with \u0026#39;virtualbox\u0026#39; provider... ==\u0026gt; web: Importing base box \u0026#39;bento/centos-7.2\u0026#39;... ==\u0026gt; web: Matching MAC address for NAT networking... ==\u0026gt; web: Checking if box \u0026#39;bento/centos-7.2\u0026#39; is up to date... ==\u0026gt; web: Setting the name of the VM: vagrant_web_1480400603229_26813 ==\u0026gt; web: Clearing any previously set network interfaces... ==\u0026gt; web: Preparing network interfaces based on configuration... web: Adapter 1: nat web: Adapter 2: hostonly ==\u0026gt; web: Forwarding ports... web: 22 (guest) =\u0026gt; 2222 (host) (adapter 1) ==\u0026gt; web: Booting VM... ==\u0026gt; web: Waiting for machine to boot. This may take a few minutes... web: SSH address: 127.0.0.1:2222 web: SSH username: vagrant web: SSH auth method: private key web: Warning: Remote connection disconnect. Retrying... web: Warning: Remote connection disconnect. Retrying... web: Warning: Remote connection disconnect. Retrying... web: web: Vagrant insecure key detected. Vagrant will automatically replace web: this with a newly generated keypair for better security. web: web: Inserting generated public key within guest... web: Removing insecure key from the guest if it\u0026#39;s present... web: Key inserted! Disconnecting and reconnecting using new SSH key... ==\u0026gt; web: Machine booted and ready! [web] GuestAdditions versions on your host (5.1.10) and guest (5.1.6) do not match. Loaded plugins: fastestmirror Determining fastest mirrors * base: ftp.riken.jp * extras: ftp.riken.jp * updates: ftp.riken.jp Package binutils-2.23.52.0.1-55.el7.x86_64 already installed and latest version Package 1:make-3.82-21.el7.x86_64 already installed and latest version Package bzip2-1.0.6-13.el7.x86_64 already installed and latest version Resolving Dependencies --\u0026gt; Running transaction check ---\u0026gt; Package gcc.x86_64 0:4.8.5-4.el7 will be installed --\u0026gt; Processing Dependency: cpp = 4.8.5-4.el7 for package: gcc-4.8.5-4.el7.x86_64 --\u0026gt; Processing Dependency: glibc-devel \u0026gt;= 2.2.90-12 for package: gcc-4.8.5-4.el7.x86_64 ---\u0026gt; Package kernel-devel.x86_64 0:3.10.0-327.el7 will be installed ---\u0026gt; Package perl.x86_64 4:5.16.3-286.el7 will be installed --\u0026gt; Processing Dependency: perl-libs = 4:5.16.3-286.el7 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Socket) \u0026gt;= 1.3 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Scalar::Util) \u0026gt;= 1.10 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl-macros for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl-libs for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(threads::shared) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(threads) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(constant) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Time::Local) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Time::HiRes) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Storable) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Socket) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Scalar::Util) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Pod::Simple::XHTML) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Pod::Simple::Search) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Getopt::Long) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Filter::Util::Call) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Temp) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec::Unix) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec::Functions) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Path) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Exporter) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Cwd) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Carp) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: libperl.so()(64bit) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Running transaction check ---\u0026gt; Package cpp.x86_64 0:4.8.5-4.el7 will be installed ---\u0026gt; Package glibc-devel.x86_64 0:2.17-106.el7_2.8 will be installed --\u0026gt; Processing Dependency: glibc-headers = 2.17-106.el7_2.8 for package: glibc-devel-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: glibc = 2.17-106.el7_2.8 for package: glibc-devel-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: glibc-headers for package: glibc-devel-2.17-106.el7_2.8.x86_64 ---\u0026gt; Package perl-Carp.noarch 0:1.26-244.el7 will be installed ---\u0026gt; Package perl-Exporter.noarch 0:5.68-3.el7 will be installed ---\u0026gt; Package perl-File-Path.noarch 0:2.09-2.el7 will be installed ---\u0026gt; Package perl-File-Temp.noarch 0:0.23.01-3.el7 will be installed ---\u0026gt; Package perl-Filter.x86_64 0:1.49-3.el7 will be installed ---\u0026gt; Package perl-Getopt-Long.noarch 0:2.40-2.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Usage) \u0026gt;= 1.14 for package: perl-Getopt-Long-2.40-2.el7.noarch --\u0026gt; Processing Dependency: perl(Text::ParseWords) for package: perl-Getopt-Long-2.40-2.el7.noarch ---\u0026gt; Package perl-PathTools.x86_64 0:3.40-5.el7 will be installed ---\u0026gt; Package perl-Pod-Simple.noarch 1:3.28-4.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Escapes) \u0026gt;= 1.04 for package: 1:perl-Pod-Simple-3.28-4.el7.noarch --\u0026gt; Processing Dependency: perl(Encode) for package: 1:perl-Pod-Simple-3.28-4.el7.noarch ---\u0026gt; Package perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 will be installed ---\u0026gt; Package perl-Socket.x86_64 0:2.010-3.el7 will be installed ---\u0026gt; Package perl-Storable.x86_64 0:2.45-3.el7 will be installed ---\u0026gt; Package perl-Time-HiRes.x86_64 4:1.9725-3.el7 will be installed ---\u0026gt; Package perl-Time-Local.noarch 0:1.2300-2.el7 will be installed ---\u0026gt; Package perl-constant.noarch 0:1.27-2.el7 will be installed ---\u0026gt; Package perl-libs.x86_64 4:5.16.3-286.el7 will be installed ---\u0026gt; Package perl-macros.x86_64 4:5.16.3-286.el7 will be installed ---\u0026gt; Package perl-threads.x86_64 0:1.87-4.el7 will be installed ---\u0026gt; Package perl-threads-shared.x86_64 0:1.43-6.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package glibc.x86_64 0:2.17-105.el7 will be updated --\u0026gt; Processing Dependency: glibc = 2.17-105.el7 for package: glibc-common-2.17-105.el7.x86_64 ---\u0026gt; Package glibc.x86_64 0:2.17-106.el7_2.8 will be an update ---\u0026gt; Package glibc-headers.x86_64 0:2.17-106.el7_2.8 will be installed --\u0026gt; Processing Dependency: kernel-headers \u0026gt;= 2.2.1 for package: glibc-headers-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: kernel-headers for package: glibc-headers-2.17-106.el7_2.8.x86_64 ---\u0026gt; Package perl-Encode.x86_64 0:2.51-7.el7 will be installed ---\u0026gt; Package perl-Pod-Escapes.noarch 1:1.04-286.el7 will be installed ---\u0026gt; Package perl-Pod-Usage.noarch 0:1.63-3.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Text) \u0026gt;= 3.15 for package: perl-Pod-Usage-1.63-3.el7.noarch --\u0026gt; Processing Dependency: perl-Pod-Perldoc for package: perl-Pod-Usage-1.63-3.el7.noarch ---\u0026gt; Package perl-Text-ParseWords.noarch 0:3.29-4.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package glibc-common.x86_64 0:2.17-105.el7 will be updated ---\u0026gt; Package glibc-common.x86_64 0:2.17-106.el7_2.8 will be an update ---\u0026gt; Package kernel-headers.x86_64 0:3.10.0-327.36.3.el7 will be installed ---\u0026gt; Package perl-Pod-Perldoc.noarch 0:3.20-4.el7 will be installed --\u0026gt; Processing Dependency: perl(parent) for package: perl-Pod-Perldoc-3.20-4.el7.noarch --\u0026gt; Processing Dependency: perl(HTTP::Tiny) for package: perl-Pod-Perldoc-3.20-4.el7.noarch ---\u0026gt; Package perl-podlators.noarch 0:2.5.1-3.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package perl-HTTP-Tiny.noarch 0:0.033-3.el7 will be installed ---\u0026gt; Package perl-parent.noarch 1:0.225-244.el7 will be installed --\u0026gt; Finished Dependency Resolution Dependencies Resolved ================================================================================ Package Arch Version Repository Size ================================================================================ Installing: gcc x86_64 4.8.5-4.el7 base 16 M kernel-devel x86_64 3.10.0-327.el7 base 11 M perl x86_64 4:5.16.3-286.el7 base 8.0 M Installing for dependencies: cpp x86_64 4.8.5-4.el7 base 5.9 M glibc-devel x86_64 2.17-106.el7_2.8 updates 1.0 M glibc-headers x86_64 2.17-106.el7_2.8 updates 663 k kernel-headers x86_64 3.10.0-327.36.3.el7 updates 3.2 M perl-Carp noarch 1.26-244.el7 base 19 k perl-Encode x86_64 2.51-7.el7 base 1.5 M perl-Exporter noarch 5.68-3.el7 base 28 k perl-File-Path noarch 2.09-2.el7 base 26 k perl-File-Temp noarch 0.23.01-3.el7 base 56 k perl-Filter x86_64 1.49-3.el7 base 76 k perl-Getopt-Long noarch 2.40-2.el7 base 56 k perl-HTTP-Tiny noarch 0.033-3.el7 base 38 k perl-PathTools x86_64 3.40-5.el7 base 82 k perl-Pod-Escapes noarch 1:1.04-286.el7 base 50 k perl-Pod-Perldoc noarch 3.20-4.el7 base 87 k perl-Pod-Simple noarch 1:3.28-4.el7 base 216 k perl-Pod-Usage noarch 1.63-3.el7 base 27 k perl-Scalar-List-Utils x86_64 1.27-248.el7 base 36 k perl-Socket x86_64 2.010-3.el7 base 49 k perl-Storable x86_64 2.45-3.el7 base 77 k perl-Text-ParseWords noarch 3.29-4.el7 base 14 k perl-Time-HiRes x86_64 4:1.9725-3.el7 base 45 k perl-Time-Local noarch 1.2300-2.el7 base 24 k perl-constant noarch 1.27-2.el7 base 19 k perl-libs x86_64 4:5.16.3-286.el7 base 687 k perl-macros x86_64 4:5.16.3-286.el7 base 43 k perl-parent noarch 1:0.225-244.el7 base 12 k perl-podlators noarch 2.5.1-3.el7 base 112 k perl-threads x86_64 1.87-4.el7 base 49 k perl-threads-shared x86_64 1.43-6.el7 base 39 k Updating for dependencies: glibc x86_64 2.17-106.el7_2.8 updates 3.6 M glibc-common x86_64 2.17-106.el7_2.8 updates 11 M Transaction Summary ================================================================================ Install 3 Packages (\u0026#43;30 Dependent packages) Upgrade ( 2 Dependent packages) Total download size: 64 M Downloading packages: Delta RPMs disabled because /usr/bin/applydeltarpm not installed. warning: /var/cache/yum/x86_64/7/updates/packages/glibc-devel-2.17-106.el7_2.8.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY Public key for glibc-devel-2.17-106.el7_2.8.x86_64.rpm is not installed Public key for cpp-4.8.5-4.el7.x86_64.rpm is not installed -------------------------------------------------------------------------------- Total 3.8 MB/s | 64 MB 00:16 Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 Importing GPG key 0xF4A80EB5: Userid : \u0026#34;CentOS-7 Key (CentOS 7 Official Signing Key) \u0026lt;security@centos.org\u0026gt;\u0026#34; Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5 Package : centos-release-7-2.1511.el7.centos.2.10.x86_64 (@anaconda) From : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 Running transaction check Running transaction test Transaction test succeeded Running transaction Warning: RPMDB altered outside of yum. Updating : glibc-2.17-106.el7_2.8.x86_64 1/37 Updating : glibc-common-2.17-106.el7_2.8.x86_64 2/37 Installing : 1:perl-parent-0.225-244.el7.noarch 3/37 Installing : perl-HTTP-Tiny-0.033-3.el7.noarch 4/37 Installing : perl-podlators-2.5.1-3.el7.noarch 5/37 Installing : perl-Pod-Perldoc-3.20-4.el7.noarch 6/37 Installing : 1:perl-Pod-Escapes-1.04-286.el7.noarch 7/37 Installing : perl-Text-ParseWords-3.29-4.el7.noarch 8/37 Installing : perl-Encode-2.51-7.el7.x86_64 9/37 Installing : perl-Pod-Usage-1.63-3.el7.noarch 10/37 Installing : 4:perl-libs-5.16.3-286.el7.x86_64 11/37 Installing : 4:perl-macros-5.16.3-286.el7.x86_64 12/37 Installing : perl-Storable-2.45-3.el7.x86_64 13/37 Installing : perl-Exporter-5.68-3.el7.noarch 14/37 Installing : perl-constant-1.27-2.el7.noarch 15/37 Installing : perl-Time-Local-1.2300-2.el7.noarch 16/37 Installing : perl-Socket-2.010-3.el7.x86_64 17/37 Installing : perl-Carp-1.26-244.el7.noarch 18/37 Installing : 4:perl-Time-HiRes-1.9725-3.el7.x86_64 19/37 Installing : perl-PathTools-3.40-5.el7.x86_64 20/37 Installing : perl-Scalar-List-Utils-1.27-248.el7.x86_64 21/37 Installing : perl-File-Temp-0.23.01-3.el7.noarch 22/37 Installing : perl-File-Path-2.09-2.el7.noarch 23/37 Installing : perl-threads-shared-1.43-6.el7.x86_64 24/37 Installing : perl-threads-1.87-4.el7.x86_64 25/37 Installing : perl-Filter-1.49-3.el7.x86_64 26/37 Installing : 1:perl-Pod-Simple-3.28-4.el7.noarch 27/37 Installing : perl-Getopt-Long-2.40-2.el7.noarch 28/37 Installing : 4:perl-5.16.3-286.el7.x86_64 29/37 Installing : cpp-4.8.5-4.el7.x86_64 30/37 Installing : kernel-headers-3.10.0-327.36.3.el7.x86_64 31/37 Installing : glibc-headers-2.17-106.el7_2.8.x86_64 32/37 Installing : glibc-devel-2.17-106.el7_2.8.x86_64 33/37 Installing : gcc-4.8.5-4.el7.x86_64 34/37 Installing : kernel-devel-3.10.0-327.el7.x86_64 35/37 Cleanup : glibc-2.17-105.el7.x86_64 36/37 Cleanup : glibc-common-2.17-105.el7.x86_64 37/37 Verifying : perl-HTTP-Tiny-0.033-3.el7.noarch 1/37 Verifying : gcc-4.8.5-4.el7.x86_64 2/37 Verifying : perl-threads-shared-1.43-6.el7.x86_64 3/37 Verifying : perl-Storable-2.45-3.el7.x86_64 4/37 Verifying : kernel-headers-3.10.0-327.36.3.el7.x86_64 5/37 Verifying : perl-Exporter-5.68-3.el7.noarch 6/37 Verifying : perl-constant-1.27-2.el7.noarch 7/37 Verifying : perl-PathTools-3.40-5.el7.x86_64 8/37 Verifying : 4:perl-libs-5.16.3-286.el7.x86_64 9/37 Verifying : 4:perl-macros-5.16.3-286.el7.x86_64 10/37 Verifying : 1:perl-Pod-Escapes-1.04-286.el7.noarch 11/37 Verifying : 1:perl-parent-0.225-244.el7.noarch 12/37 Verifying : 4:perl-5.16.3-286.el7.x86_64 13/37 Verifying : glibc-devel-2.17-106.el7_2.8.x86_64 14/37 Verifying : perl-File-Temp-0.23.01-3.el7.noarch 15/37 Verifying : 1:perl-Pod-Simple-3.28-4.el7.noarch 16/37 Verifying : glibc-headers-2.17-106.el7_2.8.x86_64 17/37 Verifying : perl-Time-Local-1.2300-2.el7.noarch 18/37 Verifying : glibc-common-2.17-106.el7_2.8.x86_64 19/37 Verifying : perl-Pod-Perldoc-3.20-4.el7.noarch 20/37 Verifying : perl-Socket-2.010-3.el7.x86_64 21/37 Verifying : perl-Carp-1.26-244.el7.noarch 22/37 Verifying : perl-podlators-2.5.1-3.el7.noarch 23/37 Verifying : 4:perl-Time-HiRes-1.9725-3.el7.x86_64 24/37 Verifying : perl-Scalar-List-Utils-1.27-248.el7.x86_64 25/37 Verifying : glibc-2.17-106.el7_2.8.x86_64 26/37 Verifying : perl-Pod-Usage-1.63-3.el7.noarch 27/37 Verifying : perl-Encode-2.51-7.el7.x86_64 28/37 Verifying : perl-Getopt-Long-2.40-2.el7.noarch 29/37 Verifying : kernel-devel-3.10.0-327.el7.x86_64 30/37 Verifying : cpp-4.8.5-4.el7.x86_64 31/37 Verifying : perl-File-Path-2.09-2.el7.noarch 32/37 Verifying : perl-threads-1.87-4.el7.x86_64 33/37 Verifying : perl-Filter-1.49-3.el7.x86_64 34/37 Verifying : perl-Text-ParseWords-3.29-4.el7.noarch 35/37 Verifying : glibc-common-2.17-105.el7.x86_64 36/37 Verifying : glibc-2.17-105.el7.x86_64 37/37 Installed: gcc.x86_64 0:4.8.5-4.el7 kernel-devel.x86_64 0:3.10.0-327.el7 perl.x86_64 4:5.16.3-286.el7 Dependency Installed: cpp.x86_64 0:4.8.5-4.el7 glibc-devel.x86_64 0:2.17-106.el7_2.8 glibc-headers.x86_64 0:2.17-106.el7_2.8 kernel-headers.x86_64 0:3.10.0-327.36.3.el7 perl-Carp.noarch 0:1.26-244.el7 perl-Encode.x86_64 0:2.51-7.el7 perl-Exporter.noarch 0:5.68-3.el7 perl-File-Path.noarch 0:2.09-2.el7 perl-File-Temp.noarch 0:0.23.01-3.el7 perl-Filter.x86_64 0:1.49-3.el7 perl-Getopt-Long.noarch 0:2.40-2.el7 perl-HTTP-Tiny.noarch 0:0.033-3.el7 perl-PathTools.x86_64 0:3.40-5.el7 perl-Pod-Escapes.noarch 1:1.04-286.el7 perl-Pod-Perldoc.noarch 0:3.20-4.el7 perl-Pod-Simple.noarch 1:3.28-4.el7 perl-Pod-Usage.noarch 0:1.63-3.el7 perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 perl-Socket.x86_64 0:2.010-3.el7 perl-Storable.x86_64 0:2.45-3.el7 perl-Text-ParseWords.noarch 0:3.29-4.el7 perl-Time-HiRes.x86_64 4:1.9725-3.el7 perl-Time-Local.noarch 0:1.2300-2.el7 perl-constant.noarch 0:1.27-2.el7 perl-libs.x86_64 4:5.16.3-286.el7 perl-macros.x86_64 4:5.16.3-286.el7 perl-parent.noarch 1:0.225-244.el7 perl-podlators.noarch 0:2.5.1-3.el7 perl-threads.x86_64 0:1.87-4.el7 perl-threads-shared.x86_64 0:1.43-6.el7 Dependency Updated: glibc.x86_64 0:2.17-106.el7_2.8 glibc-common.x86_64 0:2.17-106.el7_2.8 Complete! Copy iso file /Applications/VirtualBox.app/Contents/MacOS/VBoxGuestAdditions.iso into the box /tmp/VBoxGuestAdditions.iso mount: /dev/loop0 is write-protected, mounting read-only Installing Virtualbox Guest Additions 5.1.10 - guest version is 5.1.6 Verifying archive integrity... All good. Uncompressing VirtualBox 5.1.10 Guest Additions for Linux........... VirtualBox Guest Additions installer Removing installed version 5.1.6 of VirtualBox Guest Additions... Copying additional installer modules ... Installing additional modules ... vboxadd.sh: Building Guest Additions kernel modules. vboxadd.sh: You should restart your guest to make sure the new modules are actually used. vboxadd.sh: Starting the VirtualBox Guest Additions. Could not find the X.Org or XFree86 Window System, skipping. ==\u0026gt; web: Checking for guest additions in VM... ==\u0026gt; web: Setting hostname... ==\u0026gt; web: Configuring and enabling network interfaces... ==\u0026gt; web: Mounting shared folders... web: /vagrant =\u0026gt; /Users/XXXXX/development/bitbucket.org/vagrant ==\u0026gt; host: Importing base box \u0026#39;bento/centos-7.2\u0026#39;... ==\u0026gt; host: Matching MAC address for NAT networking... ==\u0026gt; host: Checking if box \u0026#39;bento/centos-7.2\u0026#39; is up to date... ==\u0026gt; host: Setting the name of the VM: vagrant_host_1480400782463_92110 ==\u0026gt; host: Fixed port collision for 22 =\u0026gt; 2222. Now on port 2200. ==\u0026gt; host: Clearing any previously set network interfaces... ==\u0026gt; host: Preparing network interfaces based on configuration... host: Adapter 1: nat host: Adapter 2: hostonly ==\u0026gt; host: Forwarding ports... host: 22 (guest) =\u0026gt; 2200 (host) (adapter 1) ==\u0026gt; host: Booting VM... ==\u0026gt; host: Waiting for machine to boot. This may take a few minutes... host: SSH address: 127.0.0.1:2200 host: SSH username: vagrant host: SSH auth method: private key host: Warning: Remote connection disconnect. Retrying... host: Warning: Remote connection disconnect. Retrying... host: Warning: Remote connection disconnect. Retrying... host: host: Vagrant insecure key detected. Vagrant will automatically replace host: this with a newly generated keypair for better security. host: host: Inserting generated public key within guest... host: Removing insecure key from the guest if it\u0026#39;s present... host: Key inserted! Disconnecting and reconnecting using new SSH key... ==\u0026gt; host: Machine booted and ready! [host] GuestAdditions versions on your host (5.1.10) and guest (5.1.6) do not match. Loaded plugins: fastestmirror Determining fastest mirrors * base: ftp.iij.ad.jp * extras: ftp.iij.ad.jp * updates: ftp.iij.ad.jp Package binutils-2.23.52.0.1-55.el7.x86_64 already installed and latest version Package 1:make-3.82-21.el7.x86_64 already installed and latest version Package bzip2-1.0.6-13.el7.x86_64 already installed and latest version Resolving Dependencies --\u0026gt; Running transaction check ---\u0026gt; Package gcc.x86_64 0:4.8.5-4.el7 will be installed --\u0026gt; Processing Dependency: cpp = 4.8.5-4.el7 for package: gcc-4.8.5-4.el7.x86_64 --\u0026gt; Processing Dependency: glibc-devel \u0026gt;= 2.2.90-12 for package: gcc-4.8.5-4.el7.x86_64 ---\u0026gt; Package kernel-devel.x86_64 0:3.10.0-327.el7 will be installed ---\u0026gt; Package perl.x86_64 4:5.16.3-286.el7 will be installed --\u0026gt; Processing Dependency: perl-libs = 4:5.16.3-286.el7 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Socket) \u0026gt;= 1.3 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Scalar::Util) \u0026gt;= 1.10 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl-macros for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl-libs for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(threads::shared) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(threads) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(constant) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Time::Local) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Time::HiRes) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Storable) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Socket) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Scalar::Util) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Pod::Simple::XHTML) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Pod::Simple::Search) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Getopt::Long) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Filter::Util::Call) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Temp) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec::Unix) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec::Functions) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Path) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Exporter) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Cwd) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Carp) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: libperl.so()(64bit) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Running transaction check ---\u0026gt; Package cpp.x86_64 0:4.8.5-4.el7 will be installed ---\u0026gt; Package glibc-devel.x86_64 0:2.17-106.el7_2.8 will be installed --\u0026gt; Processing Dependency: glibc-headers = 2.17-106.el7_2.8 for package: glibc-devel-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: glibc = 2.17-106.el7_2.8 for package: glibc-devel-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: glibc-headers for package: glibc-devel-2.17-106.el7_2.8.x86_64 ---\u0026gt; Package perl-Carp.noarch 0:1.26-244.el7 will be installed ---\u0026gt; Package perl-Exporter.noarch 0:5.68-3.el7 will be installed ---\u0026gt; Package perl-File-Path.noarch 0:2.09-2.el7 will be installed ---\u0026gt; Package perl-File-Temp.noarch 0:0.23.01-3.el7 will be installed ---\u0026gt; Package perl-Filter.x86_64 0:1.49-3.el7 will be installed ---\u0026gt; Package perl-Getopt-Long.noarch 0:2.40-2.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Usage) \u0026gt;= 1.14 for package: perl-Getopt-Long-2.40-2.el7.noarch --\u0026gt; Processing Dependency: perl(Text::ParseWords) for package: perl-Getopt-Long-2.40-2.el7.noarch ---\u0026gt; Package perl-PathTools.x86_64 0:3.40-5.el7 will be installed ---\u0026gt; Package perl-Pod-Simple.noarch 1:3.28-4.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Escapes) \u0026gt;= 1.04 for package: 1:perl-Pod-Simple-3.28-4.el7.noarch --\u0026gt; Processing Dependency: perl(Encode) for package: 1:perl-Pod-Simple-3.28-4.el7.noarch ---\u0026gt; Package perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 will be installed ---\u0026gt; Package perl-Socket.x86_64 0:2.010-3.el7 will be installed ---\u0026gt; Package perl-Storable.x86_64 0:2.45-3.el7 will be installed ---\u0026gt; Package perl-Time-HiRes.x86_64 4:1.9725-3.el7 will be installed ---\u0026gt; Package perl-Time-Local.noarch 0:1.2300-2.el7 will be installed ---\u0026gt; Package perl-constant.noarch 0:1.27-2.el7 will be installed ---\u0026gt; Package perl-libs.x86_64 4:5.16.3-286.el7 will be installed ---\u0026gt; Package perl-macros.x86_64 4:5.16.3-286.el7 will be installed ---\u0026gt; Package perl-threads.x86_64 0:1.87-4.el7 will be installed ---\u0026gt; Package perl-threads-shared.x86_64 0:1.43-6.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package glibc.x86_64 0:2.17-105.el7 will be updated --\u0026gt; Processing Dependency: glibc = 2.17-105.el7 for package: glibc-common-2.17-105.el7.x86_64 ---\u0026gt; Package glibc.x86_64 0:2.17-106.el7_2.8 will be an update ---\u0026gt; Package glibc-headers.x86_64 0:2.17-106.el7_2.8 will be installed --\u0026gt; Processing Dependency: kernel-headers \u0026gt;= 2.2.1 for package: glibc-headers-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: kernel-headers for package: glibc-headers-2.17-106.el7_2.8.x86_64 ---\u0026gt; Package perl-Encode.x86_64 0:2.51-7.el7 will be installed ---\u0026gt; Package perl-Pod-Escapes.noarch 1:1.04-286.el7 will be installed ---\u0026gt; Package perl-Pod-Usage.noarch 0:1.63-3.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Text) \u0026gt;= 3.15 for package: perl-Pod-Usage-1.63-3.el7.noarch --\u0026gt; Processing Dependency: perl-Pod-Perldoc for package: perl-Pod-Usage-1.63-3.el7.noarch ---\u0026gt; Package perl-Text-ParseWords.noarch 0:3.29-4.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package glibc-common.x86_64 0:2.17-105.el7 will be updated ---\u0026gt; Package glibc-common.x86_64 0:2.17-106.el7_2.8 will be an update ---\u0026gt; Package kernel-headers.x86_64 0:3.10.0-327.36.3.el7 will be installed ---\u0026gt; Package perl-Pod-Perldoc.noarch 0:3.20-4.el7 will be installed --\u0026gt; Processing Dependency: perl(parent) for package: perl-Pod-Perldoc-3.20-4.el7.noarch --\u0026gt; Processing Dependency: perl(HTTP::Tiny) for package: perl-Pod-Perldoc-3.20-4.el7.noarch ---\u0026gt; Package perl-podlators.noarch 0:2.5.1-3.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package perl-HTTP-Tiny.noarch 0:0.033-3.el7 will be installed ---\u0026gt; Package perl-parent.noarch 1:0.225-244.el7 will be installed --\u0026gt; Finished Dependency Resolution Dependencies Resolved ================================================================================ Package Arch Version Repository Size ================================================================================ Installing: gcc x86_64 4.8.5-4.el7 base 16 M kernel-devel x86_64 3.10.0-327.el7 base 11 M perl x86_64 4:5.16.3-286.el7 base 8.0 M Installing for dependencies: cpp x86_64 4.8.5-4.el7 base 5.9 M glibc-devel x86_64 2.17-106.el7_2.8 updates 1.0 M glibc-headers x86_64 2.17-106.el7_2.8 updates 663 k kernel-headers x86_64 3.10.0-327.36.3.el7 updates 3.2 M perl-Carp noarch 1.26-244.el7 base 19 k perl-Encode x86_64 2.51-7.el7 base 1.5 M perl-Exporter noarch 5.68-3.el7 base 28 k perl-File-Path noarch 2.09-2.el7 base 26 k perl-File-Temp noarch 0.23.01-3.el7 base 56 k perl-Filter x86_64 1.49-3.el7 base 76 k perl-Getopt-Long noarch 2.40-2.el7 base 56 k perl-HTTP-Tiny noarch 0.033-3.el7 base 38 k perl-PathTools x86_64 3.40-5.el7 base 82 k perl-Pod-Escapes noarch 1:1.04-286.el7 base 50 k perl-Pod-Perldoc noarch 3.20-4.el7 base 87 k perl-Pod-Simple noarch 1:3.28-4.el7 base 216 k perl-Pod-Usage noarch 1.63-3.el7 base 27 k perl-Scalar-List-Utils x86_64 1.27-248.el7 base 36 k perl-Socket x86_64 2.010-3.el7 base 49 k perl-Storable x86_64 2.45-3.el7 base 77 k perl-Text-ParseWords noarch 3.29-4.el7 base 14 k perl-Time-HiRes x86_64 4:1.9725-3.el7 base 45 k perl-Time-Local noarch 1.2300-2.el7 base 24 k perl-constant noarch 1.27-2.el7 base 19 k perl-libs x86_64 4:5.16.3-286.el7 base 687 k perl-macros x86_64 4:5.16.3-286.el7 base 43 k perl-parent noarch 1:0.225-244.el7 base 12 k perl-podlators noarch 2.5.1-3.el7 base 112 k perl-threads x86_64 1.87-4.el7 base 49 k perl-threads-shared x86_64 1.43-6.el7 base 39 k Updating for dependencies: glibc x86_64 2.17-106.el7_2.8 updates 3.6 M glibc-common x86_64 2.17-106.el7_2.8 updates 11 M Transaction Summary ================================================================================ Install 3 Packages (\u0026#43;30 Dependent packages) Upgrade ( 2 Dependent packages) Total download size: 64 M Downloading packages: Delta RPMs disabled because /usr/bin/applydeltarpm not installed. Public key for glibc-devel-2.17-106.el7_2.8.x86_64.rpm is not installed warning: /var/cache/yum/x86_64/7/updates/packages/glibc-devel-2.17-106.el7_2.8.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY Public key for cpp-4.8.5-4.el7.x86_64.rpm is not installed -------------------------------------------------------------------------------- Total 6.0 MB/s | 64 MB 00:10 Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 Importing GPG key 0xF4A80EB5: Userid : \u0026#34;CentOS-7 Key (CentOS 7 Official Signing Key) \u0026lt;security@centos.org\u0026gt;\u0026#34; Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5 Package : centos-release-7-2.1511.el7.centos.2.10.x86_64 (@anaconda) From : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 Running transaction check Running transaction test Transaction test succeeded Running transaction Warning: RPMDB altered outside of yum. Updating : glibc-2.17-106.el7_2.8.x86_64 1/37 Updating : glibc-common-2.17-106.el7_2.8.x86_64 2/37 Installing : 1:perl-parent-0.225-244.el7.noarch 3/37 Installing : perl-HTTP-Tiny-0.033-3.el7.noarch 4/37 Installing : perl-podlators-2.5.1-3.el7.noarch 5/37 Installing : perl-Pod-Perldoc-3.20-4.el7.noarch 6/37 Installing : 1:perl-Pod-Escapes-1.04-286.el7.noarch 7/37 Installing : perl-Text-ParseWords-3.29-4.el7.noarch 8/37 Installing : perl-Encode-2.51-7.el7.x86_64 9/37 Installing : perl-Pod-Usage-1.63-3.el7.noarch 10/37 Installing : 4:perl-libs-5.16.3-286.el7.x86_64 11/37 Installing : 4:perl-macros-5.16.3-286.el7.x86_64 12/37 Installing : perl-Storable-2.45-3.el7.x86_64 13/37 Installing : perl-Exporter-5.68-3.el7.noarch 14/37 Installing : perl-constant-1.27-2.el7.noarch 15/37 Installing : perl-Time-Local-1.2300-2.el7.noarch 16/37 Installing : perl-Socket-2.010-3.el7.x86_64 17/37 Installing : perl-Carp-1.26-244.el7.noarch 18/37 Installing : 4:perl-Time-HiRes-1.9725-3.el7.x86_64 19/37 Installing : perl-PathTools-3.40-5.el7.x86_64 20/37 Installing : perl-Scalar-List-Utils-1.27-248.el7.x86_64 21/37 Installing : perl-File-Temp-0.23.01-3.el7.noarch 22/37 Installing : perl-File-Path-2.09-2.el7.noarch 23/37 Installing : perl-threads-shared-1.43-6.el7.x86_64 24/37 Installing : perl-threads-1.87-4.el7.x86_64 25/37 Installing : perl-Filter-1.49-3.el7.x86_64 26/37 Installing : 1:perl-Pod-Simple-3.28-4.el7.noarch 27/37 Installing : perl-Getopt-Long-2.40-2.el7.noarch 28/37 Installing : 4:perl-5.16.3-286.el7.x86_64 29/37 Installing : cpp-4.8.5-4.el7.x86_64 30/37 Installing : kernel-headers-3.10.0-327.36.3.el7.x86_64 31/37 Installing : glibc-headers-2.17-106.el7_2.8.x86_64 32/37 Installing : glibc-devel-2.17-106.el7_2.8.x86_64 33/37 Installing : gcc-4.8.5-4.el7.x86_64 34/37 Installing : kernel-devel-3.10.0-327.el7.x86_64 35/37 Cleanup : glibc-2.17-105.el7.x86_64 36/37 Cleanup : glibc-common-2.17-105.el7.x86_64 37/37 Verifying : perl-HTTP-Tiny-0.033-3.el7.noarch 1/37 Verifying : gcc-4.8.5-4.el7.x86_64 2/37 Verifying : perl-threads-shared-1.43-6.el7.x86_64 3/37 Verifying : perl-Storable-2.45-3.el7.x86_64 4/37 Verifying : kernel-headers-3.10.0-327.36.3.el7.x86_64 5/37 Verifying : perl-Exporter-5.68-3.el7.noarch 6/37 Verifying : perl-constant-1.27-2.el7.noarch 7/37 Verifying : perl-PathTools-3.40-5.el7.x86_64 8/37 Verifying : 4:perl-libs-5.16.3-286.el7.x86_64 9/37 Verifying : 4:perl-macros-5.16.3-286.el7.x86_64 10/37 Verifying : 1:perl-Pod-Escapes-1.04-286.el7.noarch 11/37 Verifying : 1:perl-parent-0.225-244.el7.noarch 12/37 Verifying : 4:perl-5.16.3-286.el7.x86_64 13/37 Verifying : glibc-devel-2.17-106.el7_2.8.x86_64 14/37 Verifying : perl-File-Temp-0.23.01-3.el7.noarch 15/37 Verifying : 1:perl-Pod-Simple-3.28-4.el7.noarch 16/37 Verifying : glibc-headers-2.17-106.el7_2.8.x86_64 17/37 Verifying : perl-Time-Local-1.2300-2.el7.noarch 18/37 Verifying : glibc-common-2.17-106.el7_2.8.x86_64 19/37 Verifying : perl-Pod-Perldoc-3.20-4.el7.noarch 20/37 Verifying : perl-Socket-2.010-3.el7.x86_64 21/37 Verifying : perl-Carp-1.26-244.el7.noarch 22/37 Verifying : perl-podlators-2.5.1-3.el7.noarch 23/37 Verifying : 4:perl-Time-HiRes-1.9725-3.el7.x86_64 24/37 Verifying : perl-Scalar-List-Utils-1.27-248.el7.x86_64 25/37 Verifying : glibc-2.17-106.el7_2.8.x86_64 26/37 Verifying : perl-Pod-Usage-1.63-3.el7.noarch 27/37 Verifying : perl-Encode-2.51-7.el7.x86_64 28/37 Verifying : perl-Getopt-Long-2.40-2.el7.noarch 29/37 Verifying : kernel-devel-3.10.0-327.el7.x86_64 30/37 Verifying : cpp-4.8.5-4.el7.x86_64 31/37 Verifying : perl-File-Path-2.09-2.el7.noarch 32/37 Verifying : perl-threads-1.87-4.el7.x86_64 33/37 Verifying : perl-Filter-1.49-3.el7.x86_64 34/37 Verifying : perl-Text-ParseWords-3.29-4.el7.noarch 35/37 Verifying : glibc-common-2.17-105.el7.x86_64 36/37 Verifying : glibc-2.17-105.el7.x86_64 37/37 Installed: gcc.x86_64 0:4.8.5-4.el7 kernel-devel.x86_64 0:3.10.0-327.el7 perl.x86_64 4:5.16.3-286.el7 Dependency Installed: cpp.x86_64 0:4.8.5-4.el7 glibc-devel.x86_64 0:2.17-106.el7_2.8 glibc-headers.x86_64 0:2.17-106.el7_2.8 kernel-headers.x86_64 0:3.10.0-327.36.3.el7 perl-Carp.noarch 0:1.26-244.el7 perl-Encode.x86_64 0:2.51-7.el7 perl-Exporter.noarch 0:5.68-3.el7 perl-File-Path.noarch 0:2.09-2.el7 perl-File-Temp.noarch 0:0.23.01-3.el7 perl-Filter.x86_64 0:1.49-3.el7 perl-Getopt-Long.noarch 0:2.40-2.el7 perl-HTTP-Tiny.noarch 0:0.033-3.el7 perl-PathTools.x86_64 0:3.40-5.el7 perl-Pod-Escapes.noarch 1:1.04-286.el7 perl-Pod-Perldoc.noarch 0:3.20-4.el7 perl-Pod-Simple.noarch 1:3.28-4.el7 perl-Pod-Usage.noarch 0:1.63-3.el7 perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 perl-Socket.x86_64 0:2.010-3.el7 perl-Storable.x86_64 0:2.45-3.el7 perl-Text-ParseWords.noarch 0:3.29-4.el7 perl-Time-HiRes.x86_64 4:1.9725-3.el7 perl-Time-Local.noarch 0:1.2300-2.el7 perl-constant.noarch 0:1.27-2.el7 perl-libs.x86_64 4:5.16.3-286.el7 perl-macros.x86_64 4:5.16.3-286.el7 perl-parent.noarch 1:0.225-244.el7 perl-podlators.noarch 0:2.5.1-3.el7 perl-threads.x86_64 0:1.87-4.el7 perl-threads-shared.x86_64 0:1.43-6.el7 Dependency Updated: glibc.x86_64 0:2.17-106.el7_2.8 glibc-common.x86_64 0:2.17-106.el7_2.8 Complete! Copy iso file /Applications/VirtualBox.app/Contents/MacOS/VBoxGuestAdditions.iso into the box /tmp/VBoxGuestAdditions.iso mount: /dev/loop0 is write-protected, mounting read-only Installing Virtualbox Guest Additions 5.1.10 - guest version is 5.1.6 Verifying archive integrity... All good. Uncompressing VirtualBox 5.1.10 Guest Additions for Linux........... VirtualBox Guest Additions installer Removing installed version 5.1.6 of VirtualBox Guest Additions... Copying additional installer modules ... Installing additional modules ... vboxadd.sh: Building Guest Additions kernel modules. vboxadd.sh: You should restart your guest to make sure the new modules are actually used. vboxadd.sh: Starting the VirtualBox Guest Additions. Could not find the X.Org or XFree86 Window System, skipping. ==\u0026gt; host: Checking for guest additions in VM... ==\u0026gt; host: Setting hostname... ==\u0026gt; host: Configuring and enabling network interfaces... ==\u0026gt; host: Mounting shared folders... host: /vagrant =\u0026gt; /Users/XXXXX/development/bitbucket.org/vagrant/provision ==\u0026gt; host: Running provisioner: ansible_local... host: Installing Ansible... host: Running ansible-playbook... cd /vagrant \u0026amp;\u0026amp; PYTHONUNBUFFERED=1 ANSIBLE_FORCE_COLOR=true ansible-playbook --limit=\u0026#34;host\u0026#34; --inventory-file=host -v site.yml Using /etc/ansible/ansible.cfg as config file PLAY [host] ******************************************************************** TASK [setup] ******************************************************************* ok: [host] TASK [CentOS7.2 : yum update all] ********************************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;msg\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;results\u0026#34;: [\u0026#34;Loaded plugins: fastestmirror\\nLoading mirror speeds from cached hostfile\\n * base: ftp.iij.ad.jp\\n * epel: ftp.riken.jp\\n * extras: ftp.iij.ad.jp\\n * updates: ftp.iij.ad.jp\\nResolving Dependencies\\n--\u0026gt; Running transaction check\\n---\u0026gt; Package NetworkManager.x86_64 1:1.0.6-27.el7 will be updated\\n---\u0026gt; Package NetworkManager.x86_64 1:1.0.6-31.el7_2 will be an update\\n---\u0026gt; Package NetworkManager-libnm.x86_64 1:1.0.6-27.el7 will be updated\\n---\u0026gt; Package NetworkManager-libnm.x86_64 1:1.0.6-31.el7_2 will be an update\\n---\u0026gt; Package NetworkManager-team.x86_64 1:1.0.6-27.el7 will be updated\\n---\u0026gt; Package NetworkManager-team.x86_64 1:1.0.6-31.el7_2 will be an update\\n---\u0026gt; Package NetworkManager-tui.x86_64 1:1.0.6-27.el7 will be updated\\n---\u0026gt; Package NetworkManager-tui.x86_64 1:1.0.6-31.el7_2 will be an update\\n---\u0026gt; Package avahi-autoipd.x86_64 0:0.6.31-15.el7 will be updated\\n---\u0026gt; Package avahi-autoipd.x86_64 0:0.6.31-15.el7_2.1 will be an update\\n---\u0026gt; Package avahi-libs.x86_64 0:0.6.31-15.el7 will be updated\\n---\u0026gt; Package avahi-libs.x86_64 0:0.6.31-15.el7_2.1 will be an update\\n---\u0026gt; Package bash.x86_64 0:4.2.46-19.el7 will be updated\\n---\u0026gt; Package bash.x86_64 0:4.2.46-20.el7_2 will be an update\\n---\u0026gt; Package bind-libs-lite.x86_64 32:9.9.4-29.el7 will be updated\\n---\u0026gt; Package bind-libs-lite.x86_64 32:9.9.4-29.el7_2.4 will be an update\\n---\u0026gt; Package bind-license.noarch 32:9.9.4-29.el7 will be updated\\n---\u0026gt; Package bind-license.noarch 32:9.9.4-29.el7_2.4 will be an update\\n---\u0026gt; Package ca-certificates.noarch 0:2015.2.4-71.el7 will be updated\\n---\u0026gt; Package ca-certificates.noarch 0:2015.2.6-70.1.el7_2 will be an update\\n---\u0026gt; Package chkconfig.x86_64 0:1.3.61-5.el7 will be updated\\n---\u0026gt; Package chkconfig.x86_64 0:1.3.61-5.el7_2.1 will be an update\\n---\u0026gt; Package coreutils.x86_64 0:8.22-15.el7 will be updated\\n---\u0026gt; Package coreutils.x86_64 0:8.22-15.el7_2.1 will be an update\\n---\u0026gt; Package cronie.x86_64 0:1.4.11-14.el7 will be updated\\n---\u0026gt; Package cronie.x86_64 0:1.4.11-14.el7_2.1 will be an update\\n---\u0026gt; Package cronie-anacron.x86_64 0:1.4.11-14.el7 will be updated\\n---\u0026gt; Package cronie-anacron.x86_64 0:1.4.11-14.el7_2.1 will be an update\\n---\u0026gt; Package cyrus-sasl-lib.x86_64 0:2.1.26-19.2.el7 will be updated\\n---\u0026gt; Package cyrus-sasl-lib.x86_64 0:2.1.26-20.el7_2 will be an update\\n---\u0026gt; Package dbus.x86_64 1:1.6.12-13.el7 will be updated\\n---\u0026gt; Package dbus.x86_64 1:1.6.12-14.el7_2 will be an update\\n---\u0026gt; Package dbus-libs.x86_64 1:1.6.12-13.el7 will be updated\\n---\u0026gt; Package dbus-libs.x86_64 1:1.6.12-14.el7_2 will be an update\\n---\u0026gt; Package device-mapper.x86_64 7:1.02.107-5.el7 will be updated\\n---\u0026gt; Package device-mapper.x86_64 7:1.02.107-5.el7_2.5 will be an update\\n---\u0026gt; Package device-mapper-event.x86_64 7:1.02.107-5.el7 will be updated\\n---\u0026gt; Package device-mapper-event.x86_64 7:1.02.107-5.el7_2.5 will be an update\\n---\u0026gt; Package device-mapper-event-libs.x86_64 7:1.02.107-5.el7 will be updated\\n---\u0026gt; Package device-mapper-event-libs.x86_64 7:1.02.107-5.el7_2.5 will be an update\\n---\u0026gt; Package device-mapper-libs.x86_64 7:1.02.107-5.el7 will be updated\\n---\u0026gt; Package device-mapper-libs.x86_64 7:1.02.107-5.el7_2.5 will be an update\\n---\u0026gt; Package device-mapper-persistent-data.x86_64 0:0.5.5-1.el7 will be updated\\n---\u0026gt; Package device-mapper-persistent-data.x86_64 0:0.6.2-1.el7_2 will be an update\\n---\u0026gt; Package dnsmasq.x86_64 0:2.66-14.el7_1 will be updated\\n---\u0026gt; Package dnsmasq.x86_64 0:2.66-14.el7_2.1 will be an update\\n---\u0026gt; Package dracut.x86_64 0:033-359.el7 will be updated\\n---\u0026gt; Package dracut.x86_64 0:033-360.el7_2.1 will be an update\\n---\u0026gt; Package dracut-config-rescue.x86_64 0:033-359.el7 will be updated\\n---\u0026gt; Package dracut-config-rescue.x86_64 0:033-360.el7_2.1 will be an update\\n---\u0026gt; Package dracut-network.x86_64 0:033-359.el7 will be updated\\n---\u0026gt; Package dracut-network.x86_64 0:033-360.el7_2.1 will be an update\\n---\u0026gt; Package gmp.x86_64 1:6.0.0-11.el7 will be updated\\n---\u0026gt; Package gmp.x86_64 1:6.0.0-12.el7_1 will be an update\\n---\u0026gt; Package gnutls.x86_64 0:3.3.8-12.el7_1.1 will be updated\\n---\u0026gt; Package gnutls.x86_64 0:3.3.8-14.el7_2 will be an update\\n---\u0026gt; Package grub2.x86_64 1:2.02-0.29.el7.centos will be updated\\n---\u0026gt; Package grub2.x86_64 1:2.02-0.34.el7.centos will be an update\\n---\u0026gt; Package grub2-tools.x86_64 1:2.02-0.29.el7.centos will be updated\\n---\u0026gt; Package grub2-tools.x86_64 1:2.02-0.34.el7.centos will be an update\\n---\u0026gt; Package gssproxy.x86_64 0:0.4.1-7.el7 will be updated\\n---\u0026gt; Package gssproxy.x86_64 0:0.4.1-8.el7_2 will be an update\\n---\u0026gt; Package initscripts.x86_64 0:9.49.30-1.el7 will be updated\\n---\u0026gt; Package initscripts.x86_64 0:9.49.30-1.el7_2.3 will be an update\\n---\u0026gt; Package iproute.x86_64 0:3.10.0-54.el7 will be updated\\n---\u0026gt; Package iproute.x86_64 0:3.10.0-54.el7_2.1 will be an update\\n---\u0026gt; Package kernel.x86_64 0:3.10.0-327.36.3.el7 will be installed\\n---\u0026gt; Package kernel-devel.x86_64 0:3.10.0-327.36.3.el7 will be installed\\n---\u0026gt; Package kernel-tools.x86_64 0:3.10.0-327.el7 will be updated\\n---\u0026gt; Package kernel-tools.x86_64 0:3.10.0-327.36.3.el7 will be an update\\n---\u0026gt; Package kernel-tools-libs.x86_64 0:3.10.0-327.el7 will be updated\\n---\u0026gt; Package kernel-tools-libs.x86_64 0:3.10.0-327.36.3.el7 will be an update\\n---\u0026gt; Package kexec-tools.x86_64 0:2.0.7-38.el7 will be updated\\n---\u0026gt; Package kexec-tools.x86_64 0:2.0.7-38.el7_2.1 will be an update\\n---\u0026gt; Package kmod.x86_64 0:20-5.el7 will be updated\\n---\u0026gt; Package kmod.x86_64 0:20-8.el7_2 will be an update\\n---\u0026gt; Package kmod-libs.x86_64 0:20-5.el7 will be updated\\n---\u0026gt; Package kmod-libs.x86_64 0:20-8.el7_2 will be an update\\n---\u0026gt; Package kpartx.x86_64 0:0.4.9-85.el7 will be updated\\n---\u0026gt; Package kpartx.x86_64 0:0.4.9-85.el7_2.6 will be an update\\n---\u0026gt; Package krb5-libs.x86_64 0:1.13.2-10.el7 will be updated\\n---\u0026gt; Package krb5-libs.x86_64 0:1.13.2-12.el7_2 will be an update\\n---\u0026gt; Package libblkid.x86_64 0:2.23.2-26.el7 will be updated\\n---\u0026gt; Package libblkid.x86_64 0:2.23.2-26.el7_2.3 will be an update\\n---\u0026gt; Package libgudev1.x86_64 0:219-19.el7 will be updated\\n---\u0026gt; Package libgudev1.x86_64 0:219-19.el7_2.13 will be an update\\n---\u0026gt; Package libmount.x86_64 0:2.23.2-26.el7 will be updated\\n---\u0026gt; Package libmount.x86_64 0:2.23.2-26.el7_2.3 will be an update\\n---\u0026gt; Package libndp.x86_64 0:1.2-4.el7 will be updated\\n---\u0026gt; Package libndp.x86_64 0:1.2-6.el7_2 will be an update\\n---\u0026gt; Package libssh2.x86_64 0:1.4.3-10.el7 will be updated\\n---\u0026gt; Package libssh2.x86_64 0:1.4.3-10.el7_2.1 will be an update\\n---\u0026gt; Package libtalloc.x86_64 0:2.1.2-1.el7 will be updated\\n---\u0026gt; Package libtalloc.x86_64 0:2.1.5-1.el7_2 will be an update\\n---\u0026gt; Package libteam.x86_64 0:1.17-5.el7 will be updated\\n---\u0026gt; Package libteam.x86_64 0:1.17-7.el7_2 will be an update\\n---\u0026gt; Package libtevent.x86_64 0:0.9.25-1.el7 will be updated\\n---\u0026gt; Package libtevent.x86_64 0:0.9.26-1.el7_2.1 will be an update\\n---\u0026gt; Package libuuid.x86_64 0:2.23.2-26.el7 will be updated\\n---\u0026gt; Package libuuid.x86_64 0:2.23.2-26.el7_2.3 will be an update\\n---\u0026gt; Package libxml2.x86_64 0:2.9.1-5.el7_1.2 will be updated\\n---\u0026gt; Package libxml2.x86_64 0:2.9.1-6.el7_2.3 will be an update\\n---\u0026gt; Package logrotate.x86_64 0:3.8.6-6.el7 will be updated\\n---\u0026gt; Package logrotate.x86_64 0:3.8.6-7.el7_2 will be an update\\n---\u0026gt; Package lvm2.x86_64 7:2.02.130-5.el7 will be updated\\n---\u0026gt; Package lvm2.x86_64 7:2.02.130-5.el7_2.5 will be an update\\n---\u0026gt; Package lvm2-libs.x86_64 7:2.02.130-5.el7 will be updated\\n---\u0026gt; Package lvm2-libs.x86_64 7:2.02.130-5.el7_2.5 will be an update\\n---\u0026gt; Package mariadb-libs.x86_64 1:5.5.44-2.el7.centos will be updated\\n---\u0026gt; Package mariadb-libs.x86_64 1:5.5.50-1.el7_2 will be an update\\n---\u0026gt; Package microcode_ctl.x86_64 2:2.1-12.el7 will be updated\\n---\u0026gt; Package microcode_ctl.x86_64 2:2.1-12.el7_2.1 will be an update\\n---\u0026gt; Package nfs-utils.x86_64 1:1.3.0-0.21.el7 will be updated\\n---\u0026gt; Package nfs-utils.x86_64 1:1.3.0-0.21.el7_2.1 will be an update\\n---\u0026gt; Package nspr.x86_64 0:4.10.8-2.el7_1 will be updated\\n---\u0026gt; Package nspr.x86_64 0:4.11.0-1.el7_2 will be an update\\n---\u0026gt; Package nss.x86_64 0:3.19.1-18.el7 will be updated\\n---\u0026gt; Package nss.x86_64 0:3.21.0-9.el7_2 will be an update\\n---\u0026gt; Package nss-softokn.x86_64 0:3.16.2.3-13.el7_1 will be updated\\n---\u0026gt; Package nss-softokn.x86_64 0:3.16.2.3-14.2.el7_2 will be an update\\n---\u0026gt; Package nss-softokn-freebl.x86_64 0:3.16.2.3-13.el7_1 will be updated\\n---\u0026gt; Package nss-softokn-freebl.x86_64 0:3.16.2.3-14.2.el7_2 will be an update\\n---\u0026gt; Package nss-sysinit.x86_64 0:3.19.1-18.el7 will be updated\\n---\u0026gt; Package nss-sysinit.x86_64 0:3.21.0-9.el7_2 will be an update\\n---\u0026gt; Package nss-tools.x86_64 0:3.19.1-18.el7 will be updated\\n---\u0026gt; Package nss-tools.x86_64 0:3.21.0-9.el7_2 will be an update\\n---\u0026gt; Package nss-util.x86_64 0:3.19.1-4.el7_1 will be updated\\n---\u0026gt; Package nss-util.x86_64 0:3.21.0-2.2.el7_2 will be an update\\n---\u0026gt; Package numactl-libs.x86_64 0:2.0.9-5.el7_1 will be updated\\n---\u0026gt; Package numactl-libs.x86_64 0:2.0.9-6.el7_2 will be an update\\n---\u0026gt; Package openldap.x86_64 0:2.4.40-8.el7 will be updated\\n---\u0026gt; Package openldap.x86_64 0:2.4.40-9.el7_2 will be an update\\n---\u0026gt; Package openssh.x86_64 0:6.6.1p1-22.el7 will be updated\\n---\u0026gt; Package openssh.x86_64 0:6.6.1p1-25.el7_2 will be an update\\n---\u0026gt; Package openssh-clients.x86_64 0:6.6.1p1-22.el7 will be updated\\n---\u0026gt; Package openssh-clients.x86_64 0:6.6.1p1-25.el7_2 will be an update\\n---\u0026gt; Package openssh-server.x86_64 0:6.6.1p1-22.el7 will be updated\\n---\u0026gt; Package openssh-server.x86_64 0:6.6.1p1-25.el7_2 will be an update\\n---\u0026gt; Package openssl.x86_64 1:1.0.1e-42.el7.9 will be updated\\n---\u0026gt; Package openssl.x86_64 1:1.0.1e-51.el7_2.7 will be an update\\n---\u0026gt; Package openssl-libs.x86_64 1:1.0.1e-42.el7.9 will be updated\\n---\u0026gt; Package openssl-libs.x86_64 1:1.0.1e-51.el7_2.7 will be an update\\n---\u0026gt; Package pcre.x86_64 0:8.32-15.el7 will be updated\\n---\u0026gt; Package pcre.x86_64 0:8.32-15.el7_2.1 will be an update\\n---\u0026gt; Package polkit.x86_64 0:0.112-5.el7 will be updated\\n---\u0026gt; Package polkit.x86_64 0:0.112-7.el7_2 will be an update\\n---\u0026gt; Package procps-ng.x86_64 0:3.3.10-3.el7 will be updated\\n---\u0026gt; Package procps-ng.x86_64 0:3.3.10-5.el7_2 will be an update\\n---\u0026gt; Package python.x86_64 0:2.7.5-34.el7 will be updated\\n---\u0026gt; Package python.x86_64 0:2.7.5-39.el7_2 will be an update\\n---\u0026gt; Package python-libs.x86_64 0:2.7.5-34.el7 will be updated\\n---\u0026gt; Package python-libs.x86_64 0:2.7.5-39.el7_2 will be an update\\n---\u0026gt; Package python-perf.x86_64 0:3.10.0-327.el7 will be updated\\n---\u0026gt; Package python-perf.x86_64 0:3.10.0-327.36.3.el7 will be an update\\n---\u0026gt; Package python-pyudev.noarch 0:0.15-7.el7 will be updated\\n---\u0026gt; Package python-pyudev.noarch 0:0.15-7.el7_2.1 will be an update\\n---\u0026gt; Package quota.x86_64 1:4.01-11.el7 will be updated\\n---\u0026gt; Package quota.x86_64 1:4.01-11.el7_2.1 will be an update\\n---\u0026gt; Package quota-nls.noarch 1:4.01-11.el7 will be updated\\n---\u0026gt; Package quota-nls.noarch 1:4.01-11.el7_2.1 will be an update\\n---\u0026gt; Package rdma.noarch 0:7.2_4.1_rc6-1.el7 will be updated\\n---\u0026gt; Package rdma.noarch 0:7.2_4.1_rc6-2.el7 will be an update\\n---\u0026gt; Package rpcbind.x86_64 0:0.2.0-32.el7 will be updated\\n---\u0026gt; Package rpcbind.x86_64 0:0.2.0-33.el7_2.1 will be an update\\n---\u0026gt; Package selinux-policy.noarch 0:3.13.1-60.el7 will be updated\\n---\u0026gt; Package selinux-policy.noarch 0:3.13.1-60.el7_2.9 will be an update\\n---\u0026gt; Package selinux-policy-devel.noarch 0:3.13.1-60.el7 will be updated\\n---\u0026gt; Package selinux-policy-devel.noarch 0:3.13.1-60.el7_2.9 will be an update\\n---\u0026gt; Package selinux-policy-targeted.noarch 0:3.13.1-60.el7 will be updated\\n---\u0026gt; Package selinux-policy-targeted.noarch 0:3.13.1-60.el7_2.9 will be an update\\n---\u0026gt; Package sudo.x86_64 0:1.8.6p7-16.el7 will be updated\\n---\u0026gt; Package sudo.x86_64 0:1.8.6p7-17.el7_2 will be an update\\n---\u0026gt; Package systemd.x86_64 0:219-19.el7 will be updated\\n---\u0026gt; Package systemd.x86_64 0:219-19.el7_2.13 will be an update\\n---\u0026gt; Package systemd-libs.x86_64 0:219-19.el7 will be updated\\n---\u0026gt; Package systemd-libs.x86_64 0:219-19.el7_2.13 will be an update\\n---\u0026gt; Package systemd-sysv.x86_64 0:219-19.el7 will be updated\\n---\u0026gt; Package systemd-sysv.x86_64 0:219-19.el7_2.13 will be an update\\n---\u0026gt; Package teamd.x86_64 0:1.17-5.el7 will be updated\\n---\u0026gt; Package teamd.x86_64 0:1.17-7.el7_2 will be an update\\n---\u0026gt; Package tuned.noarch 0:2.5.1-4.el7 will be updated\\n---\u0026gt; Package tuned.noarch 0:2.5.1-4.el7_2.6 will be an update\\n---\u0026gt; Package tzdata.noarch 0:2015g-1.el7 will be updated\\n---\u0026gt; Package tzdata.noarch 0:2016h-1.el7 will be an update\\n---\u0026gt; Package util-linux.x86_64 0:2.23.2-26.el7 will be updated\\n---\u0026gt; Package util-linux.x86_64 0:2.23.2-26.el7_2.3 will be an update\\n--\u0026gt; Finished Dependency Resolution\\n\\nDependencies Resolved\\n\\n================================================================================\\n Package Arch Version Repository\\n Size\\n================================================================================\\nInstalling:\\n kernel x86_64 3.10.0-327.36.3.el7 updates 33 M\\n kernel-devel x86_64 3.10.0-327.36.3.el7 updates 11 M\\nUpdating:\\n NetworkManager x86_64 1:1.0.6-31.el7_2 updates 2.0 M\\n NetworkManager-libnm x86_64 1:1.0.6-31.el7_2 updates 498 k\\n NetworkManager-team x86_64 1:1.0.6-31.el7_2 updates 132 k\\n NetworkManager-tui x86_64 1:1.0.6-31.el7_2 updates 212 k\\n avahi-autoipd x86_64 0.6.31-15.el7_2.1 updates 39 k\\n avahi-libs x86_64 0.6.31-15.el7_2.1 updates 61 k\\n bash x86_64 4.2.46-20.el7_2 updates 1.0 M\\n bind-libs-lite x86_64 32:9.9.4-29.el7_2.4 updates 724 k\\n bind-license noarch 32:9.9.4-29.el7_2.4 updates 82 k\\n ca-certificates noarch 2015.2.6-70.1.el7_2 updates 428 k\\n chkconfig x86_64 1.3.61-5.el7_2.1 updates 173 k\\n coreutils x86_64 8.22-15.el7_2.1 updates 3.2 M\\n cronie x86_64 1.4.11-14.el7_2.1 updates 90 k\\n cronie-anacron x86_64 1.4.11-14.el7_2.1 updates 35 k\\n cyrus-sasl-lib x86_64 2.1.26-20.el7_2 updates 155 k\\n dbus x86_64 1:1.6.12-14.el7_2 updates 306 k\\n dbus-libs x86_64 1:1.6.12-14.el7_2 updates 151 k\\n device-mapper x86_64 7:1.02.107-5.el7_2.5 updates 252 k\\n device-mapper-event x86_64 7:1.02.107-5.el7_2.5 updates 167 k\\n device-mapper-event-libs x86_64 7:1.02.107-5.el7_2.5 updates 169 k\\n device-mapper-libs x86_64 7:1.02.107-5.el7_2.5 updates 305 k\\n device-mapper-persistent-data x86_64 0.6.2-1.el7_2 updates 366 k\\n dnsmasq x86_64 2.66-14.el7_2.1 updates 229 k\\n dracut x86_64 033-360.el7_2.1 updates 311 k\\n dracut-config-rescue x86_64 033-360.el7_2.1 updates 50 k\\n dracut-network x86_64 033-360.el7_2.1 updates 90 k\\n gmp x86_64 1:6.0.0-12.el7_1 updates 280 k\\n gnutls x86_64 3.3.8-14.el7_2 updates 662 k\\n grub2 x86_64 1:2.02-0.34.el7.centos updates 1.5 M\\n grub2-tools x86_64 1:2.02-0.34.el7.centos updates 3.3 M\\n gssproxy x86_64 0.4.1-8.el7_2 updates 84 k\\n initscripts x86_64 9.49.30-1.el7_2.3 updates 429 k\\n iproute x86_64 3.10.0-54.el7_2.1 updates 526 k\\n kernel-tools x86_64 3.10.0-327.36.3.el7 updates 2.4 M\\n kernel-tools-libs x86_64 3.10.0-327.36.3.el7 updates 2.3 M\\n kexec-tools x86_64 2.0.7-38.el7_2.1 updates 306 k\\n kmod x86_64 20-8.el7_2 updates 114 k\\n kmod-libs x86_64 20-8.el7_2 updates 47 k\\n kpartx x86_64 0.4.9-85.el7_2.6 updates 60 k\\n krb5-libs x86_64 1.13.2-12.el7_2 updates 843 k\\n libblkid x86_64 2.23.2-26.el7_2.3 updates 167 k\\n libgudev1 x86_64 219-19.el7_2.13 updates 67 k\\n libmount x86_64 2.23.2-26.el7_2.3 updates 169 k\\n libndp x86_64 1.2-6.el7_2 updates 31 k\\n libssh2 x86_64 1.4.3-10.el7_2.1 updates 134 k\\n libtalloc x86_64 2.1.5-1.el7_2 updates 34 k\\n libteam x86_64 1.17-7.el7_2 updates 45 k\\n libtevent x86_64 0.9.26-1.el7_2.1 updates 33 k\\n libuuid x86_64 2.23.2-26.el7_2.3 updates 74 k\\n libxml2 x86_64 2.9.1-6.el7_2.3 updates 668 k\\n logrotate x86_64 3.8.6-7.el7_2 updates 66 k\\n lvm2 x86_64 7:2.02.130-5.el7_2.5 updates 1.0 M\\n lvm2-libs x86_64 7:2.02.130-5.el7_2.5 updates 873 k\\n mariadb-libs x86_64 1:5.5.50-1.el7_2 updates 755 k\\n microcode_ctl x86_64 2:2.1-12.el7_2.1 updates 535 k\\n nfs-utils x86_64 1:1.3.0-0.21.el7_2.1 updates 371 k\\n nspr x86_64 4.11.0-1.el7_2 updates 126 k\\n nss x86_64 3.21.0-9.el7_2 updates 850 k\\n nss-softokn x86_64 3.16.2.3-14.2.el7_2 updates 305 k\\n nss-softokn-freebl x86_64 3.16.2.3-14.2.el7_2 updates 204 k\\n nss-sysinit x86_64 3.21.0-9.el7_2 updates 55 k\\n nss-tools x86_64 3.21.0-9.el7_2 updates 487 k\\n nss-util x86_64 3.21.0-2.2.el7_2 updates 72 k\\n numactl-libs x86_64 2.0.9-6.el7_2 updates 29 k\\n openldap x86_64 2.4.40-9.el7_2 updates 348 k\\n openssh x86_64 6.6.1p1-25.el7_2 updates 435 k\\n openssh-clients x86_64 6.6.1p1-25.el7_2 updates 639 k\\n openssh-server x86_64 6.6.1p1-25.el7_2 updates 436 k\\n openssl x86_64 1:1.0.1e-51.el7_2.7 updates 712 k\\n openssl-libs x86_64 1:1.0.1e-51.el7_2.7 updates 953 k\\n pcre x86_64 8.32-15.el7_2.1 updates 420 k\\n polkit x86_64 0.112-7.el7_2 updates 166 k\\n procps-ng x86_64 3.3.10-5.el7_2 updates 287 k\\n python x86_64 2.7.5-39.el7_2 updates 89 k\\n python-libs x86_64 2.7.5-39.el7_2 updates 5.6 M\\n python-perf x86_64 3.10.0-327.36.3.el7 updates 2.4 M\\n python-pyudev noarch 0.15-7.el7_2.1 updates 54 k\\n quota x86_64 1:4.01-11.el7_2.1 updates 178 k\\n quota-nls noarch 1:4.01-11.el7_2.1 updates 90 k\\n rdma noarch 7.2_4.1_rc6-2.el7 updates 28 k\\n rpcbind x86_64 0.2.0-33.el7_2.1 updates 58 k\\n selinux-policy noarch 3.13.1-60.el7_2.9 updates 377 k\\n selinux-policy-devel noarch 3.13.1-60.el7_2.9 updates 3.3 M\\n selinux-policy-targeted noarch 3.13.1-60.el7_2.9 updates 3.9 M\\n sudo x86_64 1.8.6p7-17.el7_2 updates 732 k\\n systemd x86_64 219-19.el7_2.13 updates 5.1 M\\n systemd-libs x86_64 219-19.el7_2.13 updates 358 k\\n systemd-sysv x86_64 219-19.el7_2.13 updates 54 k\\n teamd x86_64 1.17-7.el7_2 updates 109 k\\n tuned noarch 2.5.1-4.el7_2.6 updates 194 k\\n tzdata noarch 2016h-1.el7 updates 439 k\\n util-linux x86_64 2.23.2-26.el7_2.3 updates 1.9 M\\n\\nTransaction Summary\\n================================================================================\\nInstall 2 Packages\\nUpgrade 92 Packages\\n\\nTotal download size: 104 M\\nDownloading packages:\\nDelta RPMs disabled because /usr/bin/applydeltarpm not installed.\\n--------------------------------------------------------------------------------\\nTotal 10 MB/s | 104 MB 00:10 \\nRunning transaction check\\nRunning transaction test\\nTransaction test succeeded\\nRunning transaction\\n Updating : bash-4.2.46-20.el7_2.x86_64 1/186 \\n Updating : systemd-libs-219-19.el7_2.13.x86_64 2/186 \\n Updating : nspr-4.11.0-1.el7_2.x86_64 3/186 \\n Updating : nss-util-3.21.0-2.2.el7_2.x86_64 4/186 \\n Updating : 1:dbus-libs-1.6.12-14.el7_2.x86_64 5/186 \\n Updating : chkconfig-1.3.61-5.el7_2.1.x86_64 6/186 \\n Updating : libuuid-2.23.2-26.el7_2.3.x86_64 7/186 \\n Updating : libgudev1-219-19.el7_2.13.x86_64 8/186 \\n Updating : iproute-3.10.0-54.el7_2.1.x86_64 9/186 \\n Updating : procps-ng-3.3.10-5.el7_2.x86_64 10/186 \\n Updating : nss-softokn-freebl-3.16.2.3-14.2.el7_2.x86_64 11/186 \\n Updating : nss-softokn-3.16.2.3-14.2.el7_2.x86_64 12/186 \\n Updating : 1:gmp-6.0.0-12.el7_1.x86_64 13/186 \\n Updating : krb5-libs-1.13.2-12.el7_2.x86_64 14/186 \\n Updating : 1:openssl-libs-1.0.1e-51.el7_2.7.x86_64 15/186 \\n Updating : coreutils-8.22-15.el7_2.1.x86_64 16/186 \\n Updating : ca-certificates-2015.2.6-70.1.el7_2.noarch 17/186 \\n Updating : libblkid-2.23.2-26.el7_2.3.x86_64 18/186 \\n Updating : libmount-2.23.2-26.el7_2.3.x86_64 19/186 \\n Updating : util-linux-2.23.2-26.el7_2.3.x86_64 20/186 \\n Updating : selinux-policy-3.13.1-60.el7_2.9.noarch 21/186 \\n Updating : python-libs-2.7.5-39.el7_2.x86_64 22/186 \\n Updating : python-2.7.5-39.el7_2.x86_64 23/186 \\n Updating : python-perf-3.10.0-327.36.3.el7.x86_64 24/186 \\n Updating : python-pyudev-0.15-7.el7_2.1.noarch 25/186 \\n Updating : nss-3.21.0-9.el7_2.x86_64 26/186 \\n Updating : nss-sysinit-3.21.0-9.el7_2.x86_64 27/186 \\n Updating : 1:NetworkManager-libnm-1.0.6-31.el7_2.x86_64 28/186 \\n Updating : nss-tools-3.21.0-9.el7_2.x86_64 29/186 \\n Updating : avahi-libs-0.6.31-15.el7_2.1.x86_64 30/186 \\n Updating : avahi-autoipd-0.6.31-15.el7_2.1.x86_64 31/186 \\n Updating : libteam-1.17-7.el7_2.x86_64 32/186 \\n Updating : teamd-1.17-7.el7_2.x86_64 33/186 \\n Updating : libtalloc-2.1.5-1.el7_2.x86_64 34/186 \\n Updating : libndp-1.2-6.el7_2.x86_64 35/186 \\n Updating : device-mapper-persistent-data-0.6.2-1.el7_2.x86_64 36/186 \\n Updating : 1:quota-nls-4.01-11.el7_2.1.noarch 37/186 \\n Updating : kernel-tools-libs-3.10.0-327.36.3.el7.x86_64 38/186 \\n Updating : libxml2-2.9.1-6.el7_2.3.x86_64 39/186 \\n Updating : cyrus-sasl-lib-2.1.26-20.el7_2.x86_64 40/186 \\n Updating : openldap-2.4.40-9.el7_2.x86_64 41/186 \\n Updating : openssh-6.6.1p1-25.el7_2.x86_64 42/186 \\n Updating : kmod-libs-20-8.el7_2.x86_64 43/186 \\n Updating : 7:device-mapper-1.02.107-5.el7_2.5.x86_64 44/186 \\n Updating : 7:device-mapper-libs-1.02.107-5.el7_2.5.x86_64 45/186 \\n Updating : kpartx-0.4.9-85.el7_2.6.x86_64 46/186 \\n Updating : dracut-033-360.el7_2.1.x86_64 47/186 \\n Updating : kmod-20-8.el7_2.x86_64 48/186 \\n Updating : systemd-219-19.el7_2.13.x86_64 49/186 \\n Updating : 1:dbus-1.6.12-14.el7_2.x86_64 50/186 \\n Updating : systemd-sysv-219-19.el7_2.13.x86_64 51/186 \\n Updating : 7:device-mapper-event-libs-1.02.107-5.el7_2.5.x86_64 52/186 \\n Updating : rpcbind-0.2.0-33.el7_2.1.x86_64 53/186 \\n Updating : 1:quota-4.01-11.el7_2.1.x86_64 54/186 \\n Updating : 7:device-mapper-event-1.02.107-5.el7_2.5.x86_64 55/186 \\n Updating : 7:lvm2-libs-2.02.130-5.el7_2.5.x86_64 56/186 \\n Updating : dnsmasq-2.66-14.el7_2.1.x86_64 57/186 \\n Updating : polkit-0.112-7.el7_2.x86_64 58/186 \\n Updating : 1:NetworkManager-1.0.6-31.el7_2.x86_64 59/186 \\n Updating : initscripts-9.49.30-1.el7_2.3.x86_64 60/186 \\n Updating : gssproxy-0.4.1-8.el7_2.x86_64 61/186 \\n Updating : cronie-anacron-1.4.11-14.el7_2.1.x86_64 62/186 \\n Updating : cronie-1.4.11-14.el7_2.1.x86_64 63/186 \\n Updating : dracut-network-033-360.el7_2.1.x86_64 64/186 \\n Updating : 1:grub2-tools-2.02-0.34.el7.centos.x86_64 65/186 \\n Updating : 32:bind-license-9.9.4-29.el7_2.4.noarch 66/186 \\n Updating : 32:bind-libs-lite-9.9.4-29.el7_2.4.x86_64 67/186 \\n Updating : 1:grub2-2.02-0.34.el7.centos.x86_64 68/186 \\n Updating : kexec-tools-2.0.7-38.el7_2.1.x86_64 69/186 \\n Updating : 1:nfs-utils-1.3.0-0.21.el7_2.1.x86_64 70/186 \\n Installing : kernel-3.10.0-327.36.3.el7.x86_64 71/186 \\n Updating : 1:NetworkManager-team-1.0.6-31.el7_2.x86_64 72/186 \\n Updating : 1:NetworkManager-tui-1.0.6-31.el7_2.x86_64 73/186 \\n Updating : 7:lvm2-2.02.130-5.el7_2.5.x86_64 74/186 \\n Updating : openssh-server-6.6.1p1-25.el7_2.x86_64 75/186 \\n Updating : 2:microcode_ctl-2.1-12.el7_2.1.x86_64 76/186 \\n Updating : rdma-7.2_4.1_rc6-2.el7.noarch 77/186 \\n Updating : tuned-2.5.1-4.el7_2.6.noarch 78/186 \\n Updating : dracut-config-rescue-033-360.el7_2.1.x86_64 79/186 \\n Updating : openssh-clients-6.6.1p1-25.el7_2.x86_64 80/186 \\n Updating : sudo-1.8.6p7-17.el7_2.x86_64 81/186 \\n Updating : kernel-tools-3.10.0-327.36.3.el7.x86_64 82/186 \\n Updating : libtevent-0.9.26-1.el7_2.1.x86_64 83/186 \\n Updating : selinux-policy-devel-3.13.1-60.el7_2.9.noarch 84/186 \\n Updating : selinux-policy-targeted-3.13.1-60.el7_2.9.noarch 85/186 \\n Updating : 1:openssl-1.0.1e-51.el7_2.7.x86_64 86/186 \\n Updating : logrotate-3.8.6-7.el7_2.x86_64 87/186 \\n Updating : libssh2-1.4.3-10.el7_2.1.x86_64 88/186 \\n Updating : 1:mariadb-libs-5.5.50-1.el7_2.x86_64 89/186 \\n Updating : gnutls-3.3.8-14.el7_2.x86_64 90/186 \\n Installing : kernel-devel-3.10.0-327.36.3.el7.x86_64 91/186 \\n Updating : tzdata-2016h-1.el7.noarch 92/186 \\n Updating : numactl-libs-2.0.9-6.el7_2.x86_64 93/186 \\n Updating : pcre-8.32-15.el7_2.1.x86_64 94/186 \\n Cleanup : 1:nfs-utils-1.3.0-0.21.el7.x86_64 95/186 \\n Cleanup : 7:lvm2-2.02.130-5.el7.x86_64 96/186 \\n Cleanup : 1:NetworkManager-tui-1.0.6-27.el7.x86_64 97/186 \\n Cleanup : tuned-2.5.1-4.el7.noarch 98/186 \\n Cleanup : rpcbind-0.2.0-32.el7.x86_64 99/186 \\n Cleanup : openssh-server-6.6.1p1-22.el7.x86_64 100/186 \\n Cleanup : rdma-7.2_4.1_rc6-1.el7.noarch 101/186 \\n Cleanup : selinux-policy-targeted-3.13.1-60.el7.noarch 102/186 \\n Cleanup : 1:grub2-2.02-0.29.el7.centos.x86_64 103/186 \\n Cleanup : dracut-config-rescue-033-359.el7.x86_64 104/186 \\n Cleanup : selinux-policy-devel-3.13.1-60.el7.noarch 105/186 \\n Cleanup : 7:lvm2-libs-2.02.130-5.el7.x86_64 106/186 \\n Cleanup : 7:device-mapper-event-1.02.107-5.el7.x86_64 107/186 \\n Cleanup : openssh-clients-6.6.1p1-22.el7.x86_64 108/186 \\n Cleanup : kexec-tools-2.0.7-38.el7.x86_64 109/186 \\n Cleanup : 1:openssl-1.0.1e-42.el7.9.x86_64 110/186 \\n Cleanup : openssh-6.6.1p1-22.el7.x86_64 111/186 \\n Cleanup : 32:bind-libs-lite-9.9.4-29.el7.x86_64 112/186 \\n Cleanup : 1:NetworkManager-team-1.0.6-27.el7.x86_64 113/186 \\n Cleanup : dracut-network-033-359.el7.x86_64 114/186 \\n Cleanup : 1:NetworkManager-1.0.6-27.el7.x86_64 115/186 \\n Cleanup : 1:NetworkManager-libnm-1.0.6-27.el7.x86_64 116/186 \\n Cleanup : dnsmasq-2.66-14.el7_1.x86_64 117/186 \\n Cleanup : polkit-0.112-5.el7.x86_64 118/186 \\n Cleanup : teamd-1.17-5.el7.x86_64 119/186 \\n Cleanup : 1:grub2-tools-2.02-0.29.el7.centos.x86_64 120/186 \\n Cleanup : gssproxy-0.4.1-7.el7.x86_64 121/186 \\n Cleanup : 1:quota-4.01-11.el7.x86_64 122/186 \\n Cleanup : initscripts-9.49.30-1.el7.x86_64 123/186 \\n Cleanup : cronie-1.4.11-14.el7.x86_64 124/186 \\n Cleanup : cronie-anacron-1.4.11-14.el7.x86_64 125/186 \\n Cleanup : systemd-sysv-219-19.el7.x86_64 126/186 \\n Cleanup : selinux-policy-3.13.1-60.el7.noarch 127/186 \\n Cleanup : avahi-autoipd-0.6.31-15.el7.x86_64 128/186 \\n Cleanup : python-perf-3.10.0-327.el7.x86_64 129/186 \\n Cleanup : kernel-tools-3.10.0-327.el7.x86_64 130/186 \\n Cleanup : logrotate-3.8.6-6.el7.x86_64 131/186 \\n Cleanup : 2:microcode_ctl-2.1-12.el7.x86_64 132/186 \\n Cleanup : sudo-1.8.6p7-16.el7.x86_64 133/186 \\n Cleanup : python-pyudev-0.15-7.el7.noarch 134/186 \\n Cleanup : openldap-2.4.40-8.el7.x86_64 135/186 \\n Cleanup : nss-tools-3.19.1-18.el7.x86_64 136/186 \\n Cleanup : nss-sysinit-3.19.1-18.el7.x86_64 137/186 \\n Cleanup : nss-3.19.1-18.el7.x86_64 138/186 \\n Cleanup : nss-softokn-3.16.2.3-13.el7_1.x86_64 139/186 \\n Cleanup : nss-util-3.19.1-4.el7_1.x86_64 140/186 \\n Cleanup : nss-softokn-freebl-3.16.2.3-13.el7_1.x86_64 141/186 \\n Cleanup : python-2.7.5-34.el7.x86_64 142/186 \\n Cleanup : python-libs-2.7.5-34.el7.x86_64 143/186 \\n Cleanup : avahi-libs-0.6.31-15.el7.x86_64 144/186 \\n Cleanup : iproute-3.10.0-54.el7.x86_64 145/186 \\n Cleanup : libgudev1-219-19.el7.x86_64 146/186 \\n Cleanup : 7:device-mapper-event-libs-1.02.107-5.el7.x86_64 147/186 \\n Cleanup : kpartx-0.4.9-85.el7.x86_64 148/186 \\n Cleanup : 7:device-mapper-libs-1.02.107-5.el7.x86_64 149/186 \\n Cleanup : 7:device-mapper-1.02.107-5.el7.x86_64 150/186 \\n Cleanup : kmod-20-5.el7.x86_64 151/186 \\n Cleanup : dracut-033-359.el7.x86_64 152/186 \\n Cleanup : 1:dbus-1.6.12-13.el7.x86_64 153/186 \\n Cleanup : systemd-219-19.el7.x86_64 154/186 \\n Cleanup : util-linux-2.23.2-26.el7.x86_64 155/186 \\n Cleanup : libmount-2.23.2-26.el7.x86_64 156/186 \\n Cleanup : libblkid-2.23.2-26.el7.x86_64 157/186 \\n Cleanup : procps-ng-3.3.10-3.el7.x86_64 158/186 \\n Cleanup : 1:mariadb-libs-5.5.44-2.el7.centos.x86_64 159/186 \\n Cleanup : libtevent-0.9.25-1.el7.x86_64 160/186 \\n Cleanup : libssh2-1.4.3-10.el7.x86_64 161/186 \\n Cleanup : ca-certificates-2015.2.4-71.el7.noarch 162/186 \\n Cleanup : krb5-libs-1.13.2-10.el7.x86_64 163/186 \\n Cleanup : coreutils-8.22-15.el7.x86_64 164/186 \\n Cleanup : 1:openssl-libs-1.0.1e-42.el7.9.x86_64 165/186 \\n Cleanup : gnutls-3.3.8-12.el7_1.1.x86_64 166/186 \\n Cleanup : 1:quota-nls-4.01-11.el7.noarch 167/186 \\n Cleanup : 32:bind-license-9.9.4-29.el7.noarch 168/186 \\n Cleanup : tzdata-2015g-1.el7.noarch 169/186 \\n Cleanup : 1:gmp-6.0.0-11.el7.x86_64 170/186 \\n Cleanup : bash-4.2.46-19.el7.x86_64 171/186 \\n Cleanup : libtalloc-2.1.2-1.el7.x86_64 172/186 \\n Cleanup : systemd-libs-219-19.el7.x86_64 173/186 \\n Cleanup : libuuid-2.23.2-26.el7.x86_64 174/186 \\n Cleanup : kmod-libs-20-5.el7.x86_64 175/186 \\n Cleanup : chkconfig-1.3.61-5.el7.x86_64 176/186 \\n Cleanup : 1:dbus-libs-1.6.12-13.el7.x86_64 177/186 \\n Cleanup : nspr-4.10.8-2.el7_1.x86_64 178/186 \\n Cleanup : cyrus-sasl-lib-2.1.26-19.2.el7.x86_64 179/186 \\n Cleanup : kernel-tools-libs-3.10.0-327.el7.x86_64 180/186 \\n Cleanup : libteam-1.17-5.el7.x86_64 181/186 \\n Cleanup : libndp-1.2-4.el7.x86_64 182/186 \\n Cleanup : libxml2-2.9.1-5.el7_1.2.x86_64 183/186 \\n Cleanup : device-mapper-persistent-data-0.5.5-1.el7.x86_64 184/186 \\n Cleanup : numactl-libs-2.0.9-5.el7_1.x86_64 185/186 \\n Cleanup : pcre-8.32-15.el7.x86_64 186/186 \\nvboxadd.sh: Building Guest Additions kernel modules.\\n Verifying : openssh-server-6.6.1p1-25.el7_2.x86_64 1/186 \\n Verifying : 32:bind-license-9.9.4-29.el7_2.4.noarch 2/186 \\n Verifying : dnsmasq-2.66-14.el7_2.1.x86_64 3/186 \\n Verifying : iproute-3.10.0-54.el7_2.1.x86_64 4/186 \\n Verifying : sudo-1.8.6p7-17.el7_2.x86_64 5/186 \\n Verifying : nspr-4.11.0-1.el7_2.x86_64 6/186 \\n Verifying : util-linux-2.23.2-26.el7_2.3.x86_64 7/186 \\n Verifying : pcre-8.32-15.el7_2.1.x86_64 8/186 \\n Verifying : selinux-policy-devel-3.13.1-60.el7_2.9.noarch 9/186 \\n Verifying : gnutls-3.3.8-14.el7_2.x86_64 10/186 \\n Verifying : ca-certificates-2015.2.6-70.1.el7_2.noarch 11/186 \\n Verifying : 1:nfs-utils-1.3.0-0.21.el7_2.1.x86_64 12/186 \\n Verifying : nss-util-3.21.0-2.2.el7_2.x86_64 13/186 \\n Verifying : systemd-sysv-219-19.el7_2.13.x86_64 14/186 \\n Verifying : numactl-libs-2.0.9-6.el7_2.x86_64 15/186 \\n Verifying : cronie-anacron-1.4.11-14.el7_2.1.x86_64 16/186 \\n Verifying : 1:NetworkManager-team-1.0.6-31.el7_2.x86_64 17/186 \\n Verifying : dracut-config-rescue-033-360.el7_2.1.x86_64 18/186 \\n Verifying : libuuid-2.23.2-26.el7_2.3.x86_64 19/186 \\n Verifying : coreutils-8.22-15.el7_2.1.x86_64 20/186 \\n Verifying : kpartx-0.4.9-85.el7_2.6.x86_64 21/186 \\n Verifying : selinux-policy-3.13.1-60.el7_2.9.noarch 22/186 \\n Verifying : kernel-3.10.0-327.36.3.el7.x86_64 23/186 \\n Verifying : 7:device-mapper-1.02.107-5.el7_2.5.x86_64 24/186 \\n Verifying : 1:NetworkManager-tui-1.0.6-31.el7_2.x86_64 25/186 \\n Verifying : 7:device-mapper-libs-1.02.107-5.el7_2.5.x86_64 26/186 \\n Verifying : 2:microcode_ctl-2.1-12.el7_2.1.x86_64 27/186 \\n Verifying : rpcbind-0.2.0-33.el7_2.1.x86_64 28/186 \\n Verifying : 7:lvm2-libs-2.02.130-5.el7_2.5.x86_64 29/186 \\n Verifying : openldap-2.4.40-9.el7_2.x86_64 30/186 \\n Verifying : initscripts-9.49.30-1.el7_2.3.x86_64 31/186 \\n Verifying : 1:openssl-1.0.1e-51.el7_2.7.x86_64 32/186 \\n Verifying : avahi-libs-0.6.31-15.el7_2.1.x86_64 33/186 \\n Verifying : 7:lvm2-2.02.130-5.el7_2.5.x86_64 34/186 \\n Verifying : libblkid-2.23.2-26.el7_2.3.x86_64 35/186 \\n Verifying : kmod-libs-20-8.el7_2.x86_64 36/186 \\n Verifying : 32:bind-libs-lite-9.9.4-29.el7_2.4.x86_64 37/186 \\n Verifying : python-perf-3.10.0-327.36.3.el7.x86_64 38/186 \\n Verifying : krb5-libs-1.13.2-12.el7_2.x86_64 39/186 \\n Verifying : python-libs-2.7.5-39.el7_2.x86_64 40/186 \\n Verifying : bash-4.2.46-20.el7_2.x86_64 41/186 \\n Verifying : libssh2-1.4.3-10.el7_2.1.x86_64 42/186 \\n Verifying : cyrus-sasl-lib-2.1.26-20.el7_2.x86_64 43/186 \\n Verifying : nss-tools-3.21.0-9.el7_2.x86_64 44/186 \\n Verifying : 7:device-mapper-event-libs-1.02.107-5.el7_2.5.x86_64 45/186 \\n Verifying : libxml2-2.9.1-6.el7_2.3.x86_64 46/186 \\n Verifying : chkconfig-1.3.61-5.el7_2.1.x86_64 47/186 \\n Verifying : procps-ng-3.3.10-5.el7_2.x86_64 48/186 \\n Verifying : avahi-autoipd-0.6.31-15.el7_2.1.x86_64 49/186 \\n Verifying : 1:grub2-2.02-0.34.el7.centos.x86_64 50/186 \\n Verifying : kernel-tools-libs-3.10.0-327.36.3.el7.x86_64 51/186 \\n Verifying : systemd-libs-219-19.el7_2.13.x86_64 52/186 \\n Verifying : python-2.7.5-39.el7_2.x86_64 53/186 \\n Verifying : kexec-tools-2.0.7-38.el7_2.1.x86_64 54/186 \\n Verifying : libtevent-0.9.26-1.el7_2.1.x86_64 55/186 \\n Verifying : 1:quota-nls-4.01-11.el7_2.1.noarch 56/186 \\n Verifying : logrotate-3.8.6-7.el7_2.x86_64 57/186 \\n Verifying : 1:mariadb-libs-5.5.50-1.el7_2.x86_64 58/186 \\n Verifying : 1:grub2-tools-2.02-0.34.el7.centos.x86_64 59/186 \\n Verifying : kernel-tools-3.10.0-327.36.3.el7.x86_64 60/186 \\n Verifying : kernel-devel-3.10.0-327.36.3.el7.x86_64 61/186 \\n Verifying : gssproxy-0.4.1-8.el7_2.x86_64 62/186 \\n Verifying : 1:gmp-6.0.0-12.el7_1.x86_64 63/186 \\n Verifying : dracut-network-033-360.el7_2.1.x86_64 64/186 \\n Verifying : nss-3.21.0-9.el7_2.x86_64 65/186 \\n Verifying : nss-softokn-3.16.2.3-14.2.el7_2.x86_64 66/186 \\n Verifying : nss-softokn-freebl-3.16.2.3-14.2.el7_2.x86_64 67/186 \\n Verifying : tzdata-2016h-1.el7.noarch 68/186 \\n Verifying : dracut-033-360.el7_2.1.x86_64 69/186 \\n Verifying : device-mapper-persistent-data-0.6.2-1.el7_2.x86_64 70/186 \\n Verifying : 1:openssl-libs-1.0.1e-51.el7_2.7.x86_64 71/186 \\n Verifying : nss-sysinit-3.21.0-9.el7_2.x86_64 72/186 \\n Verifying : python-pyudev-0.15-7.el7_2.1.noarch 73/186 \\n Verifying : 1:dbus-1.6.12-14.el7_2.x86_64 74/186 \\n Verifying : 1:NetworkManager-libnm-1.0.6-31.el7_2.x86_64 75/186 \\n Verifying : libgudev1-219-19.el7_2.13.x86_64 76/186 \\n Verifying : selinux-policy-targeted-3.13.1-60.el7_2.9.noarch 77/186 \\n Verifying : teamd-1.17-7.el7_2.x86_64 78/186 \\n Verifying : polkit-0.112-7.el7_2.x86_64 79/186 \\n Verifying : 1:quota-4.01-11.el7_2.1.x86_64 80/186 \\n Verifying : openssh-6.6.1p1-25.el7_2.x86_64 81/186 \\n Verifying : libndp-1.2-6.el7_2.x86_64 82/186 \\n Verifying : kmod-20-8.el7_2.x86_64 83/186 \\n Verifying : rdma-7.2_4.1_rc6-2.el7.noarch 84/186 \\n Verifying : libtalloc-2.1.5-1.el7_2.x86_64 85/186 \\n Verifying : systemd-219-19.el7_2.13.x86_64 86/186 \\n Verifying : 7:device-mapper-event-1.02.107-5.el7_2.5.x86_64 87/186 \\n Verifying : cronie-1.4.11-14.el7_2.1.x86_64 88/186 \\n Verifying : 1:NetworkManager-1.0.6-31.el7_2.x86_64 89/186 \\n Verifying : openssh-clients-6.6.1p1-25.el7_2.x86_64 90/186 \\n Verifying : tuned-2.5.1-4.el7_2.6.noarch 91/186 \\n Verifying : 1:dbus-libs-1.6.12-14.el7_2.x86_64 92/186 \\n Verifying : libteam-1.17-7.el7_2.x86_64 93/186 \\n Verifying : libmount-2.23.2-26.el7_2.3.x86_64 94/186 \\n Verifying : dracut-config-rescue-033-359.el7.x86_64 95/186 \\n Verifying : gnutls-3.3.8-12.el7_1.1.x86_64 96/186 \\n Verifying : openssh-6.6.1p1-22.el7.x86_64 97/186 \\n Verifying : 7:device-mapper-event-libs-1.02.107-5.el7.x86_64 98/186 \\n Verifying : polkit-0.112-5.el7.x86_64 99/186 \\n Verifying : avahi-autoipd-0.6.31-15.el7.x86_64 100/186 \\n Verifying : 1:NetworkManager-1.0.6-27.el7.x86_64 101/186 \\n Verifying : selinux-policy-3.13.1-60.el7.noarch 102/186 \\n Verifying : systemd-libs-219-19.el7.x86_64 103/186 \\n Verifying : libblkid-2.23.2-26.el7.x86_64 104/186 \\n Verifying : libndp-1.2-4.el7.x86_64 105/186 \\n Verifying : device-mapper-persistent-data-0.5.5-1.el7.x86_64 106/186 \\n Verifying : 1:quota-4.01-11.el7.x86_64 107/186 \\n Verifying : kpartx-0.4.9-85.el7.x86_64 108/186 \\n Verifying : krb5-libs-1.13.2-10.el7.x86_64 109/186 \\n Verifying : python-pyudev-0.15-7.el7.noarch 110/186 \\n Verifying : sudo-1.8.6p7-16.el7.x86_64 111/186 \\n Verifying : nss-util-3.19.1-4.el7_1.x86_64 112/186 \\n Verifying : cronie-1.4.11-14.el7.x86_64 113/186 \\n Verifying : rdma-7.2_4.1_rc6-1.el7.noarch 114/186 \\n Verifying : 1:dbus-1.6.12-13.el7.x86_64 115/186 \\n Verifying : kexec-tools-2.0.7-38.el7.x86_64 116/186 \\n Verifying : rpcbind-0.2.0-32.el7.x86_64 117/186 \\n Verifying : kernel-tools-3.10.0-327.el7.x86_64 118/186 \\n Verifying : procps-ng-3.3.10-3.el7.x86_64 119/186 \\n Verifying : 7:lvm2-libs-2.02.130-5.el7.x86_64 120/186 \\n Verifying : nss-softokn-3.16.2.3-13.el7_1.x86_64 121/186 \\n Verifying : 1:NetworkManager-tui-1.0.6-27.el7.x86_64 122/186 \\n Verifying : python-2.7.5-34.el7.x86_64 123/186 \\n Verifying : libuuid-2.23.2-26.el7.x86_64 124/186 \\n Verifying : logrotate-3.8.6-6.el7.x86_64 125/186 \\n Verifying : 1:grub2-tools-2.02-0.29.el7.centos.x86_64 126/186 \\n Verifying : systemd-sysv-219-19.el7.x86_64 127/186 \\n Verifying : libgudev1-219-19.el7.x86_64 128/186 \\n Verifying : tzdata-2015g-1.el7.noarch 129/186 \\n Verifying : nss-sysinit-3.19.1-18.el7.x86_64 130/186 \\n Verifying : libmount-2.23.2-26.el7.x86_64 131/186 \\n Verifying : 1:gmp-6.0.0-11.el7.x86_64 132/186 \\n Verifying : 7:device-mapper-event-1.02.107-5.el7.x86_64 133/186 \\n Verifying : 1:NetworkManager-team-1.0.6-27.el7.x86_64 134/186 \\n Verifying : kernel-tools-libs-3.10.0-327.el7.x86_64 135/186 \\n Verifying : cronie-anacron-1.4.11-14.el7.x86_64 136/186 \\n Verifying : iproute-3.10.0-54.el7.x86_64 137/186 \\n Verifying : 1:quota-nls-4.01-11.el7.noarch 138/186 \\n Verifying : teamd-1.17-5.el7.x86_64 139/186 \\n Verifying : 1:grub2-2.02-0.29.el7.centos.x86_64 140/186 \\n Verifying : ca-certificates-2015.2.4-71.el7.noarch 141/186 \\n Verifying : util-linux-2.23.2-26.el7.x86_64 142/186 \\n Verifying : dnsmasq-2.66-14.el7_1.x86_64 143/186 \\n Verifying : 1:openssl-1.0.1e-42.el7.9.x86_64 144/186 \\n Verifying : 7:lvm2-2.02.130-5.el7.x86_64 145/186 \\n Verifying : tuned-2.5.1-4.el7.noarch 146/186 \\n Verifying : dracut-network-033-359.el7.x86_64 147/186 \\n Verifying : bash-4.2.46-19.el7.x86_64 148/186 \\n Verifying : python-libs-2.7.5-34.el7.x86_64 149/186 \\n Verifying : selinux-policy-targeted-3.13.1-60.el7.noarch 150/186 \\n Verifying : libtevent-0.9.25-1.el7.x86_64 151/186 \\n Verifying : 1:mariadb-libs-5.5.44-2.el7.centos.x86_64 152/186 \\n Verifying : cyrus-sasl-lib-2.1.26-19.2.el7.x86_64 153/186 \\n Verifying : pcre-8.32-15.el7.x86_64 154/186 \\n Verifying : chkconfig-1.3.61-5.el7.x86_64 155/186 \\n Verifying : nss-softokn-freebl-3.16.2.3-13.el7_1.x86_64 156/186 \\n Verifying : initscripts-9.49.30-1.el7.x86_64 157/186 \\n Verifying : nss-tools-3.19.1-18.el7.x86_64 158/186 \\n Verifying : numactl-libs-2.0.9-5.el7_1.x86_64 159/186 \\n Verifying : 1:openssl-libs-1.0.1e-42.el7.9.x86_64 160/186 \\n Verifying : 32:bind-libs-lite-9.9.4-29.el7.x86_64 161/186 \\n Verifying : 2:microcode_ctl-2.1-12.el7.x86_64 162/186 \\n Verifying : 7:device-mapper-1.02.107-5.el7.x86_64 163/186 \\n Verifying : python-perf-3.10.0-327.el7.x86_64 164/186 \\n Verifying : 32:bind-license-9.9.4-29.el7.noarch 165/186 \\n Verifying : libteam-1.17-5.el7.x86_64 166/186 \\n Verifying : coreutils-8.22-15.el7.x86_64 167/186 \\n Verifying : libtalloc-2.1.2-1.el7.x86_64 168/186 \\n Verifying : nss-3.19.1-18.el7.x86_64 169/186 \\n Verifying : kmod-20-5.el7.x86_64 170/186 \\n Verifying : kmod-libs-20-5.el7.x86_64 171/186 \\n Verifying : 1:nfs-utils-1.3.0-0.21.el7.x86_64 172/186 \\n Verifying : systemd-219-19.el7.x86_64 173/186 \\n Verifying : dracut-033-359.el7.x86_64 174/186 \\n Verifying : 1:dbus-libs-1.6.12-13.el7.x86_64 175/186 \\n Verifying : avahi-libs-0.6.31-15.el7.x86_64 176/186 \\n Verifying : openssh-clients-6.6.1p1-22.el7.x86_64 177/186 \\n Verifying : 1:NetworkManager-libnm-1.0.6-27.el7.x86_64 178/186 \\n Verifying : openssh-server-6.6.1p1-22.el7.x86_64 179/186 \\n Verifying : gssproxy-0.4.1-7.el7.x86_64 180/186 \\n Verifying : selinux-policy-devel-3.13.1-60.el7.noarch 181/186 \\n Verifying : libxml2-2.9.1-5.el7_1.2.x86_64 182/186 \\n Verifying : openldap-2.4.40-8.el7.x86_64 183/186 \\n Verifying : libssh2-1.4.3-10.el7.x86_64 184/186 \\n Verifying : 7:device-mapper-libs-1.02.107-5.el7.x86_64 185/186 \\n Verifying : nspr-4.10.8-2.el7_1.x86_64 186/186 \\n\\nInstalled:\\n kernel.x86_64 0:3.10.0-327.36.3.el7 kernel-devel.x86_64 0:3.10.0-327.36.3.el7\\n\\nUpdated:\\n NetworkManager.x86_64 1:1.0.6-31.el7_2 \\n NetworkManager-libnm.x86_64 1:1.0.6-31.el7_2 \\n NetworkManager-team.x86_64 1:1.0.6-31.el7_2 \\n NetworkManager-tui.x86_64 1:1.0.6-31.el7_2 \\n avahi-autoipd.x86_64 0:0.6.31-15.el7_2.1 \\n avahi-libs.x86_64 0:0.6.31-15.el7_2.1 \\n bash.x86_64 0:4.2.46-20.el7_2 \\n bind-libs-lite.x86_64 32:9.9.4-29.el7_2.4 \\n bind-license.noarch 32:9.9.4-29.el7_2.4 \\n ca-certificates.noarch 0:2015.2.6-70.1.el7_2 \\n chkconfig.x86_64 0:1.3.61-5.el7_2.1 \\n coreutils.x86_64 0:8.22-15.el7_2.1 \\n cronie.x86_64 0:1.4.11-14.el7_2.1 \\n cronie-anacron.x86_64 0:1.4.11-14.el7_2.1 \\n cyrus-sasl-lib.x86_64 0:2.1.26-20.el7_2 \\n dbus.x86_64 1:1.6.12-14.el7_2 \\n dbus-libs.x86_64 1:1.6.12-14.el7_2 \\n device-mapper.x86_64 7:1.02.107-5.el7_2.5 \\n device-mapper-event.x86_64 7:1.02.107-5.el7_2.5 \\n device-mapper-event-libs.x86_64 7:1.02.107-5.el7_2.5 \\n device-mapper-libs.x86_64 7:1.02.107-5.el7_2.5 \\n device-mapper-persistent-data.x86_64 0:0.6.2-1.el7_2 \\n dnsmasq.x86_64 0:2.66-14.el7_2.1 \\n dracut.x86_64 0:033-360.el7_2.1 \\n dracut-config-rescue.x86_64 0:033-360.el7_2.1 \\n dracut-network.x86_64 0:033-360.el7_2.1 \\n gmp.x86_64 1:6.0.0-12.el7_1 \\n gnutls.x86_64 0:3.3.8-14.el7_2 \\n grub2.x86_64 1:2.02-0.34.el7.centos \\n grub2-tools.x86_64 1:2.02-0.34.el7.centos \\n gssproxy.x86_64 0:0.4.1-8.el7_2 \\n initscripts.x86_64 0:9.49.30-1.el7_2.3 \\n iproute.x86_64 0:3.10.0-54.el7_2.1 \\n kernel-tools.x86_64 0:3.10.0-327.36.3.el7 \\n kernel-tools-libs.x86_64 0:3.10.0-327.36.3.el7 \\n kexec-tools.x86_64 0:2.0.7-38.el7_2.1 \\n kmod.x86_64 0:20-8.el7_2 \\n kmod-libs.x86_64 0:20-8.el7_2 \\n kpartx.x86_64 0:0.4.9-85.el7_2.6 \\n krb5-libs.x86_64 0:1.13.2-12.el7_2 \\n libblkid.x86_64 0:2.23.2-26.el7_2.3 \\n libgudev1.x86_64 0:219-19.el7_2.13 \\n libmount.x86_64 0:2.23.2-26.el7_2.3 \\n libndp.x86_64 0:1.2-6.el7_2 \\n libssh2.x86_64 0:1.4.3-10.el7_2.1 \\n libtalloc.x86_64 0:2.1.5-1.el7_2 \\n libteam.x86_64 0:1.17-7.el7_2 \\n libtevent.x86_64 0:0.9.26-1.el7_2.1 \\n libuuid.x86_64 0:2.23.2-26.el7_2.3 \\n libxml2.x86_64 0:2.9.1-6.el7_2.3 \\n logrotate.x86_64 0:3.8.6-7.el7_2 \\n lvm2.x86_64 7:2.02.130-5.el7_2.5 \\n lvm2-libs.x86_64 7:2.02.130-5.el7_2.5 \\n mariadb-libs.x86_64 1:5.5.50-1.el7_2 \\n microcode_ctl.x86_64 2:2.1-12.el7_2.1 \\n nfs-utils.x86_64 1:1.3.0-0.21.el7_2.1 \\n nspr.x86_64 0:4.11.0-1.el7_2 \\n nss.x86_64 0:3.21.0-9.el7_2 \\n nss-softokn.x86_64 0:3.16.2.3-14.2.el7_2 \\n nss-softokn-freebl.x86_64 0:3.16.2.3-14.2.el7_2 \\n nss-sysinit.x86_64 0:3.21.0-9.el7_2 \\n nss-tools.x86_64 0:3.21.0-9.el7_2 \\n nss-util.x86_64 0:3.21.0-2.2.el7_2 \\n numactl-libs.x86_64 0:2.0.9-6.el7_2 \\n openldap.x86_64 0:2.4.40-9.el7_2 \\n openssh.x86_64 0:6.6.1p1-25.el7_2 \\n openssh-clients.x86_64 0:6.6.1p1-25.el7_2 \\n openssh-server.x86_64 0:6.6.1p1-25.el7_2 \\n openssl.x86_64 1:1.0.1e-51.el7_2.7 \\n openssl-libs.x86_64 1:1.0.1e-51.el7_2.7 \\n pcre.x86_64 0:8.32-15.el7_2.1 \\n polkit.x86_64 0:0.112-7.el7_2 \\n procps-ng.x86_64 0:3.3.10-5.el7_2 \\n python.x86_64 0:2.7.5-39.el7_2 \\n python-libs.x86_64 0:2.7.5-39.el7_2 \\n python-perf.x86_64 0:3.10.0-327.36.3.el7 \\n python-pyudev.noarch 0:0.15-7.el7_2.1 \\n quota.x86_64 1:4.01-11.el7_2.1 \\n quota-nls.noarch 1:4.01-11.el7_2.1 \\n rdma.noarch 0:7.2_4.1_rc6-2.el7 \\n rpcbind.x86_64 0:0.2.0-33.el7_2.1 \\n selinux-policy.noarch 0:3.13.1-60.el7_2.9 \\n selinux-policy-devel.noarch 0:3.13.1-60.el7_2.9 \\n selinux-policy-targeted.noarch 0:3.13.1-60.el7_2.9 \\n sudo.x86_64 0:1.8.6p7-17.el7_2 \\n systemd.x86_64 0:219-19.el7_2.13 \\n systemd-libs.x86_64 0:219-19.el7_2.13 \\n systemd-sysv.x86_64 0:219-19.el7_2.13 \\n teamd.x86_64 0:1.17-7.el7_2 \\n tuned.noarch 0:2.5.1-4.el7_2.6 \\n tzdata.noarch 0:2016h-1.el7 \\n util-linux.x86_64 0:2.23.2-26.el7_2.3 \\n\\nComplete!\\n\u0026#34;]} TASK [CentOS7.2 : check CentOS version] **************************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: [\u0026#34;cat\u0026#34;, \u0026#34;/etc/redhat-release\u0026#34;], \u0026#34;delta\u0026#34;: \u0026#34;0:00:00.003325\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-11-29 06:33:46.599010\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;start\u0026#34;: \u0026#34;2016-11-29 06:33:46.595685\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;CentOS Linux release 7.2.1511 (Core) \u0026#34;, \u0026#34;stdout_lines\u0026#34;: [\u0026#34;CentOS Linux release 7.2.1511 (Core) \u0026#34;], \u0026#34;warnings\u0026#34;: []} TASK [CentOS7.2 : set LANG] **************************************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: [\u0026#34;localectl\u0026#34;, \u0026#34;set-locale\u0026#34;, \u0026#34;LANG=ja_JP.UTF-8\u0026#34;], \u0026#34;delta\u0026#34;: \u0026#34;0:00:00.112148\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-11-29 06:33:46.888318\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;start\u0026#34;: \u0026#34;2016-11-29 06:33:46.776170\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout_lines\u0026#34;: [], \u0026#34;warnings\u0026#34;: []} TASK [CentOS7.2 : set keymap] ************************************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: [\u0026#34;localectl\u0026#34;, \u0026#34;set-keymap\u0026#34;, \u0026#34;jp106\u0026#34;], \u0026#34;delta\u0026#34;: \u0026#34;0:00:00.009940\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-11-29 06:33:47.051681\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;start\u0026#34;: \u0026#34;2016-11-29 06:33:47.041741\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout_lines\u0026#34;: [], \u0026#34;warnings\u0026#34;: []} TASK [CentOS7.2 : set timezone] ************************************************ changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: [\u0026#34;timedatectl\u0026#34;, \u0026#34;set-timezone\u0026#34;, \u0026#34;Asia/Tokyo\u0026#34;], \u0026#34;delta\u0026#34;: \u0026#34;9:00:00.029756\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-11-29 15:33:47.309770\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;start\u0026#34;: \u0026#34;2016-11-29 06:33:47.280014\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout_lines\u0026#34;: [], \u0026#34;warnings\u0026#34;: []} TASK [CentOS7.2 : install chrony] ********************************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;msg\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;results\u0026#34;: [\u0026#34;Loaded plugins: fastestmirror\\nLoading mirror speeds from cached hostfile\\n * base: ftp.iij.ad.jp\\n * epel: ftp.riken.jp\\n * extras: ftp.iij.ad.jp\\n * updates: ftp.iij.ad.jp\\nResolving Dependencies\\n--\u0026gt; Running transaction check\\n---\u0026gt; Package chrony.x86_64 0:2.1.1-1.el7.centos will be installed\\n--\u0026gt; Finished Dependency Resolution\\n\\nDependencies Resolved\\n\\n================================================================================\\n Package Arch Version Repository Size\\n================================================================================\\nInstalling:\\n chrony x86_64 2.1.1-1.el7.centos base 280 k\\n\\nTransaction Summary\\n================================================================================\\nInstall 1 Package\\n\\nTotal download size: 280 k\\nInstalled size: 468 k\\nDownloading packages:\\nRunning transaction check\\nRunning transaction test\\nTransaction test succeeded\\nRunning transaction\\n Installing : chrony-2.1.1-1.el7.centos.x86_64 1/1 \\n Verifying : chrony-2.1.1-1.el7.centos.x86_64 1/1 \\n\\nInstalled:\\n chrony.x86_64 0:2.1.1-1.el7.centos \\n\\nComplete!\\n\u0026#34;]} TASK [CentOS7.2 : start chrony] ************************************************ changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;enabled\u0026#34;: true, \u0026#34;name\u0026#34;: \u0026#34;chronyd\u0026#34;, \u0026#34;state\u0026#34;: \u0026#34;started\u0026#34;, \u0026#34;status\u0026#34;: {\u0026#34;ActiveEnterTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ActiveExitTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ActiveState\u0026#34;: \u0026#34;inactive\u0026#34;, \u0026#34;After\u0026#34;: \u0026#34;ntpdate.service basic.target system.slice ntpd.service sntp.service systemd-journald.socket\u0026#34;, \u0026#34;AllowIsolate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;AssertResult\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;AssertTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;Before\u0026#34;: \u0026#34;multi-user.target shutdown.target\u0026#34;, \u0026#34;BlockIOAccounting\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;BlockIOWeight\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;CPUAccounting\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CPUQuotaPerSecUSec\u0026#34;: \u0026#34;infinity\u0026#34;, \u0026#34;CPUSchedulingPolicy\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;CPUSchedulingPriority\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;CPUSchedulingResetOnFork\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CPUShares\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;CanIsolate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CanReload\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CanStart\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;CanStop\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;CapabilityBoundingSet\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;ConditionResult\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;ConditionTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;Conflicts\u0026#34;: \u0026#34;ntpd.service shutdown.target\u0026#34;, \u0026#34;ControlPID\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;DefaultDependencies\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;Delegate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Description\u0026#34;: \u0026#34;NTP client/server\u0026#34;, \u0026#34;DevicePolicy\u0026#34;: \u0026#34;auto\u0026#34;, \u0026#34;EnvironmentFile\u0026#34;: \u0026#34;/etc/sysconfig/chronyd (ignore_errors=yes)\u0026#34;, \u0026#34;ExecMainCode\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecMainExitTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecMainPID\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecMainStartTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecMainStatus\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecStart\u0026#34;: \u0026#34;{ path=/usr/sbin/chronyd ; argv[]=/usr/sbin/chronyd $OPTIONS ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }\u0026#34;, \u0026#34;ExecStartPost\u0026#34;: \u0026#34;{ path=/usr/libexec/chrony-helper ; argv[]=/usr/libexec/chrony-helper update-daemon ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }\u0026#34;, \u0026#34;FailureAction\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;FileDescriptorStoreMax\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;FragmentPath\u0026#34;: \u0026#34;/usr/lib/systemd/system/chronyd.service\u0026#34;, \u0026#34;GuessMainPID\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;IOScheduling\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;Id\u0026#34;: \u0026#34;chronyd.service\u0026#34;, \u0026#34;IgnoreOnIsolate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;IgnoreOnSnapshot\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;IgnoreSIGPIPE\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;InactiveEnterTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;InactiveExitTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;JobTimeoutAction\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;JobTimeoutUSec\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;KillMode\u0026#34;: \u0026#34;control-group\u0026#34;, \u0026#34;KillSignal\u0026#34;: \u0026#34;15\u0026#34;, \u0026#34;LimitAS\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitCORE\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitCPU\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitDATA\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitFSIZE\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitLOCKS\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitMEMLOCK\u0026#34;: \u0026#34;65536\u0026#34;, \u0026#34;LimitMSGQUEUE\u0026#34;: \u0026#34;819200\u0026#34;, \u0026#34;LimitNICE\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;LimitNOFILE\u0026#34;: \u0026#34;4096\u0026#34;, \u0026#34;LimitNPROC\u0026#34;: \u0026#34;1875\u0026#34;, \u0026#34;LimitRSS\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitRTPRIO\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;LimitRTTIME\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitSIGPENDING\u0026#34;: \u0026#34;1875\u0026#34;, \u0026#34;LimitSTACK\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LoadState\u0026#34;: \u0026#34;loaded\u0026#34;, \u0026#34;MainPID\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;MemoryAccounting\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;MemoryCurrent\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;MemoryLimit\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;MountFlags\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;Names\u0026#34;: \u0026#34;chronyd.service\u0026#34;, \u0026#34;NeedDaemonReload\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Nice\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;NoNewPrivileges\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;NonBlocking\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;NotifyAccess\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;OOMScoreAdjust\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;OnFailureJobMode\u0026#34;: \u0026#34;replace\u0026#34;, \u0026#34;PIDFile\u0026#34;: \u0026#34;/var/run/chronyd.pid\u0026#34;, \u0026#34;PermissionsStartOnly\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;PrivateDevices\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;PrivateNetwork\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;PrivateTmp\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;ProtectHome\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;ProtectSystem\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RefuseManualStart\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RefuseManualStop\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RemainAfterExit\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Requires\u0026#34;: \u0026#34;basic.target\u0026#34;, \u0026#34;Restart\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RestartUSec\u0026#34;: \u0026#34;100ms\u0026#34;, \u0026#34;Result\u0026#34;: \u0026#34;success\u0026#34;, \u0026#34;RootDirectoryStartOnly\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RuntimeDirectoryMode\u0026#34;: \u0026#34;0755\u0026#34;, \u0026#34;SameProcessGroup\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;SecureBits\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;SendSIGHUP\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;SendSIGKILL\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;Slice\u0026#34;: \u0026#34;system.slice\u0026#34;, \u0026#34;StandardError\u0026#34;: \u0026#34;inherit\u0026#34;, \u0026#34;StandardInput\u0026#34;: \u0026#34;null\u0026#34;, \u0026#34;StandardOutput\u0026#34;: \u0026#34;journal\u0026#34;, \u0026#34;StartLimitAction\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;StartLimitBurst\u0026#34;: \u0026#34;5\u0026#34;, \u0026#34;StartLimitInterval\u0026#34;: \u0026#34;10000000\u0026#34;, \u0026#34;StartupBlockIOWeight\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;StartupCPUShares\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;StatusErrno\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;StopWhenUnneeded\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;SubState\u0026#34;: \u0026#34;dead\u0026#34;, \u0026#34;SyslogLevelPrefix\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;SyslogPriority\u0026#34;: \u0026#34;30\u0026#34;, \u0026#34;SystemCallErrorNumber\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;TTYReset\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;TTYVHangup\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;TTYVTDisallocate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;TimeoutStartUSec\u0026#34;: \u0026#34;1min 30s\u0026#34;, \u0026#34;TimeoutStopUSec\u0026#34;: \u0026#34;1min 30s\u0026#34;, \u0026#34;TimerSlackNSec\u0026#34;: \u0026#34;50000\u0026#34;, \u0026#34;Transient\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Type\u0026#34;: \u0026#34;forking\u0026#34;, \u0026#34;UMask\u0026#34;: \u0026#34;0022\u0026#34;, \u0026#34;UnitFilePreset\u0026#34;: \u0026#34;enabled\u0026#34;, \u0026#34;UnitFileState\u0026#34;: \u0026#34;enabled\u0026#34;, \u0026#34;WantedBy\u0026#34;: \u0026#34;multi-user.target\u0026#34;, \u0026#34;Wants\u0026#34;: \u0026#34;system.slice\u0026#34;, \u0026#34;WatchdogTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;WatchdogUSec\u0026#34;: \u0026#34;0\u0026#34;}} TASK [CentOS7.2 : copy chrony.conf template] *********************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;checksum\u0026#34;: \u0026#34;edc2fa30b6c4cd9e96df43f7746b2f8d99fd4b30\u0026#34;, \u0026#34;dest\u0026#34;: \u0026#34;/etc/chrony.conf\u0026#34;, \u0026#34;gid\u0026#34;: 0, \u0026#34;group\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;md5sum\u0026#34;: \u0026#34;0f5442788b66fdcc513dd5b1c40a8dea\u0026#34;, \u0026#34;mode\u0026#34;: \u0026#34;0644\u0026#34;, \u0026#34;owner\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;secontext\u0026#34;: \u0026#34;system_u:object_r:etc_t:s0\u0026#34;, \u0026#34;size\u0026#34;: 1170, \u0026#34;src\u0026#34;: \u0026#34;/home/vagrant/.ansible/tmp/ansible-tmp-1480401232.06-224884913361550/source\u0026#34;, \u0026#34;state\u0026#34;: \u0026#34;file\u0026#34;, \u0026#34;uid\u0026#34;: 0} TASK [CentOS7.2 : copy /etc/profile.d/alias.sh template] *********************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;checksum\u0026#34;: \u0026#34;781ebc25847eb135ec260d405817a435de70c4db\u0026#34;, \u0026#34;dest\u0026#34;: \u0026#34;/etc/profile.d/alias.sh\u0026#34;, \u0026#34;gid\u0026#34;: 0, \u0026#34;group\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;md5sum\u0026#34;: \u0026#34;01206c14444d91222bb445b27522afcf\u0026#34;, \u0026#34;mode\u0026#34;: \u0026#34;0644\u0026#34;, \u0026#34;owner\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;secontext\u0026#34;: \u0026#34;system_u:object_r:bin_t:s0\u0026#34;, \u0026#34;size\u0026#34;: 98, \u0026#34;src\u0026#34;: \u0026#34;/home/vagrant/.ansible/tmp/ansible-tmp-1480401232.56-62694927164343/source\u0026#34;, \u0026#34;state\u0026#34;: \u0026#34;file\u0026#34;, \u0026#34;uid\u0026#34;: 0} TASK [CentOS7.2 : install selinux util] **************************************** ok: [host] =\u0026gt; (item=[u\u0026#39;libselinux-python\u0026#39;, u\u0026#39;libselinux-utils\u0026#39;, u\u0026#39;selinux-policy\u0026#39;, u\u0026#39;selinux-policy-targeted\u0026#39;]) =\u0026gt; {\u0026#34;changed\u0026#34;: false, \u0026#34;item\u0026#34;: [\u0026#34;libselinux-python\u0026#34;, \u0026#34;libselinux-utils\u0026#34;, \u0026#34;selinux-policy\u0026#34;, \u0026#34;selinux-policy-targeted\u0026#34;], \u0026#34;msg\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;results\u0026#34;: [\u0026#34;libselinux-python-2.2.2-6.el7.x86_64 providing libselinux-python is already installed\u0026#34;, \u0026#34;libselinux-utils-2.2.2-6.el7.x86_64 providing libselinux-utils is already installed\u0026#34;, \u0026#34;selinux-policy-3.13.1-60.el7_2.9.noarch providing selinux-policy is already installed\u0026#34;, \u0026#34;selinux-policy-targeted-3.13.1-60.el7_2.9.noarch providing selinux-policy-targeted is already installed\u0026#34;]} TASK [CentOS7.2 : disable selinux] ********************************************* changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;configfile\u0026#34;: \u0026#34;/etc/selinux/config\u0026#34;, \u0026#34;msg\u0026#34;: \u0026#34;state change will take effect next reboot, config state changed from \u0026#39;permissive\u0026#39; to \u0026#39;disabled\u0026#39;\u0026#34;, \u0026#34;policy\u0026#34;: \u0026#34;targeted\u0026#34;, \u0026#34;state\u0026#34;: \u0026#34;disabled\u0026#34;} TASK [ansible : ssh config] **************************************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;checksum\u0026#34;: \u0026#34;325f4dac20857674a7d02879087d4ed90817546d\u0026#34;, \u0026#34;dest\u0026#34;: \u0026#34;/home/vagrant/.ssh/config\u0026#34;, \u0026#34;gid\u0026#34;: 1000, \u0026#34;group\u0026#34;: \u0026#34;vagrant\u0026#34;, \u0026#34;md5sum\u0026#34;: \u0026#34;6ed07d165913f46204d417d11564ffcb\u0026#34;, \u0026#34;mode\u0026#34;: \u0026#34;0600\u0026#34;, \u0026#34;owner\u0026#34;: \u0026#34;vagrant\u0026#34;, \u0026#34;secontext\u0026#34;: \u0026#34;unconfined_u:object_r:ssh_home_t:s0\u0026#34;, \u0026#34;size\u0026#34;: 59, \u0026#34;src\u0026#34;: \u0026#34;/home/vagrant/.ansible/tmp/ansible-tmp-1480401233.45-176277810981132/source\u0026#34;, \u0026#34;state\u0026#34;: \u0026#34;file\u0026#34;, \u0026#34;uid\u0026#34;: 1000} TASK [ansible : check existing id_rsa] ***************************************** ok: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: false, \u0026#34;stat\u0026#34;: {\u0026#34;exists\u0026#34;: false}} TASK [ansible : debug] ********************************************************* ok: [host] =\u0026gt; { \u0026#34;id_rsa\u0026#34;: { \u0026#34;changed\u0026#34;: false, \u0026#34;stat\u0026#34;: { \u0026#34;exists\u0026#34;: false } } } TASK [ansible : Generate SSH keys] ********************************************* changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: \u0026#34;ssh-keygen -b 2048 -t rsa -f /home/vagrant/.ssh/id_rsa -q -N \\\u0026#34;\\\u0026#34;\u0026#34;, \u0026#34;delta\u0026#34;: \u0026#34;0:00:00.033785\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-11-29 15:33:54.054979\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;start\u0026#34;: \u0026#34;2016-11-29 15:33:54.021194\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout_lines\u0026#34;: [], \u0026#34;warnings\u0026#34;: []} TASK [ansible : copy ssh keys] ************************************************* changed: [host] =\u0026gt; (item=192.168.52.52) =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: \u0026#34;sshpass -p \u0026#39;vagrant\u0026#39; ssh-copy-id -i /home/vagrant/.ssh/id_rsa.pub vagrant@192.168.52.52\u0026#34;, \u0026#34;delta\u0026#34;: \u0026#34;0:00:00.444070\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-11-29 15:33:54.664431\u0026#34;, \u0026#34;item\u0026#34;: \u0026#34;192.168.52.52\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;start\u0026#34;: \u0026#34;2016-11-29 15:33:54.220361\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\\n/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;\\nNumber of key(s) added: 1\\n\\nNow try logging into the machine, with: \\\u0026#34;ssh \u0026#39;vagrant@192.168.52.52\u0026#39;\\\u0026#34;\\nand check to make sure that only the key(s) you wanted were added.\u0026#34;, \u0026#34;stdout_lines\u0026#34;: [\u0026#34;\u0026#34;, \u0026#34;Number of key(s) added: 1\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;Now try logging into the machine, with: \\\u0026#34;ssh \u0026#39;vagrant@192.168.52.52\u0026#39;\\\u0026#34;\u0026#34;, \u0026#34;and check to make sure that only the key(s) you wanted were added.\u0026#34;], \u0026#34;warnings\u0026#34;: []} TASK [ansible : check ssh] ***************************************************** changed: [host] =\u0026gt; (item=192.168.52.52) =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;cmd\u0026#34;: \u0026#34;ansible -i /vagrant/development 192.168.52.52 -m ping\u0026#34;, \u0026#34;delta\u0026#34;: \u0026#34;0:00:01.026443\u0026#34;, \u0026#34;end\u0026#34;: \u0026#34;2016-11-29 15:33:55.863515\u0026#34;, \u0026#34;item\u0026#34;: \u0026#34;192.168.52.52\u0026#34;, \u0026#34;rc\u0026#34;: 0, \u0026#34;start\u0026#34;: \u0026#34;2016-11-29 15:33:54.837072\u0026#34;, \u0026#34;stderr\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;stdout\u0026#34;: \u0026#34;\\u001b[0;32m192.168.52.52 | SUCCESS =\u0026gt; {\\n \\\u0026#34;changed\\\u0026#34;: false, \\n \\\u0026#34;ping\\\u0026#34;: \\\u0026#34;pong\\\u0026#34;\\n}\\u001b[0m\u0026#34;, \u0026#34;stdout_lines\u0026#34;: [\u0026#34;\\u001b[0;32m192.168.52.52 | SUCCESS =\u0026gt; {\u0026#34;, \u0026#34; \\\u0026#34;changed\\\u0026#34;: false, \u0026#34;, \u0026#34; \\\u0026#34;ping\\\u0026#34;: \\\u0026#34;pong\\\u0026#34;\u0026#34;, \u0026#34;}\\u001b[0m\u0026#34;], \u0026#34;warnings\u0026#34;: []} RUNNING HANDLER [CentOS7.2 : restart chronyd] ********************************** changed: [host] =\u0026gt; {\u0026#34;changed\u0026#34;: true, \u0026#34;enabled\u0026#34;: true, \u0026#34;name\u0026#34;: \u0026#34;chronyd\u0026#34;, \u0026#34;state\u0026#34;: \u0026#34;started\u0026#34;, \u0026#34;status\u0026#34;: {\u0026#34;ActiveEnterTimestamp\u0026#34;: \u0026#34;Tue 2016-11-29 15:33:51 JST\u0026#34;, \u0026#34;ActiveEnterTimestampMonotonic\u0026#34;: \u0026#34;440875960\u0026#34;, \u0026#34;ActiveExitTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ActiveState\u0026#34;: \u0026#34;active\u0026#34;, \u0026#34;After\u0026#34;: \u0026#34;ntpdate.service basic.target system.slice ntpd.service sntp.service systemd-journald.socket\u0026#34;, \u0026#34;AllowIsolate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;AssertResult\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;AssertTimestamp\u0026#34;: \u0026#34;Tue 2016-11-29 15:33:51 JST\u0026#34;, \u0026#34;AssertTimestampMonotonic\u0026#34;: \u0026#34;440840965\u0026#34;, \u0026#34;Before\u0026#34;: \u0026#34;multi-user.target shutdown.target\u0026#34;, \u0026#34;BlockIOAccounting\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;BlockIOWeight\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;CPUAccounting\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CPUQuotaPerSecUSec\u0026#34;: \u0026#34;infinity\u0026#34;, \u0026#34;CPUSchedulingPolicy\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;CPUSchedulingPriority\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;CPUSchedulingResetOnFork\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CPUShares\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;CanIsolate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CanReload\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;CanStart\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;CanStop\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;CapabilityBoundingSet\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;ConditionResult\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;ConditionTimestamp\u0026#34;: \u0026#34;Tue 2016-11-29 15:33:51 JST\u0026#34;, \u0026#34;ConditionTimestampMonotonic\u0026#34;: \u0026#34;440840965\u0026#34;, \u0026#34;Conflicts\u0026#34;: \u0026#34;ntpd.service shutdown.target\u0026#34;, \u0026#34;ControlGroup\u0026#34;: \u0026#34;/system.slice/chronyd.service\u0026#34;, \u0026#34;ControlPID\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;DefaultDependencies\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;Delegate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Description\u0026#34;: \u0026#34;NTP client/server\u0026#34;, \u0026#34;DevicePolicy\u0026#34;: \u0026#34;auto\u0026#34;, \u0026#34;EnvironmentFile\u0026#34;: \u0026#34;/etc/sysconfig/chronyd (ignore_errors=yes)\u0026#34;, \u0026#34;ExecMainCode\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecMainExitTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecMainPID\u0026#34;: \u0026#34;25933\u0026#34;, \u0026#34;ExecMainStartTimestamp\u0026#34;: \u0026#34;Tue 2016-11-29 15:33:51 JST\u0026#34;, \u0026#34;ExecMainStartTimestampMonotonic\u0026#34;: \u0026#34;440870739\u0026#34;, \u0026#34;ExecMainStatus\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;ExecStart\u0026#34;: \u0026#34;{ path=/usr/sbin/chronyd ; argv[]=/usr/sbin/chronyd $OPTIONS ; ignore_errors=no ; start_time=[Tue 2016-11-29 15:33:51 JST] ; stop_time=[Tue 2016-11-29 15:33:51 JST] ; pid=25931 ; code=exited ; status=0 }\u0026#34;, \u0026#34;ExecStartPost\u0026#34;: \u0026#34;{ path=/usr/libexec/chrony-helper ; argv[]=/usr/libexec/chrony-helper update-daemon ; ignore_errors=no ; start_time=[Tue 2016-11-29 15:33:51 JST] ; stop_time=[Tue 2016-11-29 15:33:51 JST] ; pid=25935 ; code=exited ; status=0 }\u0026#34;, \u0026#34;FailureAction\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;FileDescriptorStoreMax\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;FragmentPath\u0026#34;: \u0026#34;/usr/lib/systemd/system/chronyd.service\u0026#34;, \u0026#34;GuessMainPID\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;IOScheduling\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;Id\u0026#34;: \u0026#34;chronyd.service\u0026#34;, \u0026#34;IgnoreOnIsolate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;IgnoreOnSnapshot\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;IgnoreSIGPIPE\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;InactiveEnterTimestampMonotonic\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;InactiveExitTimestamp\u0026#34;: \u0026#34;Tue 2016-11-29 15:33:51 JST\u0026#34;, \u0026#34;InactiveExitTimestampMonotonic\u0026#34;: \u0026#34;440841515\u0026#34;, \u0026#34;JobTimeoutAction\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;JobTimeoutUSec\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;KillMode\u0026#34;: \u0026#34;control-group\u0026#34;, \u0026#34;KillSignal\u0026#34;: \u0026#34;15\u0026#34;, \u0026#34;LimitAS\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitCORE\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitCPU\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitDATA\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitFSIZE\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitLOCKS\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitMEMLOCK\u0026#34;: \u0026#34;65536\u0026#34;, \u0026#34;LimitMSGQUEUE\u0026#34;: \u0026#34;819200\u0026#34;, \u0026#34;LimitNICE\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;LimitNOFILE\u0026#34;: \u0026#34;4096\u0026#34;, \u0026#34;LimitNPROC\u0026#34;: \u0026#34;1875\u0026#34;, \u0026#34;LimitRSS\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitRTPRIO\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;LimitRTTIME\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LimitSIGPENDING\u0026#34;: \u0026#34;1875\u0026#34;, \u0026#34;LimitSTACK\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;LoadState\u0026#34;: \u0026#34;loaded\u0026#34;, \u0026#34;MainPID\u0026#34;: \u0026#34;25933\u0026#34;, \u0026#34;MemoryAccounting\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;MemoryCurrent\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;MemoryLimit\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;MountFlags\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;Names\u0026#34;: \u0026#34;chronyd.service\u0026#34;, \u0026#34;NeedDaemonReload\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Nice\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;NoNewPrivileges\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;NonBlocking\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;NotifyAccess\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;OOMScoreAdjust\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;OnFailureJobMode\u0026#34;: \u0026#34;replace\u0026#34;, \u0026#34;PIDFile\u0026#34;: \u0026#34;/var/run/chronyd.pid\u0026#34;, \u0026#34;PermissionsStartOnly\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;PrivateDevices\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;PrivateNetwork\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;PrivateTmp\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;ProtectHome\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;ProtectSystem\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RefuseManualStart\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RefuseManualStop\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RemainAfterExit\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Requires\u0026#34;: \u0026#34;basic.target\u0026#34;, \u0026#34;Restart\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RestartUSec\u0026#34;: \u0026#34;100ms\u0026#34;, \u0026#34;Result\u0026#34;: \u0026#34;success\u0026#34;, \u0026#34;RootDirectoryStartOnly\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;RuntimeDirectoryMode\u0026#34;: \u0026#34;0755\u0026#34;, \u0026#34;SameProcessGroup\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;SecureBits\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;SendSIGHUP\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;SendSIGKILL\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;Slice\u0026#34;: \u0026#34;system.slice\u0026#34;, \u0026#34;StandardError\u0026#34;: \u0026#34;inherit\u0026#34;, \u0026#34;StandardInput\u0026#34;: \u0026#34;null\u0026#34;, \u0026#34;StandardOutput\u0026#34;: \u0026#34;journal\u0026#34;, \u0026#34;StartLimitAction\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;StartLimitBurst\u0026#34;: \u0026#34;5\u0026#34;, \u0026#34;StartLimitInterval\u0026#34;: \u0026#34;10000000\u0026#34;, \u0026#34;StartupBlockIOWeight\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;StartupCPUShares\u0026#34;: \u0026#34;18446744073709551615\u0026#34;, \u0026#34;StatusErrno\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;StopWhenUnneeded\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;SubState\u0026#34;: \u0026#34;running\u0026#34;, \u0026#34;SyslogLevelPrefix\u0026#34;: \u0026#34;yes\u0026#34;, \u0026#34;SyslogPriority\u0026#34;: \u0026#34;30\u0026#34;, \u0026#34;SystemCallErrorNumber\u0026#34;: \u0026#34;0\u0026#34;, \u0026#34;TTYReset\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;TTYVHangup\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;TTYVTDisallocate\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;TimeoutStartUSec\u0026#34;: \u0026#34;1min 30s\u0026#34;, \u0026#34;TimeoutStopUSec\u0026#34;: \u0026#34;1min 30s\u0026#34;, \u0026#34;TimerSlackNSec\u0026#34;: \u0026#34;50000\u0026#34;, \u0026#34;Transient\u0026#34;: \u0026#34;no\u0026#34;, \u0026#34;Type\u0026#34;: \u0026#34;forking\u0026#34;, \u0026#34;UMask\u0026#34;: \u0026#34;0022\u0026#34;, \u0026#34;UnitFilePreset\u0026#34;: \u0026#34;enabled\u0026#34;, \u0026#34;UnitFileState\u0026#34;: \u0026#34;enabled\u0026#34;, \u0026#34;WantedBy\u0026#34;: \u0026#34;multi-user.target\u0026#34;, \u0026#34;Wants\u0026#34;: \u0026#34;system.slice\u0026#34;, \u0026#34;WatchdogTimestamp\u0026#34;: \u0026#34;Tue 2016-11-29 15:33:51 JST\u0026#34;, \u0026#34;WatchdogTimestampMonotonic\u0026#34;: \u0026#34;440870755\u0026#34;, \u0026#34;WatchdogUSec\u0026#34;: \u0026#34;0\u0026#34;}} PLAY RECAP ********************************************************************* host : ok=19 changed=15 unreachable=0 failed=0 host にログイン $ vagrant ssh host [vagrant@host ~]$ webのplaybookを実行 $ ansible-playbook -i /vagrant/development /vagrant/site.yml PLAY [web] ********************************************************************* TASK [setup] ******************************************************************* ok: [192.168.52.52] TASK [CentOS7.2 : yum update all] ********************************************** changed: [192.168.52.52] TASK [CentOS7.2 : check CentOS version] **************************************** changed: [192.168.52.52] TASK [CentOS7.2 : set LANG] **************************************************** changed: [192.168.52.52] TASK [CentOS7.2 : set keymap] ************************************************** changed: [192.168.52.52] TASK [CentOS7.2 : set timezone] ************************************************ changed: [192.168.52.52] TASK [CentOS7.2 : install chrony] ********************************************** changed: [192.168.52.52] TASK [CentOS7.2 : start chrony] ************************************************ changed: [192.168.52.52] TASK [CentOS7.2 : copy chrony.conf template] *********************************** changed: [192.168.52.52] TASK [CentOS7.2 : copy /etc/profile.d/alias.sh template] *********************** changed: [192.168.52.52] TASK [CentOS7.2 : install selinux util] **************************************** ok: [192.168.52.52] =\u0026gt; (item=[u\u0026#39;libselinux-python\u0026#39;, u\u0026#39;libselinux-utils\u0026#39;, u\u0026#39;selinux-policy\u0026#39;, u\u0026#39;selinux-policy-targeted\u0026#39;]) TASK [CentOS7.2 : disable selinux] ********************************************* changed: [192.168.52.52] RUNNING HANDLER [CentOS7.2 : restart chronyd] ********************************** changed: [192.168.52.52] PLAY RECAP ********************************************************************* 192.168.52.52 : ok=13 changed=11 unreachable=0 failed=0 web にログイン $ vagrant ssh web Last login: Tue Nov 29 15:41:16 2016 from 192.168.52.51 [vagrant@web ~]$ echo $LANG ja_JP.UTF-8 [vagrant@web ~]$ 終了。\n","permalink":"https://techteco.github.io/2016/11/29/vagrant-ansible-local-2/","tags":["vagrant","Server","virtualbox"],"title":"Vagrant+VirtualBox+Ansibleで開発環境を構築する（その２）"},{"categories":["Server"],"content":" ansible実行用のhostをvagrantのansible_localで設定 ← ここ hostからansibleでcentOS 7.2の基本設定 前提 OS X El Capitan(10.11.6)\nVagrant インストール済み\n$ vagrant version Installed Version: 1.8.7 Latest Version: 1.8.7 VirtualBox インストール済み $ VBoxManage -version 5.0.30r112061 1.ansible実行用のhostをvagrantのansible_localで設定 vagrantの初期化 Vagrantfile作成 $ vagrant init A `Vagrantfile` has been placed in this directory. You are now ready to `vagrant up` your first virtual environment! Please read the comments in the Vagrantfile as well as documentation on `vagrantup.com` for more information on using Vagrant. $ tree . └── Vagrantfile 0 directories, 1 file 設定 公式ページを参考に編集ansible_local ファイル構成 $ tree . ├── Vagrantfile ├── ansible.cfg └── provision ├── inventory └── playbook.yml 1 directory, 4 files 各ファイル Vagrantfile # -*- mode: ruby -*- # vi: set ft=ruby : # All Vagrant configuration is done below. The \u0026#34;2\u0026#34; in Vagrant.configure # configures the configuration version (we support older styles for # backwards compatibility). Please don\u0026#39;t change it unless you know what # you\u0026#39;re doing. Vagrant.configure(\u0026#34;2\u0026#34;) do |config| config.vm.define \u0026#34;host\u0026#34; do |node| node.vm.box = \u0026#34;bento/centos-7.2\u0026#34; node.vm.hostname = \u0026#34;host\u0026#34; node.vm.network :private_network, ip: \u0026#34;192.168.52.51\u0026#34; # Run Ansible from the Vagrant VM node.vm.provision :ansible_local do |ansible| ansible.playbook = \u0026#34;provision/playbook.yml\u0026#34; ansible.verbose = true ansible.install = true ansible.install_mode = :default ansible.limit = \u0026#34;all\u0026#34; # or only \u0026#34;nodes\u0026#34; group, etc. ansible.inventory_path = \u0026#34;provision/inventory\u0026#34; end end end ansible.cfg [defaults] host_key_checking = no [ssh_connection] ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes provision/inventory host ansible_connection=local provision/playbook.yml --- # file: ./provision/playbook.yml - hosts: host tasks: - name: provision test debug: msg=\u0026#34;provision test\u0026#34; vagrantの実行 $ vagrant up --provision Bringing machine \u0026#39;host\u0026#39; up with \u0026#39;virtualbox\u0026#39; provider... ==\u0026gt; host: Importing base box \u0026#39;bento/centos-7.2\u0026#39;... ==\u0026gt; host: Matching MAC address for NAT networking... ==\u0026gt; host: Checking if box \u0026#39;bento/centos-7.2\u0026#39; is up to date... ==\u0026gt; host: There was a problem while downloading the metadata for your box ==\u0026gt; host: to check for updates. This is not an error, since it is usually due ==\u0026gt; host: to temporary network problems. This is just a warning. The problem ==\u0026gt; host: encountered was: ==\u0026gt; host: ==\u0026gt; host: ==\u0026gt; host: ==\u0026gt; host: If you want to check for box updates, verify your network connection ==\u0026gt; host: is valid and try again. ==\u0026gt; host: Setting the name of the VM: vagrant_host_1480286713505_67653 ==\u0026gt; host: Clearing any previously set network interfaces... ==\u0026gt; host: Preparing network interfaces based on configuration... host: Adapter 1: nat host: Adapter 2: hostonly ==\u0026gt; host: Forwarding ports... host: 22 (guest) =\u0026gt; 2222 (host) (adapter 1) ==\u0026gt; host: Booting VM... ==\u0026gt; host: Waiting for machine to boot. This may take a few minutes... host: SSH address: 127.0.0.1:2222 host: SSH username: vagrant host: SSH auth method: private key host: Warning: Remote connection disconnect. Retrying... host: Warning: Remote connection disconnect. Retrying... host: Warning: Remote connection disconnect. Retrying... host: host: Vagrant insecure key detected. Vagrant will automatically replace host: this with a newly generated keypair for better security. host: host: Inserting generated public key within guest... host: Removing insecure key from the guest if it\u0026#39;s present... host: Key inserted! Disconnecting and reconnecting using new SSH key... ==\u0026gt; host: Machine booted and ready! [host] GuestAdditions versions on your host (5.0.30) and guest (5.0.26) do not match. Loaded plugins: fastestmirror ^@Determining fastest mirrors * base: ftp.tsukuba.wide.ad.jp * extras: ftp.tsukuba.wide.ad.jp * updates: ftp.tsukuba.wide.ad.jp Package binutils-2.23.52.0.1-55.el7.x86_64 already installed and latest version Package 1:make-3.82-21.el7.x86_64 already installed and latest version Package bzip2-1.0.6-13.el7.x86_64 already installed and latest version Resolving Dependencies --\u0026gt; Running transaction check ---\u0026gt; Package gcc.x86_64 0:4.8.5-4.el7 will be installed --\u0026gt; Processing Dependency: cpp = 4.8.5-4.el7 for package: gcc-4.8.5-4.el7.x86_64 --\u0026gt; Processing Dependency: glibc-devel \u0026gt;= 2.2.90-12 for package: gcc-4.8.5-4.el7.x86_64 ---\u0026gt; Package kernel-devel.x86_64 0:3.10.0-327.el7 will be installed ---\u0026gt; Package perl.x86_64 4:5.16.3-286.el7 will be installed --\u0026gt; Processing Dependency: perl-libs = 4:5.16.3-286.el7 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Socket) \u0026gt;= 1.3 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Scalar::Util) \u0026gt;= 1.10 for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl-macros for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl-libs for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(threads::shared) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(threads) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(constant) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Time::Local) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Time::HiRes) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Storable) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Socket) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Scalar::Util) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Pod::Simple::XHTML) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Pod::Simple::Search) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Getopt::Long) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Filter::Util::Call) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Temp) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec::Unix) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec::Functions) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Spec) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(File::Path) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Exporter) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Cwd) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: perl(Carp) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Processing Dependency: libperl.so()(64bit) for package: 4:perl-5.16.3-286.el7.x86_64 --\u0026gt; Running transaction check ---\u0026gt; Package cpp.x86_64 0:4.8.5-4.el7 will be installed ---\u0026gt; Package glibc-devel.x86_64 0:2.17-106.el7_2.8 will be installed --\u0026gt; Processing Dependency: glibc-headers = 2.17-106.el7_2.8 for package: glibc-devel-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: glibc = 2.17-106.el7_2.8 for package: glibc-devel-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: glibc-headers for package: glibc-devel-2.17-106.el7_2.8.x86_64 ---\u0026gt; Package perl-Carp.noarch 0:1.26-244.el7 will be installed ---\u0026gt; Package perl-Exporter.noarch 0:5.68-3.el7 will be installed ---\u0026gt; Package perl-File-Path.noarch 0:2.09-2.el7 will be installed ---\u0026gt; Package perl-File-Temp.noarch 0:0.23.01-3.el7 will be installed ---\u0026gt; Package perl-Filter.x86_64 0:1.49-3.el7 will be installed ---\u0026gt; Package perl-Getopt-Long.noarch 0:2.40-2.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Usage) \u0026gt;= 1.14 for package: perl-Getopt-Long-2.40-2.el7.noarch --\u0026gt; Processing Dependency: perl(Text::ParseWords) for package: perl-Getopt-Long-2.40-2.el7.noarch ---\u0026gt; Package perl-PathTools.x86_64 0:3.40-5.el7 will be installed ---\u0026gt; Package perl-Pod-Simple.noarch 1:3.28-4.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Escapes) \u0026gt;= 1.04 for package: 1:perl-Pod-Simple-3.28-4.el7.noarch --\u0026gt; Processing Dependency: perl(Encode) for package: 1:perl-Pod-Simple-3.28-4.el7.noarch ---\u0026gt; Package perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 will be installed ---\u0026gt; Package perl-Socket.x86_64 0:2.010-3.el7 will be installed ---\u0026gt; Package perl-Storable.x86_64 0:2.45-3.el7 will be installed ---\u0026gt; Package perl-Time-HiRes.x86_64 4:1.9725-3.el7 will be installed ---\u0026gt; Package perl-Time-Local.noarch 0:1.2300-2.el7 will be installed ---\u0026gt; Package perl-constant.noarch 0:1.27-2.el7 will be installed ---\u0026gt; Package perl-libs.x86_64 4:5.16.3-286.el7 will be installed ---\u0026gt; Package perl-macros.x86_64 4:5.16.3-286.el7 will be installed ---\u0026gt; Package perl-threads.x86_64 0:1.87-4.el7 will be installed ---\u0026gt; Package perl-threads-shared.x86_64 0:1.43-6.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package glibc.x86_64 0:2.17-105.el7 will be updated --\u0026gt; Processing Dependency: glibc = 2.17-105.el7 for package: glibc-common-2.17-105.el7.x86_64 ---\u0026gt; Package glibc.x86_64 0:2.17-106.el7_2.8 will be an update ---\u0026gt; Package glibc-headers.x86_64 0:2.17-106.el7_2.8 will be installed --\u0026gt; Processing Dependency: kernel-headers \u0026gt;= 2.2.1 for package: glibc-headers-2.17-106.el7_2.8.x86_64 --\u0026gt; Processing Dependency: kernel-headers for package: glibc-headers-2.17-106.el7_2.8.x86_64 ---\u0026gt; Package perl-Encode.x86_64 0:2.51-7.el7 will be installed ---\u0026gt; Package perl-Pod-Escapes.noarch 1:1.04-286.el7 will be installed ---\u0026gt; Package perl-Pod-Usage.noarch 0:1.63-3.el7 will be installed --\u0026gt; Processing Dependency: perl(Pod::Text) \u0026gt;= 3.15 for package: perl-Pod-Usage-1.63-3.el7.noarch --\u0026gt; Processing Dependency: perl-Pod-Perldoc for package: perl-Pod-Usage-1.63-3.el7.noarch ---\u0026gt; Package perl-Text-ParseWords.noarch 0:3.29-4.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package glibc-common.x86_64 0:2.17-105.el7 will be updated ---\u0026gt; Package glibc-common.x86_64 0:2.17-106.el7_2.8 will be an update ---\u0026gt; Package kernel-headers.x86_64 0:3.10.0-327.36.3.el7 will be installed ---\u0026gt; Package perl-Pod-Perldoc.noarch 0:3.20-4.el7 will be installed --\u0026gt; Processing Dependency: perl(parent) for package: perl-Pod-Perldoc-3.20-4.el7.noarch --\u0026gt; Processing Dependency: perl(HTTP::Tiny) for package: perl-Pod-Perldoc-3.20-4.el7.noarch ---\u0026gt; Package perl-podlators.noarch 0:2.5.1-3.el7 will be installed --\u0026gt; Running transaction check ---\u0026gt; Package perl-HTTP-Tiny.noarch 0:0.033-3.el7 will be installed ---\u0026gt; Package perl-parent.noarch 1:0.225-244.el7 will be installed --\u0026gt; Finished Dependency Resolution Dependencies Resolved ================================================================================ Package Arch Version Repository Size ================================================================================ Installing: gcc x86_64 4.8.5-4.el7 base 16 M kernel-devel x86_64 3.10.0-327.el7 base 11 M perl x86_64 4:5.16.3-286.el7 base 8.0 M Installing for dependencies: cpp x86_64 4.8.5-4.el7 base 5.9 M glibc-devel x86_64 2.17-106.el7_2.8 updates 1.0 M glibc-headers x86_64 2.17-106.el7_2.8 updates 663 k kernel-headers x86_64 3.10.0-327.36.3.el7 updates 3.2 M perl-Carp noarch 1.26-244.el7 base 19 k perl-Encode x86_64 2.51-7.el7 base 1.5 M perl-Exporter noarch 5.68-3.el7 base 28 k perl-File-Path noarch 2.09-2.el7 base 26 k perl-File-Temp noarch 0.23.01-3.el7 base 56 k perl-Filter x86_64 1.49-3.el7 base 76 k perl-Getopt-Long noarch 2.40-2.el7 base 56 k perl-HTTP-Tiny noarch 0.033-3.el7 base 38 k perl-PathTools x86_64 3.40-5.el7 base 82 k perl-Pod-Escapes noarch 1:1.04-286.el7 base 50 k perl-Pod-Perldoc noarch 3.20-4.el7 base 87 k perl-Pod-Simple noarch 1:3.28-4.el7 base 216 k perl-Pod-Usage noarch 1.63-3.el7 base 27 k perl-Scalar-List-Utils x86_64 1.27-248.el7 base 36 k perl-Socket x86_64 2.010-3.el7 base 49 k perl-Storable x86_64 2.45-3.el7 base 77 k perl-Text-ParseWords noarch 3.29-4.el7 base 14 k perl-Time-HiRes x86_64 4:1.9725-3.el7 base 45 k perl-Time-Local noarch 1.2300-2.el7 base 24 k perl-constant noarch 1.27-2.el7 base 19 k perl-libs x86_64 4:5.16.3-286.el7 base 687 k perl-macros x86_64 4:5.16.3-286.el7 base 43 k perl-parent noarch 1:0.225-244.el7 base 12 k perl-podlators noarch 2.5.1-3.el7 base 112 k perl-threads x86_64 1.87-4.el7 base 49 k perl-threads-shared x86_64 1.43-6.el7 base 39 k Updating for dependencies: glibc x86_64 2.17-106.el7_2.8 updates 3.6 M glibc-common x86_64 2.17-106.el7_2.8 updates 11 M Transaction Summary ================================================================================ Install 3 Packages (\u0026#43;30 Dependent packages) Upgrade ( 2 Dependent packages) Total download size: 64 M Downloading packages: Delta RPMs disabled because /usr/bin/applydeltarpm not installed. Public key for cpp-4.8.5-4.el7.x86_64.rpm is not installed warning: /var/cache/yum/x86_64/7/base/packages/cpp-4.8.5-4.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY Public key for glibc-2.17-106.el7_2.8.x86_64.rpm is not installed -------------------------------------------------------------------------------- Total 16 MB/s | 64 MB 00:04 Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 Importing GPG key 0xF4A80EB5: Userid : \u0026#34;CentOS-7 Key (CentOS 7 Official Signing Key) \u0026lt;security@centos.org\u0026gt;\u0026#34; Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5 Package : centos-release-7-2.1511.el7.centos.2.10.x86_64 (@anaconda) From : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 Running transaction check Running transaction test Transaction test succeeded Running transaction Updating : glibc-2.17-106.el7_2.8.x86_64 1/37 Updating : glibc-common-2.17-106.el7_2.8.x86_64 2/37 Installing : 1:perl-parent-0.225-244.el7.noarch 3/37 Installing : perl-HTTP-Tiny-0.033-3.el7.noarch 4/37 Installing : perl-podlators-2.5.1-3.el7.noarch 5/37 Installing : perl-Pod-Perldoc-3.20-4.el7.noarch 6/37 Installing : 1:perl-Pod-Escapes-1.04-286.el7.noarch 7/37 Installing : perl-Text-ParseWords-3.29-4.el7.noarch 8/37 Installing : perl-Encode-2.51-7.el7.x86_64 9/37 Installing : perl-Pod-Usage-1.63-3.el7.noarch 10/37 Installing : 4:perl-libs-5.16.3-286.el7.x86_64 11/37 Installing : 4:perl-macros-5.16.3-286.el7.x86_64 12/37 Installing : perl-Storable-2.45-3.el7.x86_64 13/37 Installing : perl-Exporter-5.68-3.el7.noarch 14/37 Installing : perl-constant-1.27-2.el7.noarch 15/37 Installing : perl-Time-Local-1.2300-2.el7.noarch 16/37 Installing : perl-Socket-2.010-3.el7.x86_64 17/37 Installing : perl-Carp-1.26-244.el7.noarch 18/37 Installing : 4:perl-Time-HiRes-1.9725-3.el7.x86_64 19/37 Installing : perl-PathTools-3.40-5.el7.x86_64 20/37 Installing : perl-Scalar-List-Utils-1.27-248.el7.x86_64 21/37 Installing : perl-File-Temp-0.23.01-3.el7.noarch 22/37 Installing : perl-File-Path-2.09-2.el7.noarch 23/37 Installing : perl-threads-shared-1.43-6.el7.x86_64 24/37 Installing : perl-threads-1.87-4.el7.x86_64 25/37 Installing : perl-Filter-1.49-3.el7.x86_64 26/37 Installing : 1:perl-Pod-Simple-3.28-4.el7.noarch 27/37 Installing : perl-Getopt-Long-2.40-2.el7.noarch 28/37 Installing : 4:perl-5.16.3-286.el7.x86_64 29/37 Installing : cpp-4.8.5-4.el7.x86_64 30/37 Installing : kernel-headers-3.10.0-327.36.3.el7.x86_64 31/37 Installing : glibc-headers-2.17-106.el7_2.8.x86_64 32/37 Installing : glibc-devel-2.17-106.el7_2.8.x86_64 33/37 Installing : gcc-4.8.5-4.el7.x86_64 34/37^@ Installing : kernel-devel-3.10.0-327.el7.x86_64 35/37 Cleanup : glibc-2.17-105.el7.x86_64 36/37 Cleanup : glibc-common-2.17-105.el7.x86_64 37/37 Verifying : perl-HTTP-Tiny-0.033-3.el7.noarch 1/37 Verifying : gcc-4.8.5-4.el7.x86_64 2/37 Verifying : perl-threads-shared-1.43-6.el7.x86_64 3/37 Verifying : perl-Storable-2.45-3.el7.x86_64 4/37 Verifying : kernel-headers-3.10.0-327.36.3.el7.x86_64 5/37 Verifying : perl-Exporter-5.68-3.el7.noarch 6/37 Verifying : perl-constant-1.27-2.el7.noarch 7/37 Verifying : perl-PathTools-3.40-5.el7.x86_64 8/37 Verifying : 4:perl-libs-5.16.3-286.el7.x86_64 9/37 Verifying : 4:perl-macros-5.16.3-286.el7.x86_64 10/37 Verifying : 1:perl-Pod-Escapes-1.04-286.el7.noarch 11/37 Verifying : 1:perl-parent-0.225-244.el7.noarch 12/37 Verifying : 4:perl-5.16.3-286.el7.x86_64 13/37 Verifying : glibc-devel-2.17-106.el7_2.8.x86_64 14/37 Verifying : perl-File-Temp-0.23.01-3.el7.noarch 15/37 Verifying : 1:perl-Pod-Simple-3.28-4.el7.noarch 16/37 Verifying : glibc-headers-2.17-106.el7_2.8.x86_64 17/37 Verifying : perl-Time-Local-1.2300-2.el7.noarch 18/37 Verifying : glibc-common-2.17-106.el7_2.8.x86_64 19/37 Verifying : perl-Pod-Perldoc-3.20-4.el7.noarch 20/37 Verifying : perl-Socket-2.010-3.el7.x86_64 21/37 Verifying : perl-Carp-1.26-244.el7.noarch 22/37 Verifying : perl-podlators-2.5.1-3.el7.noarch 23/37 Verifying : 4:perl-Time-HiRes-1.9725-3.el7.x86_64 24/37 Verifying : perl-Scalar-List-Utils-1.27-248.el7.x86_64 25/37 Verifying : glibc-2.17-106.el7_2.8.x86_64 26/37 Verifying : perl-Pod-Usage-1.63-3.el7.noarch 27/37 Verifying : perl-Encode-2.51-7.el7.x86_64 28/37 Verifying : perl-Getopt-Long-2.40-2.el7.noarch 29/37 Verifying : kernel-devel-3.10.0-327.el7.x86_64 30/37 Verifying : cpp-4.8.5-4.el7.x86_64 31/37 Verifying : perl-File-Path-2.09-2.el7.noarch 32/37 Verifying : perl-threads-1.87-4.el7.x86_64 33/37 Verifying : perl-Filter-1.49-3.el7.x86_64 34/37 Verifying : perl-Text-ParseWords-3.29-4.el7.noarch 35/37 Verifying : glibc-common-2.17-105.el7.x86_64 36/37 Verifying : glibc-2.17-105.el7.x86_64 37/37 Installed: gcc.x86_64 0:4.8.5-4.el7 kernel-devel.x86_64 0:3.10.0-327.el7 perl.x86_64 4:5.16.3-286.el7 Dependency Installed: cpp.x86_64 0:4.8.5-4.el7 glibc-devel.x86_64 0:2.17-106.el7_2.8 glibc-headers.x86_64 0:2.17-106.el7_2.8 kernel-headers.x86_64 0:3.10.0-327.36.3.el7 perl-Carp.noarch 0:1.26-244.el7 perl-Encode.x86_64 0:2.51-7.el7 perl-Exporter.noarch 0:5.68-3.el7 perl-File-Path.noarch 0:2.09-2.el7 perl-File-Temp.noarch 0:0.23.01-3.el7 perl-Filter.x86_64 0:1.49-3.el7 perl-Getopt-Long.noarch 0:2.40-2.el7 perl-HTTP-Tiny.noarch 0:0.033-3.el7 perl-PathTools.x86_64 0:3.40-5.el7 perl-Pod-Escapes.noarch 1:1.04-286.el7 perl-Pod-Perldoc.noarch 0:3.20-4.el7 perl-Pod-Simple.noarch 1:3.28-4.el7 perl-Pod-Usage.noarch 0:1.63-3.el7 perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 perl-Socket.x86_64 0:2.010-3.el7 perl-Storable.x86_64 0:2.45-3.el7 perl-Text-ParseWords.noarch 0:3.29-4.el7 perl-Time-HiRes.x86_64 4:1.9725-3.el7 perl-Time-Local.noarch 0:1.2300-2.el7 perl-constant.noarch 0:1.27-2.el7 perl-libs.x86_64 4:5.16.3-286.el7 perl-macros.x86_64 4:5.16.3-286.el7 perl-parent.noarch 1:0.225-244.el7 perl-podlators.noarch 0:2.5.1-3.el7 perl-threads.x86_64 0:1.87-4.el7 perl-threads-shared.x86_64 0:1.43-6.el7 Dependency Updated: glibc.x86_64 0:2.17-106.el7_2.8 glibc-common.x86_64 0:2.17-106.el7_2.8 Complete! Copy iso file /Applications/VirtualBox.app/Contents/MacOS/VBoxGuestAdditions.iso into the box /tmp/VBoxGuestAdditions.iso mount: /dev/loop0 is write-protected, mounting read-only Installing Virtualbox Guest Additions 5.0.30 - guest version is 5.0.26 Verifying archive integrity... All good. Uncompressing VirtualBox 5.0.30 Guest Additions for Linux............ VirtualBox Guest Additions installer Removing installed version 5.0.26 of VirtualBox Guest Additions... Removing existing VirtualBox non-DKMS kernel modules[ OK ] Copying additional installer modules ... Installing additional modules ... Removing existing VirtualBox non-DKMS kernel modules[ OK ] Building the VirtualBox Guest Additions kernel modules Building the main Guest Additions module^@[ OK ] Building the shared folder support module[ OK ] Building the graphics driver module[ OK ] Doing non-kernel setup of the Guest Additions[ OK ] You should restart your guest to make sure the new modules are actually used ==\u0026gt; host: Checking for guest additions in VM... ==\u0026gt; host: Setting hostname... ==\u0026gt; host: Configuring and enabling network interfaces... ^@==\u0026gt; host: Mounting shared folders... host: /vagrant =\u0026gt; /Users/XXXXX/development/vagrant ==\u0026gt; host: Running provisioner: ansible_local... host: Installing Ansible... host: Running ansible-playbook... cd /vagrant \u0026amp;\u0026amp; PYTHONUNBUFFERED=1 ANSIBLE_FORCE_COLOR=true ansible-playbook --limit=\u0026#34;all\u0026#34; --inventory-file=provision/inventory -v provision/playbook.yml Using /vagrant/ansible.cfg as config file PLAY [host] ******************************************************************** TASK [setup] ******************************************************************* ok: [host] TASK [provision test] ********************************************************** ok: [host] =\u0026gt; { \u0026#34;msg\u0026#34;: \u0026#34;provision test\u0026#34; } PLAY RECAP ********************************************************************* host : ok=2 changed=0 unreachable=0 failed=0 vagrant 起動確認 $ vagrant ssh host [vagrant@host ~]$ ansible --version ansible 2.2.0.0 config file = /etc/ansible/ansible.cfg configured module search path = Default w/o overrides [vagrant@host ~]$ ssh 出来て、ansibleのインストールが確認できたらここまでは完了。\n","permalink":"https://techteco.github.io/2016/11/28/vagrant-ansible-local-1/","tags":["vagrant","Server","virtualbox"],"title":"Vagrant+VirtualBox+Ansibleで開発環境を構築する（その１）"},{"categories":["AWS"],"content":"AWS CLIをつかってS3にファイルアップロード hugoで出力されたファイルをS3にアップするコマンドのメモ 前提 awscliでインストール済 対象のバケットのアクセスポリシー設定済 コマンド public配下を、公開用のS3バケットにsyncする\n$ aws s3 sync ~/techte.co/public/ s3://techte.co --exact-timestamps 同期したくないファイルを除外するには、\u0026ndash;excludeオプションをつける下の例は、.から始まる隠しファイルや.gitなどを除外する\n$ aws s3 sync ~/techte.co/public/ s3://techte.co --exact-timestamps --exclude \u0026#34;.*\u0026#34; ","permalink":"https://techteco.github.io/2016/11/22/s3-sync/","tags":["s3","aws cli"],"title":"【メモ】AWS CLIをつかってS3にファイルアップロード"},{"categories":["Note"],"content":"Hugoの基本的な使い方メモ bloggerからhugoに移行にしたので、簡単に使い方のメモ 環境 OS X El Capitan 10.11.6 Homebrew 設定済み golangインストール済み $ go version go version go1.7.3 darwin/amd64 インストール $ brew install hugo プロジェクト作成 $ hugo new site co.techte テーマ適用(HugoMDL) このサイトで使ったテーマ $ cd co.techte/themes/ $ git clone https://github.com/jchatkinson/HugoMDL プレビュー $ hugo server --watch --buildDrafts ビルド $ hugo ","permalink":"https://techteco.github.io/2016/11/22/hugo-install/","tags":["Hugo"],"title":"【メモ】Hugoの基本的な使い方"},{"categories":["AWS"],"content":"MacにAWS CLIインストール AWS 公式：Installing the AWS Command Line Interface AWS 公式：Configuring the AWS Command Line Interface インストールスクリプト pip のウェブサイトからインストールスクリプトをダウンロードし実行します。\n$ curl \u0026#34;https://bootstrap.pypa.io/get-pip.py\u0026#34; -o \u0026#34;get-pip.py\u0026#34; $ pip -V pip 8.1.2 from /usr/local/lib/python2.7/site-packages (python 2.7) $ sudo python get-pip.py AWS CLI インストール $ sudo pip install awscli $ aws --version aws-cli/1.11.13 Python/2.7.12 Darwin/15.6.0 botocore/1.4.70 AWS CLI 設定 $ aws configure AWS Access Key ID [None]: AK********************** AWS Secret Access Key [None]: wJa**************************** Default region name [None]: us-west-2 Default output format [None]: ENTER 設定ファイル\n$ tree .aws .aws ├── config └── credentials 0 directories, 2 files ","permalink":"https://techteco.github.io/2016/11/19/aws-cli-install/","tags":["aws cli","mac"],"title":"MacにAWS CLIインストール"},{"categories":["PHP"],"content":"【FuelPHP】ログの出力先を変更する FuelPHPを使い始めて２年以上経ちましたが、デフォルトのログ出力が使いづらいなと思いつつ放置してたのをようやく変更。といっても、とっても簡単でした。\n公式サイト FuelPHP この時点での最新版は1.72ですね。\nFuelPHPのlog出力先の設定 log出力先の作成 logrotateの設定 FuelPHPのlog出力先の設定 app/config/config.phpに２行追加するだけです\n\u0026#39;log_path\u0026#39; =\u0026gt; \u0026#39;/var/log/fuelphp/\u0026#39;, \u0026#39;log_file\u0026#39; =\u0026gt; \u0026#39;fuelphp.log\u0026#39;, 実行したら、怒られた。事前にファイルパス作っておかないダメデスね。\nFuel\\Core\\FuelException [ Error ]: Unable to create or write to the log file. Please check the permissions on /var/log/fuelphp/. (mkdir(): 許可がありません) log出力先の作成 普通に、ディレクトリ作ってパーミッションとか設定する。※例は、nginxで動作している環境\n$ sudo mkdir /var/log/fuelphp $ sudo chown nginx:nginx /var/log/fuelphp $ sudo chmod 775 /var/log/fuelphp $ ll | grep fuelphp drwxrwxr-x 2 nginx nginx 24 1月 7 13:08 fuelphp logrotateの設定 このままだとlogがパンクしてしまうので、logrotateの設定もしておく/etc/logrotate.d/fuelphpを作成。中身は下のとおり。\n/var/log/fuelphp/*.log { daily missingok rotate 30 compress notifempty create 664 nginx nginx } 以上です。簡単でしたね。\n","permalink":"https://techteco.github.io/2016/01/07/fuelphp-log/","tags":["fuelphp"],"title":"【FuelPHP】ログの出力先を変更する"},{"categories":["Note"],"content":"wgetをインストール 今更ながらmacにwgetが入ってないことに気づく。。とういうわけで、macにwgetをインストールしてみる\n公式サイト wget この時点での最新版は1.16ですね。\nインストール手順 $ cd /tmp $ curl -O http://ftp.gnu.org/pub/gnu/wget/wget-1.16.tar.gz $ tar xvzf wget-1.16.tar.gz $ cd wget-1.16 $ sudo ./configure --with-ssl=openssl $ sudo make $ sudo make install インストール確認 $ which wget /usr/local/bin/wget ","permalink":"https://techteco.github.io/2015/09/28/mac-wget/","tags":["wget"],"title":"【メモ】MACにwgetをインストール"},{"categories":["Note"],"content":"連番のディレクトリを作成 作業用に、とにかく連番でディレクトリを作りたいことがあって、便利なコマンドさがしてたらとても簡単んだったのでメモ。 1から10までのディレクトリを作る場合\nコマンド $ mkdir {1..10} 実行結果 $ tree ./ ./ ├── 1 ├── 10 ├── 2 ├── 3 ├── 4 ├── 5 ├── 6 ├── 7 ├── 8 └── 9 10 directories, 0 files ","permalink":"https://techteco.github.io/2015/09/10/seq-dir/","tags":["mkdir"],"title":"【小ネタ】簡単に連番のディレクトリを作る方法"},{"categories":["Front"],"content":"jsファイルをminifyするためのgulup設定 前回作成した、typescript環境にjavascriptのminifyを追加してみる。ついでに、npm installも試してみる\n前回 gulpでtypescript環境を構築する package.json 新しいプロジェクトディレクトリを作成して、そこに前回利用したpackage.jsonを置く\n$ ls package.json npm installでモジュールをインストール npm installを実行すると、package.jsonの内容から、必要なモジュールがインストールされる\n$ npm install こんな感じでインストールされている\n$ tree -L 2 . ├── node_modules │ ├── gulp │ ├── gulp-typescript │ ├── gulp-watch │ └── require-dir └── package.json 5 directories, 1 file あとは、前回作成したモジュール以外のファイルを持ってくる\ngulp-uglify javascriptファイルをminifyするための、gulp-uglifyをインストールする\nnpm gulp-uglify $ npm install --save-dev gulp-uglify /gulp/tasks/tsc.jsの内容前回作成したtsc.jsを以下のように編集する\nvar gulp = require(\u0026#34;gulp\u0026#34;); var ts = require(\u0026#34;gulp-typescript\u0026#34;); var uglify = require(\u0026#39;gulp-uglify\u0026#39;); var config = require(\u0026#34;../config\u0026#34;); gulp.task(\u0026#34;tsc\u0026#34;, function() { gulp.src(config.ts.src) .pipe(ts(config.ts.options)) .js .pipe(gulp.dest(config.ts.dest)) .pipe(uglify(config.uglify.options)) .pipe(gulp.dest(config.uglify.dest)); }); ./gulp/config.js\nmodule.exports = { ts: { src: \u0026#34;./src/ts/**/*.ts\u0026#34;, dest: \u0026#34;./src/js\u0026#34;, options: { removeComments: true, noImplicitAny: true, noLib: false, onoEmitOnErrorut: false, target: \u0026#34;ES5\u0026#34; } }, // for gulp-uglify uglify: { dest: \u0026#34;./src/js/min\u0026#34;, options: { beautify:true, preserveComments: \u0026#39;some\u0026#39; } } }; これでgulpを実行すると、通常のjsファイルとminifyされたjsファイルができましたね。\n$ ls -R ./src/js min sample.js ./src/js/min: sample.js ","permalink":"https://techteco.github.io/2015/09/04/gulp-minify-js/","tags":["gulp","gulp-ugilfy","typescript","javascript","minify","npm"],"title":"gulpでtypescriptから出力されたjavascriptをminifyする"},{"categories":["Front"],"content":"typescriptをやってみる 公式サイト typescript typescriptでも触ってみようということで、gulpで環境をつくってみます\nゴールは、\ntsファイルを監視して、ファイルが更新されたら、コンパイルしてjsファイルを出力する 構築 package.jsonを作成 npm init コマンドでpackage.jsonのひな形を作成。入力内容は適当に。\n$ npm init とりあえず、こんな感じにしておく。\n{ \u0026#34;name\u0026#34;: \u0026#34;gulp_typescript\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;gulp for typescript\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;gulpfile.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34; } } gulpをローカルにインストール ローカルイントールで、\u0026ndash;save-devオプションでpackage.jsonを更新する\n$ npm install --save-dev gulp gulpfile.jsを作成 タスクをファイル分割して管理出来るようにrequire-dirをインストール\nnpm require-dir $ npm install --save-dev require-dir gulpfile.js\nvar dir = require(\u0026#39;require-dir\u0026#39;); dir(\u0026#39;./gulp/tasks\u0026#39;, { recurse: true }); default.jsを作成 gulpコマンド実行時に最初に読み込むタスクファイル gulpのタスクを保存していく ./gulp/tasks とtypescript用 ./src/ts と実行後のjavascript用 ./src/js を作成\n$ tree -L 2 . ├── gulp │ └── tasks ├── gulpfile.js ├── node_modules │ ├── gulp │ └── require-dir ├── package.json └── src ├── js └── ts 7 directories, 2 files ./gulp/tasks/default.jsの内容 \u0026quot;watch\u0026quot;タスクを実行しますよってことなので、次にwatchタスクをつくる\n./gulp/tasks/default.js\nvar gulp = require(\u0026#34;gulp\u0026#34;); gulp.task(\u0026#34;default\u0026#34;, [\u0026#34;watch\u0026#34;]); watch.jsを作成 ファイル監視するためにgulp-watchをインストール\nnpm gulp-watch $ npm install --save-dev gulp-watch ./gulp/tasks/watch.jsの内容対象ファイルに変更があったら、\u0026quot;tsc\u0026quot;タスクを実行しますよってこと 対象のファイルは、configから読みこむようにする\n./gulp/tasks/watch.js\nvar gulp = require(\u0026#34;gulp\u0026#34;); var watch = require(\u0026#34;gulp-watch\u0026#34;); var config = require(\u0026#34;../config\u0026#34;); gulp.task(\u0026#34;watch\u0026#34;, function() { watch(config.ts.src, function() { gulp.start([\u0026#34;tsc\u0026#34;]); }); }); ./gulp/config.js\nmodule.exports = { ts: { src: \u0026#34;./src/ts/**/*.ts\u0026#34;, } }; tsc.js typescriptのコンパイラとしてgulp-typescriptをインストール\nnpm gulp-typescript $ npm install --save-dev gulp-typescript ./gulp/config.jsに設定追加\nmodule.exports = { ts: { src: \u0026#34;./src/ts/**/*.ts\u0026#34;, dest: \u0026#34;./src/js\u0026#34;, options: { removeComments: true, noImplicitAny: true, noLib: false, noEmitOnError: false, target: \u0026#34;ES5\u0026#34; } } }; ./gulp/tsc.js\nvar gulp = require(\u0026#34;gulp\u0026#34;); var ts = require(\u0026#34;gulp-typescript\u0026#34;); var config = require(\u0026#34;../config\u0026#34;); gulp.task(\u0026#34;tsc\u0026#34;, function() { gulp.src(config.ts.src) .pipe(ts(config.ts.options)) .js .pipe(gulp.dest(config.ts.dest)); }); gulpを実行する なんかwatchしてるっぽい\n$ gulp [17:03:52] Using gulpfile ~/gulpfile.js [17:03:52] Starting \u0026#39;watch\u0026#39;... [17:03:52] Finished \u0026#39;watch\u0026#39; after 6.91 ms [17:03:52] Starting \u0026#39;default\u0026#39;... [17:03:52] Finished \u0026#39;default\u0026#39; after 10 μs 適当なtypescriptのファイルをおいてみる\n./src/ts/sample.ts\nclass Greeter { constructor(public greeting: string) { } greet() { return \u0026#34;\u0026lt;h1\u0026gt;\u0026#34; \u0026#43; this.greeting \u0026#43; \u0026#34;\u0026lt;/h1\u0026gt;\u0026#34;; } }; var greeter = new Greeter(\u0026#34;Hello, world!\u0026#34;); document.body.innerHTML = greeter.greet(); ./src/js/sample.js ができてますね\nvar Greeter = (function () { function Greeter(greeting) { this.greeting = greeting; } Greeter.prototype.greet = function () { return \u0026#34;\u0026lt;h1\u0026gt;\u0026#34; \u0026#43; this.greeting \u0026#43; \u0026#34;\u0026lt;/h1\u0026gt;\u0026#34;; }; return Greeter; })(); ; var greeter = new Greeter(\u0026#34;Hello, world!\u0026#34;); document.body.innerHTML = greeter.greet(); ","permalink":"https://techteco.github.io/2015/09/02/gulp-typescript/","tags":["gulp","gulp-typescript","gulp-watch","typescript"],"title":"gulpでtypescript環境を構築する"},{"categories":["Front"],"content":"browserifyでhello world 最近、話題？のbrowserifyを触ってみる。とりあえず、公式サイトのhello worldを試してみることに\n公式サイト Browserify browserifyをインストール browserifyをglobalにインストール\n$ npm install -g browserify サンプルで動かすjavascript main.js var unique = require(\u0026#39;uniq\u0026#39;); var data = [1, 2, 2, 3, 4, 5, 5, 5, 6]; console.log(unique(data)); サンプルで利用するuniqモジュールをインストール $ npm install --save--dev uniq bundle.jsを出力 $ browserify main.js -o bundle.js 出力されたbundle.jsの中はこんな感じ。\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\u0026#34;function\u0026#34;\u0026amp;\u0026amp;require;if(!u\u0026amp;\u0026amp;a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\u0026#34;Cannot find module \u0026#39;\u0026#34;\u0026#43;o\u0026#43;\u0026#34;\u0026#39;\u0026#34;);throw f.code=\u0026#34;MODULE_NOT_FOUND\u0026#34;,f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\u0026#34;function\u0026#34;\u0026amp;\u0026amp;require;for(var o=0;o\u0026lt;r.length;o\u0026#43;\u0026#43;)s(r[o]);return s})({1:[function(require,module,exports){ var unique = require(\u0026#39;uniq\u0026#39;); var data = [1, 2, 2, 3, 4, 5, 5, 5, 6]; console.log(unique(data)); },{\u0026#34;uniq\u0026#34;:2}],2:[function(require,module,exports){ \u0026#34;use strict\u0026#34; function unique_pred(list, compare) { var ptr = 1 , len = list.length , a=list[0], b=list[0] for(var i=1; i\u0026lt;len; \u0026#43;\u0026#43;i) { b = a a = list[i] if(compare(a, b)) { if(i === ptr) { ptr\u0026#43;\u0026#43; continue } list[ptr\u0026#43;\u0026#43;] = a } } list.length = ptr return list } function unique_eq(list) { var ptr = 1 , len = list.length , a=list[0], b = list[0] for(var i=1; i\u0026lt;len; \u0026#43;\u0026#43;i, b=a) { b = a a = list[i] if(a !== b) { if(i === ptr) { ptr\u0026#43;\u0026#43; continue } list[ptr\u0026#43;\u0026#43;] = a } } list.length = ptr return list } function unique(list, compare, sorted) { if(list.length === 0) { return list } if(compare) { if(!sorted) { list.sort(compare) } return unique_pred(list, compare) } if(!sorted) { list.sort() } return unique_eq(list) } module.exports = unique },{}]},{},[1]); なんか上手くいってそうです。\n","permalink":"https://techteco.github.io/2015/08/28/try-browserify/","tags":["browserify","npm"],"title":"最近、話題？のbrowserifyを触ってみる"},{"categories":["Front"],"content":" nodebrewをインストール node.jsをインストール gulpをインストール ← ここ 3. gulpをインストール gulpは、npmを使ってインストールする\n公式サイト gulp 公式サイト npm npm npmは、node.jsインストール時に、同時にインストールされている\nnpmのバージョン確認 $ npm version { npm: \u0026#39;2.11.3\u0026#39;, http_parser: \u0026#39;2.3\u0026#39;, modules: \u0026#39;14\u0026#39;, node: \u0026#39;0.12.7\u0026#39;, openssl: \u0026#39;1.0.1p\u0026#39;, uv: \u0026#39;1.6.1\u0026#39;, v8: \u0026#39;3.28.71.19\u0026#39;, zlib: \u0026#39;1.2.8\u0026#39; } npmを最新に更新する $ npm upgrade -g npm $ npm version { npm: \u0026#39;2.14.0\u0026#39;, http_parser: \u0026#39;2.3\u0026#39;, modules: \u0026#39;14\u0026#39;, node: \u0026#39;0.12.7\u0026#39;, openssl: \u0026#39;1.0.1p\u0026#39;, uv: \u0026#39;1.6.1\u0026#39;, v8: \u0026#39;3.28.71.19\u0026#39;, zlib: \u0026#39;1.2.8\u0026#39; } $ gulp 公式サイト gulp(GitHub) npmでgulpをインストール $ npm install --global gulp $ npm install --save-dev gulp $ gulp -v [15:10:53] CLI version 3.9.0 [15:10:53] Local version 3.9.0 $ gulpを動かしてみる お決まりのhello worldですね。適当なフォルダにgulpfile.jsを作成する。\nvar gulp = require(\u0026#39;gulp\u0026#39;); gulp.task(\u0026#39;default\u0026#39;, function() { console.log(\u0026#39;Hello World!\u0026#39;); }); 同じフォルダでgulpを実行する\n$ gulp [15:27:54] Using gulpfile ~/path_to_project/gulpfile.js [15:27:54] Starting \u0026#39;default\u0026#39;... Hello World! [15:27:54] Finished \u0026#39;default\u0026#39; after 98 μs 動きましたね。\n","permalink":"https://techteco.github.io/2015/08/27/macgulp3/","tags":["gulp","mac","node.js","nodebrew","npm"],"title":"Macでgulpを動かそう #3 gulpをインストール"},{"categories":["Front"],"content":" nodebrewをインストール node.jsをインストール ← ここ gulpをインストール 2. node.jsをインストール 公式サイト node.js 最新バージョンをインストール バージョンは、latestを指定することで最新版をインストールする。インストール後は、lsでバージョン確認\n$ nodebrew install latest $ nodebrew ls v0.12.7 current: none $ currentの指定 インストールしただけだと、current: noneとなっているように、使えません\n$ nodebrew use v0.12.7 use v0.12.7 $ node -v v0.12.7 $ ","permalink":"https://techteco.github.io/2015/08/27/macgulp2/","tags":["gulp","mac","node.js","nodebrew","npm"],"title":"Macでgulpを動かそう #2 node.jsをインストール"},{"categories":["Front"],"content":" nodebrewをインストール ← ここ node.jsをインストール gulpをインストール 1. nodebrewをインストール インストールの細かい手順は、公式サイトに詳しく書いてあるので、ざっくりと。\n公式サイト PATHを設定 .bashrcに下記のとおりPATHを設定する\n$ export PATH=$HOME/.nodebrew/current/bin:$PATH 設定の反映 $ source ~/.bashrc 使い方 $ nodebrew help ","permalink":"https://techteco.github.io/2015/08/27/macgulp1/","tags":["gulp","mac","node.js","nodebrew"],"title":"Macでgulpを動かそう #1 nodebrewをインストール"},{"categories":["Note"],"content":"treeコマンド コマンドでディレクトリ構造を表示する方法さがしてたら、便利なのがありました。ていうか、知らないのが恥ずかしいレベルなのか。。\nインストール macにbrewを使ってインストールする\n$ brew install tree $ tree --version tree v1.7.0 (c) 1996 - 2014 by Steve Baker, Thomas Moore, Francesc Rocher, Florian Sesser, Kyosuke Tokoro 簡単な使い方 表示したいpathに移動して\n$ tree . ├── test1 │ └── test.txt ├── test2 │ └── test.txt └── test3 └── test.txt 3 directories, 3 files ","permalink":"https://techteco.github.io/2015/08/26/mac-tree-command/","tags":["tree"],"title":"Macにtreeコマンドをいれる"},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.en/","tags":null,"title":""},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.es/","tags":null,"title":""},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.fr/","tags":null,"title":""},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.hi/","tags":null,"title":""},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.jp/","tags":null,"title":""},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.pl/","tags":null,"title":""},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.ru/","tags":null,"title":""},{"categories":null,"content":"","permalink":"https://techteco.github.io/search/_index.zh-cn/","tags":null,"title":""}]